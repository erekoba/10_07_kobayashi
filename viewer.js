window.NV = window.NV || {};
(function (f) {
    var a = document, b, j, l, c, m, d, i, k, h, e; f.CB = f.CB || ["touchend", "touchstart", "touchmove", "touchcancel", "touchenter", "touchleave", "gesturestart", "gesturechange", "gestureend", "click", "dblclick", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup"]; f.Gj = f.Gj ||
        (function () { var r = function (t) { return a.getElementById(t) }, q = function (u, t) { return u.getElementsByTagName(t) }, o = function (y, x) { if (y.getElementsByClassName) { return y.getElementsByClassName(x) } else { var t = [], w = new RegExp("(^| )" + x + "( |$)"), u = y.getElementsByTagName("*"); for (var v = 0; v < u.length; ++v) { if (w.test(u[v].className)) { t.push(u[v]) } } return t } }, p = function (t) { return a.createElement(t) }, n = function (t, u) { t.appendChild(u) }, g = function (t, u) { t.removeChild(u) }, s = function (t) { return t.cloneNode(true) }; return { Gm: r, FQ: q, Dx: o, Gv: p, Gt: n, Gw: g, Hg: s } })(); f.Hu = f.Hu ||
            (function () {
                var o = (/webkit/i).test(navigator.appVersion) ? "webkit" : (/Firefox/i).test(navigator.userAgent) ? "moz" : ((/MSIE/i).test(navigator.userAgent) || (/Edge/i).test(navigator.userAgent) || (/Trident\//i).test(navigator.userAgent)) ? "ms" : "", p = o == "moz" ? o.substring(0, 1).toUpperCase() + o.substring(1) : o, q = o ? "-" + o.toLowerCase() + "-" : "",
                n = function (v) { if (o == "moz" && (v == "animationStart" || v == "animationEnd" || v == "transitionEnd")) { return v.toLowerCase() } return p ? p + v.substring(0, 1).toUpperCase() + v.substring(1) : v }, s = function (v) { return q + v }, u = function (w) { if (w[0] == "-") { w = w.substr(1) } for (; ;) { var v = w.indexOf("-"); if (v >= 0) { w = w.substr(0, v) + w.charAt(v + 1).toUpperCase() + w.substr(v + 2) } else { break } } if (w.indexOf("moz") === 0) { w = w.substr(0, 1).toUpperCase() + w.substr(1) } return w }, r = function (w, v) {
                    var x = w.className; if (!x.match(new RegExp("( |^)" + v + "( |$)"))) {
                        w.className = !x ||
                            x.length === 0 ? v : (x + " " + v)
                    }
                }, t = function (w, v) { var x = w.className; w.className = x ? x.replace(new RegExp("( |^)" + v + "( |$)", "g"), "$1$2").replace("  ", " ") : "" }, g = function (w, v) { if (w.style.removeProperty) { w.style.removeProperty(v) } else { if (w.style.removeAttribute) { w.style.removeAttribute(v) } } }; return { DV: u, DU: n, BR: s, FF: r, EC: t, Dw: g, Gx: o }
            })(); f.Ht = f.Ht ||
                (function () { var p = true, I = true, J = navigator.userAgent, K = navigator.platform, B = J.indexOf("iPad") >= 0 && K.indexOf("iPad") >= 0, F = J.indexOf("iPhone") >= 0 && K.indexOf("iPhone") >= 0, v = J.indexOf("iPod") >= 0 && K.indexOf("iPod") >= 0, s = B || F || v, D = (function () { var L = J.match(/(iPhone|iPad|iPod)\s+OS\s+([0-9]+_)/); return L ? parseInt(L[2]) : 0 })(), r = (function () { var L = J.match(/(iPhone|iPad|iPod)\s+OS\s+[0-9]+_([0-9]+)_?/); return L ? parseInt(L[2]) : 0 })(), t = (function () { var L = J.match(/(iPhone|iPad|iPod)\s+OS\s+[0-9]+_[0-9]+_([0-9]+)_?/); return L ? parseInt(L[2]) : 0 })(), H = J.indexOf("Android") >= 0, z = (function () { var L = J.match(/Android\s([0-9]+)/); return L ? parseInt(L[1]) : 0 })(), G = J.indexOf("Tizen") >= 0, C = B || (H && J.indexOf("Mobile") < 0), n = !s && !H && !G && ((J.indexOf("Win") >= 0 || J.indexOf("Macintosh") >= 0 || J.indexOf("Linux") >= 0) || (K.indexOf("Win") >= 0 || K.indexOf("Mac") >= 0 || K.indexOf("Linux") >= 0)), o = window.chrome || J.indexOf("CriOS") >= 0 || J.indexOf("Chrome") >= 0, g = J.indexOf("Safari") >= 0, E = g && !o, q = J.indexOf("Firefox") >= 0, w = J.indexOf("MSIE") >= 0 || J.indexOf("Edge") >= 0 || J.indexOf("Trident/") > 0, y = (function () { var L = J.match(/MSIE ([0-9]+)\.([0-9]+)/); if (!L) { L = J.match(/Edge\/([0-9]+)\.([0-9]+)/) } if (!L) { L = J.match(/Trident.*rv\:([0-9]+)\./) } return L ? parseInt(L[1]) : 0 })(), x = (function () { var L = f.Gj.Gv("canvas"); return !!L.getContext })(), u = !w || y >= 9, A = (function () { if (f.Hu.Gx != "webkit" && f.Hu.Gx != "moz" && f.Hu.Gx != "ms") { return false } var L; if (I && (s || G)) { L = true } else { if (I && H) { if ((/Android 2\.1/).test(J) && (/SO-01B/).test(J)) { L = false } else { if (q) { L = false } else { L = true } } } else { if (p && n) { if (w) { L = y >= 10 } else { L = true } } else { L = false } } } return L })(); return { Gb: B, Ff: F, Gd: v, Gz: s, Co: D, Cl: r, Dk: t, Fd: H, Bd: z, GY: n, Fg: C, Fh: o, IS_SAFARI: E, EZ: q, GS: w, CM: y, AP: A, Dt: x, Cp: u } })(); f.GO = f.GO || (function () { var n = { onload: 1, onunload: 1, onblur: 1, onchange: 1, onfocus: 1, onGV: 1, onselect: 1, onsubmit: 1, onabort: 1, onkeydown: 1, onkeypress: 1, onkeyup: 1, onclick: 1, ondblclick: 1, onmousedown: 1, onmousemove: 1, onmouseout: 1, onmouseover: 1, onmouseup: 1 }, p = 1, u = {}, v = function (C, w, z) { var A; if (a.createEvent) { A = a.createEvent("Event"); A.initEvent(w, true, true) } else { if (a.createEventObject) { A = a.createEventObject(); A.eventType = w } } if (z) { for (var B in z) { A[B] = z[B] } } if (C.dispatchEvent) { C.dispatchEvent(A) } else { if (C.fireEvent) { if (n["on" + w]) { C.fireEvent("on" + w, A) } else { if (C["on" + w]) { var y = C["on" + w]; for (var x = 0; x < y.length; ++x) { y[x](A) } } } } } }, o = function (x, A, y, z, w) { if (u[x] === undefined) { u[x] = [] } u[x].push({ elem: A, type: y, listener: z, useCapture: w }); g(A, y, z, w) }, t = function (x) { if (u[x]) { var w = u[x]; for (var y = 0; y < w.length; ++y) { var z = w[y]; q(z.elem, z.type, z.listener, z.useCapture) } delete u[x] } }, g = function (B, z, A, w) { var x = function (C) { if (!C.target && C.srcElement) { C.target = C.srcElement } A.apply(B, arguments) }; if (B.addEventListener) { B.addEventListener(z, x, w) } else { if (B.attachEvent) { if (n["on" + z]) { B.attachEvent("on" + z, x) } else { if (!B["on" + z]) { B["on" + z] = [] } B["on" + z].push(x) } } } if (!A._nv_listenerId) { A._nv_listenerId = ++p } if (!B._nv_listenerWrapper) { B._nv_listenerWrapper = {} } var y = z + "_" + A._nv_listenerId; B._nv_listenerWrapper[y] = x }, q = function (D, B, C, w) { var z = B + "_" + C._nv_listenerId, x = D._nv_listenerWrapper[z]; D._nv_listenerWrapper[z] = null; if (D.removeEventListener) { D.removeEventListener(B, x, w) } else { if (D.detachEvent) { if (n["on" + B]) { D.detachEvent(B, x) } else { if (D["on" + B]) { var A = D["on" + B], y = A.indexOf(x); if (y > 0) { A.splice(y, 1) } } } } } }, s = function (w) { if (w.cancelable && w.preventDefault) { w.preventDefault(); w.stopPropagation() } else { event.returnValue = false; event.cancelBubble = true } }, r = function (y, x) { for (var w = 0; w < x.length; ++w) { g(y, x[w], s, false) } }; return { dispatch: v, Et: g, Dp: q, BP: o, Bi: t, DS: r } })(); f.Gu = f.Gu || (function () {
                    var s = f.Ht.Dt, p = [], g, q, o = function (v, y) { var z = null; for (var x = 0; x < p.length; ++x) { if (p[x].GU === false) { z = p[x]; break } } if (!z) { z = { FC: "nvc_" + p.length }; p.push(z) } if (a.getCSSCanvasContext) { z.DP = a.getCSSCanvasContext("2d", z.FC, v, y) } else { if (!z.GC) { z.GC = f.Gj.Gv("canvas"); z.GC.id = z.FC } z.GC.style.display = "none"; z.GC.style.position = "absolute"; z.GC.width = v; z.GC.height = y; z.DP = z.GC.getContext("2d"); if (f.Ht.EZ) { f.Gj.Gt(a.body, z.GC) } } z.GCWidth = v; z.GCHeight = y; z.GU = true; return { DP: z.DP, FC: z.FC } }, n = function (x) { for (var v = 0; v < p.length; ++v) { var w = p[v]; if (w.FC == x) { return w } } return null }, r = function (w) { var v = n(w); if (v) { if (a.getCSSCanvasContext) { v.DP = a.getCSSCanvasContext("2d", v.FC, 0, 0) } else { v.GC.width = 0; v.GC.height = 0; if (v.GC.parentNode) { f.Gj.Gw(v.GC.parentNode, v.GC) } } v.GCWidth = 0; v.GCHeight = 0; v.GU = false } }, u = function (x) { var w = n(x); if (!w) { return null } var v = o(w.GCWidth, w.GCHeight); v.DP.putImageData(w.DP.getImageData(0, 0, w.GCWidth, w.GCHeight), 0, 0); return v }, t = function (A, C, v, E, D) {
                        if (a.getCSSCanvasContext) {
                            if (!g) {
                                g = f.Hu.BR("canvas")
                            }
                            A.style.backgroundImage = g + "(" + C + ")";
                            A.style.backgroundPosition = v + "px " + E + "px";
                            A.style.backgroundRepeat = "no-repeat"
                        } else {
                            if (f.Ht.EZ) {
                                if (!q) {
                                    q = f.Hu.BR("element")
                                }
                                A.style.backgroundImage = q + "(#" + C + ")";
                                A.style.backgroundPosition = v + "px " + E + "px";
                                A.style.backgroundRepeat = "no-repeat"
                            } else {
                                for (var z = 0; z < p.length; ++z) {
                                    var B = p[z];
                                    if (B.FC == C) {
                                        var w; if (D) { w = f.Gj.Gv("canvas"); w.style.position = "absolute"; w.width = B.GC.width; w.height = B.GC.height; w.getContext("2d").drawImage(B.GC, 0, 0) } else { w = B.GC } w.style.display = "block"; w.style.left = v + "px"; w.style.top = E + "px"; f.Gj.Gt(A, w); break
                                    }
                                }
                            }
                        }
                    }; return { BS: o, Cf: r, Ci: u, Bh: t }
                })(); f.Gn = f.Gn || (function () { var u = false, w = function (C) { if (!C) { return "" } var B = "[\\?&]" + C + "=([^&#]*)", E = new RegExp(B), D = E.exec(window.location.search); return (D === null) ? "" : decodeURIComponent(D[1].replace(/\+/g, " ")) }, A = function (C) { if (!C) { return "" } var B = "(^" + C + "|; *" + C + ")=([^&#;]*)", E = new RegExp(B), D = E.exec(a.cookie); return (D === null) ? "" : decodeURIComponent(D[2].replace(/\+/g, " ")) }, o = (function () { var B = 0, C = function () { div = f.Gj.Gv("div"); div.setAttribute("style", "height:1in;left:-100%;top:-100%;position:absolute;width:1in;"); f.Gj.Gt(a.body, div); B = div.offsetHeight; f.Gj.Gw(a.body, div); div = null }; return function () { if (B === 0) { C() } return B } })(), x = !f.Ht.Gz || !f.Ht.IS_SAFARI || (f.Ht.Co != 8 || f.Ht.Cl > 1 || (f.Ht.Cl == 1 && f.Ht.Dk > 0)), v = function () { if (f.Ht.Gz) { window.open("", "_self") } window.close(); setTimeout(function () { history.back() }, 100) }, p = null, s = function (B) { p = B }, r = function (B) { if (x) { if (!B && p) { B = p } if (B) { if (window.opener) { window.opener.location.href = B; v() } else { window.location.href = B } } else { v() } } else { if (B) { if (f.Gr.Di()) { f.Gr.En(function () { window.location.href = B }) } else { window.location.href = B } } else { f.Toast.Fw("お使いの端末/ブラウザでは、タブを閉じてビューアを終了してください") } } }, n = function (B) { if (x) { if (window.opener) { if (B(window.opener.location.pathname)) { window.opener.location.reload(true) } } v() } else { f.Toast.Fw("お使いの端末/ブラウザでは、タブを閉じてビューアを終了してください") } }, z = function () { if (f.Ht.Gz && f.Ht.Fh) { return a.documentElement.clientWidth || window.innerWidth || a.body.clientWidth } else { return (window.visualViewport ? window.visualViewport.width : window.innerWidth) || a.documentElement.clientWidth || a.body.clientWidth } }, g = function () { if (f.Ht.Gz && f.Ht.Fh) { return a.documentElement.clientHeight || window.innerHeight || a.body.clientHeight } else { return (window.visualViewport ? window.visualViewport.height : window.innerHeight) || a.documentElement.clientHeight || a.body.clientHeight } }, q = function (B) { return B.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1") }, y = function (B, D, C) { return B.replace(new RegExp(q(D), "g"), C) }, t = function (C) { if (u) { var B = C.match(/^https?:\/\/([^\/]+)\/.*$/); if (B) { C = y(C, B[1], location.host) } } return C }; return { Dl: w, Fi: A, GD: o, Ch: s, Hm: r, BW: n, innerWidth: z, innerHeight: g, BT: t } })(); f.FN = f.FN || (function () { var n = navigator.userAgent, g = (/Android 2\.1/).test(n) && (/(HTCX06|T-01C|IS04|SO-01B)/).test(n), p = window.devicePixelRatio, s = function (v, z, u, A, w, t) { if (g) { v.drawImage(z, 0, 0, w, t, u / p, A / p, w / p, t / p) } else { v.drawImage(z, u, A, w, t) } }, o = function (N, L, X, F, D, M, K) { var I = f.Ht.Dt, U = 32, E = 32; if (I) { if (M > 1000 || K > 1000) { U *= 3; E *= 3 } else { if (M > 300 || K > 300) { U *= 2; E *= 2 } } } else { U *= 2; E *= 2 } var P, t = 1, Q = U - 2 * t, u = E - 2 * t, C = L.width, J = L.height, T = C / U, V = J / E, S = new Array(T * V), W = new f.GR.EU(X); for (P = 0; P < T * V; ++P) { S[P] = P } if (I) { N.save(); N.beginPath(); N.moveTo(F, D); N.lineTo(F, D + K); N.lineTo(F + M, D + K); N.lineTo(F + M, D); N.closePath(); N.clip() } for (P = 0; P < T * V; ++P) { var B = W.Du() % S.length, v = S[B], H = (v % T) * U + t, G = Math.floor(v / T) * E + t, w = P, R = (w % T) * Q, O = Math.floor(w / T) * u; S.splice(B, 1); if (I) { if (g) { N.drawImage(L, H, G, Q, u, (F + R) / p, (D + O) / p, Q / p, u / p) } else { N.drawImage(L, H, G, Q, u, F + R, D + O, Q, u) } } else { var z = f.Gj.Gv("div"); z.className = "nv-ie-fragment"; z.style.left = (F + R) + "px"; z.style.top = (D + O) + "px"; z.style.width = Q + "px"; z.style.height = u + "px"; var A = f.Gj.Gv("img"); A.className = "nv-ie-fragment"; A.src = L.attributes.src.value; A.style.left = -H + "px"; A.style.top = -G + "px"; f.Gj.Gt(z, A); f.Gj.Gt(N, z) } } if (I) { N.restore() } }, q = function (F, z, w, D, x, v) { if (z != x || w != v) { return false } var J = 0, L = 0; for (var H = 0; H < 10; ++H) { var A, y, B, K, I; if (H < 5) { A = Math.floor((H + 0.5) * (z / 5)); y = 0; B = 1; K = w; I = K } else { A = 0; y = Math.floor(((H - 5) + 0.5) * (w / 5)); B = z; K = 1; I = B } var u = F.getImageData(A, y, B, K), t = D.getImageData(A, y, B, K); for (var G = 0; G < I; G += 5) { var C = [u.data[G * 4 + 0] - t.data[G * 4 + 0], u.data[G * 4 + 1] - t.data[G * 4 + 1], u.data[G * 4 + 2] - t.data[G * 4 + 2], u.data[G * 4 + 3] - t.data[G * 4 + 3]]; for (var E = 0; E < C.length; ++E) { if (C[E] > 5 || C[E] < -5) { ++L; break } } ++J } } if (L / J > 0.2) { return false } return true }, r = function (F, E, A) { var C = F.getImageData(0, 0, 1, 1); for (var z = 0; z < 10; ++z) { var H, G, u, D, B; if (z < 5) { H = Math.floor((z + 0.5) * (E / 5)); G = 0; u = 1; D = A; B = D } else { H = 0; G = Math.floor(((z - 5) + 0.5) * (A / 5)); u = E; D = 1; B = u } var t = F.getImageData(H, G, u, D); for (var y = 0; y < B; y += 5) { var v = [t.data[y * 4 + 0] - C.data[0], t.data[y * 4 + 1] - C.data[1], t.data[y * 4 + 2] - C.data[2], t.data[y * 4 + 3] - C.data[3]]; for (var x = 0; x < v.length; ++x) { if (v[x] > 5 || v[x] < -5) { return false } } } } return true }; return { Cd: s, AJ: o, CZ: q, BY: r } })(); f.GR = f.GR || (function () { var p = 8741, o = 30873, n = 131071, q = function (r) { this.seed = this.value = r; this.Du = function () { this.value = (this.value * p + o) % n; return this.value } }, g = function (r) { return r < 0.000001 ? 0 : r }; return { EU: q, FI: g } })(); (function () { var g = f.Gj.Gv("div"); if (g.innerText === undefined) { Object.defineProperty(HTMLElement.prototype, "innerText", { get: function () { return this.textContent }, set: function (n) { this.textContent = n } }) } if (!Array.prototype.indexOf) { Array.prototype.indexOf = function (p, n) { for (var o = n; o < p.length; ++o) { if (this[o] === p) { return o } } return -1 } } if (!Array.prototype.some) { Array.prototype.some = function (o) { if (this === null) { throw new TypeError() } var r = Object(this), n = r.length >>> 0; if (typeof o !== "function") { throw new TypeError() } var q = arguments[1]; for (var p = 0; p < n; p++) { if (p in r && o.call(q, r[p], p, r)) { return true } } return false } } if (window.ArrayBuffer) { if (!window.ArrayBuffer.prototype._bcp_toString) { window.ArrayBuffer.prototype._bcp_toString = function (o, p) { if ((o + p) > this.byteLength) { return null } var q = new Uint8Array(this, o, p), u = "", r = 0; while (r < p) { var w = q[r], v, t, s, n; if ((w & 128) === 0) { n = (w & 127); r += 1 } else { if ((w & 224) === 192) { v = q[r + 1]; n = (w & 31) << 6 | (v & 63); r += 2 } else { if ((w & 240) === 224) { v = q[r + 1], t = q[r + 2]; n = (w & 15) << 12 | (v & 63) << 6 | (t & 63); r += 3 } else { if ((w & 248) === 240) { v = q[r + 1], t = q[r + 2], s = q[r + 3]; n = (w & 7) << 18 | (v & 63) << 12 | (t & 63) << 6 | (s & 63); r += 4 } else { throw "Invalid UTF8 string array" } } } } u += String.fromCharCode(n) } return u } } if (!window.ArrayBuffer.prototype._bcp_toInteger) { window.ArrayBuffer.prototype._bcp_toInteger = function (p, n) { var o = this._bcp_toString(p, n); return o ? parseInt(o, 10) : 0 } } if (!window.ArrayBuffer.prototype._bcp_toBase64) { window.ArrayBuffer.prototype._bcp_toBase64 = function (r, p) { if ((r + p) > this.byteLength) { return null } var n = new Uint8Array(this, r, p), q = ""; for (var o = 0; o < n.byteLength; ++o) { q += String.fromCharCode(n[o]) } return btoa(q) } } } window.cloneProps = function (o) { var n = {}; for (var p in o) { n[p] = o[p] } return n }; f.GO.Et(window, "load", function () { if (f.Ht.GY) { f.Hu.FF(a.body, "nv-pc") } if (f.Ht.CM >= 10) { f.Hu.FF(a.body, "nv-ie10") } }); if (f.Ht.GY) { f.GO.DS(a, ["contextmenu"]) } })()
})
    (window.NV);
(function (a) {
a.Gs = a.Gs ||
    (function () {
        var j = window.localStorage, e = function (u) {
            var r = 100, s, q = 0, t = function (A) {
                p(); s = A.key; var x = v(); if (x[s]) { x[s]["browsed"] = new Date().getTime() }
                else { x[s] = { sceneNo: 1, browsed: new Date().getTime() } } q = parseInt(x[s]["sceneNo"]); if (!q) { q = x[s]["sceneNo"] = 1 } var w = []; for (var z in x) { w.push({ key: z, FZ: x[z]["sceneNo"], browsed: x[z]["browsed"] }) }
                if (w.length > r) { w.sort(function (D, C) { return C.browsed - D.browsed }); for (var y = r; y < w.length; ++y) { delete x[w[y].key] } } try { j._bh = JSON.stringify(x) } catch (B) { }
            }, p = function () { if (q <= 0) { return } var w = v(); if (w[s]) { w[s]["sceneNo"] = q; try { j._bh = JSON.stringify(w) } catch (x) { } } }, v = function () { if (!j || !j._bh) { return {} } else { return JSON.parse(j._bh) } }, o = function () { if (arguments.length > 0) { q = arguments[0] } else { return q } }; if (u) { t(u) } return { GV: t, Ha: p, FZ: o }
        }, f = function (p) { if (arguments.length > 1) { if (!j) { return } try { j[p] = arguments[1] } catch (o) { } } else { if (!j || !j[p]) { return 0 } return parseInt(j[p]) } }, g = function (p, o) { return f.apply(null, [p].concat(Array.prototype.slice.call(o))) }, k = function () { return g("_tc2", arguments) }, c = function () { return k() > 0 || g("_t_rd", arguments) }, b = function () { return k() > 0 || g("_t_tb", arguments) }, m = function () { return g("_t_lp", arguments) }, n = function () { return g("_t_h_lp_c", arguments) }, d = function () { g("_t_h_lp_c", g("_t_h_lp_c", []) + 1) }, l = function () { return g("_lct", arguments) }, h = function () { return g("_rdr", arguments) }, i = function () { if (arguments.length > 0) { var o = arguments[0]; if (o == "horizontal") { i(0) } else { if (o == "vertical") { i(1) } } } else { return h() === 0 ? "horizontal" : "vertical" } }; return { Cz: e, DH: k, Bw: c, AQ: b, Bn: m, AH: n, AA: d, AV: l, Bb: i, Cx: h }
    })()
})
    (window.NV);
(function (b) {
    var a = b.Gj, c = b.Gn; b.Magnify = b.Magnify || (function () {
        var e = function () {
            var j = c.innerWidth(), h = c.innerHeight(), f, i; i = Math.round((j < h ? j : h) * 2 / 3); f = a.Gv("div"); f.Fn = i; f.className = "nv-pvLoupe"; f.style.width = i + "px"; f.style.height = i + "px"; loupeInner = a.Gv("div");
            loupeInner.className = "nv-pvLoupeInner"; loupeInner.style.width = (i - 2) + "px"; loupeInner.style.height = (i - 2) + "px"; a.Gt(f, loupeInner); loupeInner2 = a.Gv("div"); loupeInner2.className = "nv-pvLoupeInner2"; loupeInner2.style.width = (i - 4) + "px"; loupeInner2.style.height = (i - 4) + "px"; a.Gt(loupeInner, loupeInner2); var g = f.appendChild; f.appendChild = function (k) { a.Gt(loupeInner2, k) }; return f
        }, d = function (g, f, m) { var l = g.Fn, k = c.innerWidth(), j = c.innerHeight(), i = f - l / 2, h = m - l * 3 / 4; if (i < 0) { i = i + l / 4 * (l / 2 - (i + l / 2)) / (l / 2) } else { if (i > k - l) { i = i - l / 4 * ((i + l / 2) - (k - l / 2)) / (l / 2) } } if (h < 0) { h = l / 7 - l / 4 * (l / 2 - h) / (l / 2 * 7 / 4) } g.style.left = i + "px"; g.style.top = h + "px" }; return { Ho: 2, Eq: e, BN: d }
    })()
})(window.NV);
(function (c) {
    var b = c.Ht, a = c.Gs; c.Fm = c.Fm ||
        (function () {
            var f = document, g = c.Gj, r = c.Gn, p, m = r.Dl("p12"), o = r.Dl("p13"), q = r.Dl("p14"), k = r.Dl("p15"), e = r.Dl("p16"),
            l = function (i) {
                var s = { id: i.bookId, name: i.title, price: i.point + "", variant: i.type == 1 ? "fv" : "pv", dimension2: i.waId, dimension4: "Webビューア", quantity: 1, };
                if (e) { s.dimension1 = e } return s
            }, n = function () { ga("set", "dimension10", a.Bb()) };
            p = function (i) { return { DM: function () { ga("send", "pageview", { page: "/" + i }) }, EX: function (u, s, t, w) { if (typeof t == "function") { w = t; t = undefined } else { if (typeof s == "function") { w = s; s = undefined; t = undefined } } var v = []; v.push("send", "event", i, u); if (s !== undefined) { v.push(s) } if (t !== undefined) { v.push(t) } if (w) { v.push({ hitCallback: function () { w() } }) } ga.apply(this, v) }, Bs: function (s) { ga("ec:addProduct", l(s)); ga("ec:setAction", "detail") }, AR: function (s) { ga("ec:addProduct", l(s)); ga("ec:setAction", "checkout") }, AY: function (t) { ga("ec:addProduct", l(t)); var s = (!b.Fd && window.crypto) ? function (y) { var u = new Uint8Array(1); crypto.getRandomValues(u); var x = u[0] % 16 | 0, w = y == "x" ? x : (x & 3 | 8); return w.toString(16) } : function (x) { var w = Math.random() * 16 | 0, u = x == "x" ? w : (w & 3 | 8); return u.toString(16) }; ga("ec:setAction", "purchase", { id: t.bookId + "-" + "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, s), }) } } }; (function (v, w, z, y, x, u, t) { v.GoogleAnalyticsObject = x; v[x] = v[x] || function () { (v[x].q = v[x].q || []).push(arguments) }; v[x].l = 1 * new Date(); u = w.createElement(z), t = w.getElementsByTagName(z)[0]; u.async = 1; u.src = y; t.parentNode.insertBefore(u, t) })(window, document, "script", "//www.google-analytics.com/analytics.js", "ga"); ga("create", "UA-26569800-12", "auto"); if (e) { ga("set", "dimension1", e) } if (m && m.length > 0 && m !== "0") { var d = [{ Hi: "dimension5", value: o }, { Hi: "dimension6", value: q }, { Hi: "dimension7", value: k }]; for (var j = 0; j < d.length; ++j) { var h = d[j]; if (h.value && h.value.length > 0) { ga("set", h.Hi, h.value) } } } n(); ga("require", "ec"); return { newInstance: function (i) { return p(i) }, AW: n }
        })()
})(window.NV);
(function (k) {
    var d = document, p = "nv_tap", l = "nv_double_tap", h = "nv_flick", n = "nv_scale", i = "nv_single_touch_activated", m = "nv_scroll", q = "nv_scroll_up", r = "nv_single_touch_deactivated", j = "nv_key_pressed", f = "nv_move", e = "nv_long_press_activated", c = "nv_long_press_moved", b = "nv_long_press_deactivated"; var a = (function () { var g = function () { var u = false, s = function (v) { u = v }, t = function (z, x) { var y = [], D = 10, F = function (H) { if (y.length >= D) { y.splice(0, 1) } y.push({ time: new Date().getTime(), x: H.clientX, y: H.clientY }) }, G = null, v = false, C = false, E = function (H) { if (H.button !== 0) { return } if (G !== null) { clearTimeout(G); G = null; v = true } F(H); k.GO.dispatch(z, i, { clientX: H.clientX, clientY: H.clientY }); k.GO.Et(d, "mousemove", A, true); k.GO.Et(d, "mouseup", B, true); k.GO.Dp(d, "mousemove", w, true) }, A = function (L) { F(L); var K = y, I = K.length; if (!C) { var J = K[I - 1].x - K[0].x, H = K[I - 1].y - K[0].y; if (J * J + H * H <= 100) { return } } k.GO.dispatch(z, m, { clientX: K[I - 1].x, clientY: K[I - 1].y, deltaX: K[I - 1].x - K[I - 2].x, deltaY: K[I - 1].y - K[I - 2].y }); v = false; C = true }, B = function (J) { var I = y.splice(0).reverse(); if (C) { if (I.length > 1) { k.GO.dispatch(z, q) } } else { if (v) { k.GO.dispatch(z, l, { clientX: I[0].x, clientY: I[0].y }) } else { var H = function () { k.GO.dispatch(z, p, { clientX: I[0].x, clientY: I[0].y }) }; if (u) { G = setTimeout(function () { G = null; H() }, 120) } else { H() } } } C = false; v = false; y = []; k.GO.Dp(d, "mousemove", A, true); k.GO.Dp(d, "mouseup", B, true); k.GO.Et(d, "mousemove", w, true); k.GO.dispatch(z, r) }, w = function (H) { k.GO.dispatch(z, f, { clientX: H.clientX, clientY: H.clientY }) }; k.GO.Et(d, "keyup", function (H) { k.GO.dispatch(z, j, { keyCode: H.keyCode }) }, false); k.GO.Et(z, "mousedown", E, false); k.GO.Et(d, "mousemove", w, true); k.GO.DS(z, k.CB) }; return { FM: t, Df: s } }; return { newInstance: g } })(); var o = (function () { var g = function () { var u = false, s = function (v) { u = v }, t = function (M, P) { var x = {}, J = 10, B = function (U) { var S, X = Array(); for (var W in x) { X.push(W) } for (S = 0; S < U.targetTouches.length; ++S) { var V = U.targetTouches[S]; var T = x[V.identifier]; if (T) { if (T.length >= J) { T.splice(0, 1) } } else { T = x[V.identifier] = [] } T.push({ time: new Date().getTime(), x: V.clientX, y: V.clientY }); for (var R = 0; R < X.length; ++R) { if (V.identifier == X[R]) { X.splice(R, 1); break } } } for (S = 0; S < X.length; ++S) { delete x[X[S]] } }, D = 0, F = 1, O = 2, Q = null, C = false, A = false, H = 0, z = D, E = D, G = 0, L = (k.Ht.Fd && k.Ht.Fh) || (k.Ht.Gz && k.Ht.Co >= 8), K = null, v = false, N = function (V) { if (z == D && V.targetTouches.length == 1) { z = F; k.GO.dispatch(M, i, { clientX: V.targetTouches[0].clientX, clientY: V.targetTouches[0].clientY }) } else { if (z == F && V.targetTouches.length != 1) { z = O; k.GO.dispatch(M, r) } } if (E == D && V.targetTouches.length == 2) { E = F; var U = V.targetTouches[0], T = V.targetTouches[1], S = U.clientX - T.clientX, R = U.clientY - T.clientY; H = Math.sqrt(S * S + R * R) } else { if (E == F && V.targetTouches.length != 2) { E = O } } }, y = function () { if (K !== null) { clearTimeout(K); K = null } }, w = function () { A = false; C = false; E = D; z = D; H = 0; x = {} }; k.GO.Et(M, "touchstart", function (R) { d.body.style.backgroundColor = (++G % 2) === 0 ? "rgb(1, 0, 0)" : "rgb(0,1,0)"; if (Q !== null) { clearTimeout(Q); Q = null; if (R.targetTouches.length == 1) { C = true } } if (R.targetTouches.length == 1) { K = setTimeout(function () { w(); v = true; k.GO.dispatch(M, e, { clientX: R.targetTouches[0].clientX, clientY: R.targetTouches[0].clientY }) }, 500) } else { if (v) { v = false; k.GO.dispatch(M, b) } else { y() } } B(R); N(R) }, false); k.GO.Et(M, "touchmove", function (aa) { B(aa); if (v) { k.GO.dispatch(M, c, { clientX: aa.targetTouches[0].clientX, clientY: aa.targetTouches[0].clientY }) } else { if (z == F) { var W = aa.targetTouches[0], X = x[W.identifier]; if (X.length > 1) { var Z = X.length; if (L && !A) { var V = X[Z - 1].x - X[0].x, T = X[Z - 1].y - X[0].y; if (V * V + T * T <= 100) { return } } k.GO.dispatch(M, m, { clientX: X[Z - 1].x, clientY: X[Z - 1].y, deltaX: X[Z - 1].x - X[Z - 2].x, deltaY: X[Z - 1].y - X[Z - 2].y }) } } if (E == F) { var ab = aa.targetTouches[0], Y = aa.targetTouches[1], S = x[ab.identifier], R = x[Y.identifier]; if (S.length > 1 && R.length > 1) { var ad = ab.clientX - Y.clientX, ac = ab.clientY - Y.clientY, U = Math.sqrt(ad * ad + ac * ac); k.GO.dispatch(M, n, { GZ: U / H, centerX: (ab.clientX + Y.clientX) / 2, centerY: (ab.clientY + Y.clientY) / 2 }); H = U } } y() } C = false; A = true }, false); var I = function (aa) { if (aa.targetTouches.length === 0) { if (v) { v = false; k.GO.dispatch(M, b) } else { y() } if (z == F) { var X = aa.changedTouches[0], Y = x[X.identifier].splice(0).reverse(); if (A) { if (Y.length > 1) { var Z = Y.length, S = k.Gn.GD(), ac, V, U, R, ab; for (var W = 2; W < Z; ++W) { if (Y[0].time - Y[W].time > 200) { Y = Y.slice(0, W); break } } ab = Y[0].x < Y[Y.length - 1].x ? 1 : -1; ac = (Y[0].time - Y[Y.length - 1].time) / 1000; V = (Y[0].x - Y[Y.length - 1].x) / S; U = (Y[0].y - Y[Y.length - 1].y) / S; if (ac <= 0.2 && (V * V + U * U) / (ac * ac) >= 2 * 2) { k.GO.dispatch(M, h, { elapsedTime: ac * 1000, deltaX: V * S, deltaY: U * S }) } else { k.GO.dispatch(M, q) } } } else { if (C) { k.GO.dispatch(M, l, { clientX: Y[0].x, clientY: Y[0].y }) } else { var T = function () { k.GO.dispatch(M, p, { clientX: Y[0].x, clientY: Y[0].y }) }; if (u) { Q = setTimeout(function () { Q = null; T() }, 120) } else { T() } } } } N(aa); w() } else { N(aa) } }; k.GO.Et(M, "touchend", I, false); k.GO.Et(M, "touchcancel", I, false); k.GO.DS(M, k.CB) }; return { FM: t, Df: s } }; return { newInstance: g } })(); k.Gc = k.Gc || (function () { var g = k.Ht.GY ? a.newInstance() : o.newInstance(), s = function (u) { g.Df(u) }, t = function (v, u) { g.FM(v, !!u) }; return { Fp: p, CO: l, El: h, Ew: n, Ee: m, CX: q, AG: i, AB: r, EO: f, EVENT_KEY_PRESSED: j, AI: e, AT: c, AE: b, FM: t, Df: s } })()
})(window.NV);
(function (d) {
    var c = d.Gj, b = d.Ht, a = d.GO, e = d.Gn; d.DG = d.DG || (function () { var j = e.BT("https://comic.k-manga.jp/api/app/"), h = function (n, s, q) { var o = new XMLHttpRequest(), p = e.Fi("X-MK-SID"), r = q ? "POST" : "GET"; if (!p) { s({ sc: false, cd: "N900" }); return } n = n + (n.indexOf("?") >= 0 ? "&" : "?") + "rp=" + (new Date().getTime()); o.open(r, n, true); if (r == "POST") { o.setRequestHeader("Content-Type", "application/x-www-form-urlencoded") } o.setRequestHeader("x-mgking-ticket", p); o.withCredentials = true; o.onreadystatechange = function (v) { if (o.readyState == this.DONE) { if (o.status == 200) { try { var u = JSON.parse(o.responseText); s({ sc: true, d: u }) } catch (t) { s({ sc: false, cd: "N910" }) } } else { s({ sc: false, cd: "S" + (o.status ? o.status : "000") }) } } }; o.send(r == "POST" ? q : null) }, f = function (o, n, q, r) { var p = o ? "story" : "ikkini/story"; h(j + p + "?target=" + q + "&xid=" + n, r) }, m = function (n, q, t, s, u, r, p, v) { var w = n ? "download" : "ikkini/download"; var o = j + w + "?xid=" + q + "&target=" + t + "&npoint=" + s; if (r !== undefined && r !== null) { o += "&checkid=" + r } if (u !== undefined && u !== null) { o += "&user_coupon=" + u } if (p) { o += "&agree_dangerous=1" } h(o, v) }, l = function (q, o, n, p) { h(j + "bookmark/add", p, "xid=" + o) }, k = function (n, o) { h(j + "related_books?xid=" + n, o) }, g = function (o, n, p) { if (arguments.length == 2) { h(j + "recommend_track", arguments[1], "xid=" + o) } else { h(j + "recommend_track", p, "xid=" + o + "&sid=" + n) } }, i = function (n, o, p) { h(j + "recommend_items?xid=" + n + "&smpl=" + o, p) }; return { Cq: f, BU: m, DF: l, DZ: k, recommendTrack: g, recommendItems: i } })(); d.EP = d.EP || (function () { var i = e.Dl("__ct"), g = ["64kb_QVGA_h", "apple_h"], h = function (k) { return k == "1" ? 50 : 8 }, j = function (k) { return k == "1" ? 20 : 2 }, f = function (z) { var m = g.slice(), k = "https://bv.k-manga.jp/public/app/action/bd00.php", w = "wss://ws.viewer.k-manga.jp/", A = true, q = false, t = z.FT, p = z.GJ, B = z.GG, x = z.GF, u = true, s = [], D = false, C = false, l = (function () { var H = null, I = 0, K = 0, G = 0, F = null, L = function (P) { H.onmessage = null; F = null; if (q || !(P.data instanceof Blob)) { return } var O = new FileReader(); O.onloadend = function () { var S = O.result._bcp_toString(0, 6); if (S == "BCP000") { var R = O.result._bcp_toInteger(6, 10); var Q = O.result._bcp_toString(16, R); t({ sc: true, t: "header", d: JSON.parse(Q) }); y() } else { q = true; t({ sc: false, cd: S }) } }; O.readAsArrayBuffer(P.data) }, M = function (P) { H.onmessage = null; F = null; if (q || !(P.data instanceof Blob)) { return } var O = new FileReader(); O.onloadend = function () { var R = O.result._bcp_toString(0, 6); if (R == "BCP000") { var Q = O.result._bcp_toInteger(6, 10); var U = O.result._bcp_toString(16, Q); var ac = JSON.parse(U); var T = O.result._bcp_toInteger(16 + Q, 3); var ab = 19 + Q; var aa = []; for (var Y = 0; Y < T; ++Y) { var V = O.result._bcp_toInteger(ab, 10); ab += 10; var S = O.result._bcp_toBase64(ab, V); ab += V; aa.push(S) } for (Y = 0; Y < ac.scenes.length; ++Y) { var Z = ac.scenes[Y]; for (var X = 0; X < Z.images.length; ++X) { var W = Z.images[X]; W.imgBase64 = aa.shift() } } t({ sc: true, t: "content", d: ac }); y() } else { q = true; t({ sc: false, cd: R }) } }; O.readAsArrayBuffer(P.data) }, J = function (Q) { if (q) { return } var O = "REQUEST " + (Q.type === "header" ? "HEADER" : "DATA"); var P = "t=" + B + "&fn=" + Q.fn + "&o=" + x; if (Q.decryptKey) { P += "&dk=" + Q.decryptKey } H.onmessage = Q.type === "header" ? L : M; H.send(O + "\n" + P); F = Q }, N = function () { if (H) { H.onclose = H.onerror = H.onmessage = null; H.close(); H = null } }; s.push(function () { N() }); return function (R) { c.Gm("dialog-about-browser-label").innerText = "Browser"; var P = false; if (H !== null) { var Q = new Date().getTime(); if (Q - I <= 5 * 60 * 1000) { P = true } else { N() } } if (P) { J(R) } else { var O = null; O = setTimeout(function () { C = true; o(R) }, 5 * 1000); var S = function () { if (O !== null) { clearTimeout(O); O = null } }; I = 0; F = R; H = new WebSocket(w); H.onopen = function () { I = new Date().getTime() }; H.onclose = function (U) { N(); S(); var T = new Date().getTime(); if ((T - G) > 10 * 1000) { if (F) { o(F) } } else { if (D) { A = true; t({ sc: false, cd: "N920" }) } else { C = true; o(R) } } G = T }; H.onerror = function () { N(); S(); var T = new Date().getTime(); if ((T - K) > 60 * 1000) { if (F) { o(F) } } else { if (D) { A = true; t({ sc: false, cd: "N920" }) } else { C = true; o(R) } } K = T }; H.onmessage = function (U) { D = true; H.onmessage = null; F = null; S(); var V = function () { N(); if (i == "ws") { t({ sc: false, cd: "N921" }) } else { C = true; o(R) } }; if (U.data instanceof Blob) { var T = new FileReader(); T.onloadend = function () { var W = T.result._bcp_toString(0, 6); if (W === "BCP000") { J(R) } else { V() } }; T.readAsArrayBuffer(U.data) } else { V() } } } } })(), v = (function () { var G = function (H, I) { if (q) { return } if (I.errorCode) { q = true; t({ sc: false, cd: I.errorCode }) } else { t({ sc: true, t: H, d: I }); y() } }; if (z.Ep) { if (u) { var F = c.Gm("jsonp"); if (F && F.parentNode) { jsonparent = F.parentNode; c.Gw(jsonparent, F) } } return function (N) { c.Gm("dialog-about-browser-label").innerText = "ブラウザ"; var I, L; if (u) { I = c.Gv("iframe"); I.style.display = "none"; c.Gt(c.Gm("jsonp_wrapper"), I); L = I.contentWindow.document } else { I = c.Gm("jsonp"); L = I.contentWindow.document; if (L.clear) { L.clear() } } var K = false; var M = function () { if (K) { return } K = true; if (L.x) { G(N.type, L.x[0]); L.x = null } else { A = true; t({ sc: false, cd: "N920" }) } if (u) { setTimeout(function () { try { c.Gw(I.parentNode, I) } catch (P) { } }, 0) } }; if (b.GS && b.CM <= 10) { I.onreadystatechange = function () { if (I.readyState == "complete") { I.onreadystatechange = null; M() } } } else { a.Et(I, "load", function () { a.Dp(I, "load", arguments.callee, false); M() }, false) } setTimeout(function () { if (K) { return } K = true; A = true; t({ sc: false, cd: "N920" }) }, 30 * 1000); var J = k + "?t=" + B + "&fn=" + N.fn + "&o=" + x + "&type=" + N.type + "&callback=cb&u=" + (new Date()).getTime(); if (N.decryptKey) { J += "&dk=" + N.decryptKey } var O = "<scr", H = "ipt>"; L.open(); L.write(O + "ipt>function cb(){document.x=arguments}</scr" + H + O + "ipt src='" + J + "'></scr" + H); L.close() } } else { return function (J) { var H = k + "?t=" + B + "&fn=" + J.fn + "&o=" + x + "&type=" + J.type; if (J.GG) { H += "&t=" + J.GG } if (J.decryptKey) { H += "&dk=" + J.decryptKey } var I = new XMLHttpRequest(); I.open("GET", H, true); I.onreadystatechange = function (L) { if (I.readyState == this.DONE) { if (I.status == 200) { var K = JSON.parse(I.responseText); G(J.type, K) } else { if (I.status !== 0) { q = true; alert("エラー: 閲覧に失敗しました。(コード:S" + I.status + ")") } } } }; I.send(null) } } })(), o = function (F) { if (i === "ws" && !C) { l(F) } else { if (i === "http") { v(F) } else { ((window.WebSocket && (window.WebSocket.CLOSED > 2 || window.WebSocket.prototype.CLOSED > 2) && !C) ? l : v)(F) } } }, y = function () { if (q) { return } var L = p.Fq(); if (L) { var J, F = p.Cs(), I, O = -1, T = -1, N = h(z.Hd), M = j(z.Hd); for (J = 0; J < L.Ef.length; ++J) { var S = L.Ef[J]; if (F >= S.Ed && F <= S.EG) { I = L.Ef.slice(J, L.Ef.length); O = J; T = J >= M ? J - M : 0; break } } if (T >= 0) { var H = []; for (var G = O - 1; G >= T; --G) { H.push(L.Ef[G]) } var R = I.length + H.length; if (R > N) { I.splice(I.length - (R - N), R - N) } if (I.length > 3 && H.length > 0) { I.splice(2, 0, H[0]); H.splice(0, 1) } if (I.length > 5 && H.length > 0) { I.splice(4, 0, H[0]); H.splice(0, 1) } I = I.concat(H) } var Q = true; if (I) { for (J = 0; J < I.length; ++J) { if (!I[J].EI) { o({ type: "content", fn: I[J].Hi, GG: L.t, decryptKey: L.dk }); Q = false; break } } } if (Q) { A = true } } else { var K = m.splice(0, 1)[0]; if (m.length > 0) { var P = t; t = function (U) { t = P; if (U.sc) { t(U) } else { q = false; y() } } } o({ type: "header", fn: K }) } }, r = function () { A = false; var F = p.getIndex(); if (F) { y() } else { (function () { var G = t; t = function (H) { t = G; if (H.sc) { t(H) } else { q = false; y() } } })(); v({ type: "index", fn: "index.csv" }) } }, n = function () { if (A) { if (!p.Fq()) { m = g.slice() } r() } }, E = function () { q = true; for (var F = 0; F < s.length; ++F) { s[F]() } }; return { He: r, GA: n, Gl: E } }; return { newInstance: f, Dd: h, AM: j } })(); d.Gg = d.Gg || (function () { var f = function (j, k, l) { d.DG.Cq(!j.BH(), j.Ga, k, function (n) { var o = n.d, p = false, m; if (n.sc && o && o.res_code && o.res_code === "NSOK") { p = true; m = o.cont_info } l(p, m) }) }, h = function (j, k) { f(j, "current", function (m, l) { if (m && l) { j.waTitle = l.wa_title; j.bookTitle = l.book_title_org } k(m) }) }, g = function (j, k) { f(j, "next", function (m, l) { if (m && l) { j.DK = l.thumbnail } k(m) }) }, i = function (j, k) { f(j, "previous", function (m, l) { if (m && l) { j.Cj = l.thumbnail } k(m) }) }; return { Db: h, Cv: g, By: i } })()
})(window.NV);
(function (a) {
    a.FlFrame = a.FlFrame || (function () { var b = a.Hu, g = [0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1], c = [0, 0.032952, 0.094796, 0.185457, 0.295244, 0.408511, 0.513315, 0.604795, 0.68254, 0.747853, 0.802403, 0.847752, 0.885229, 0.915934, 0.940765, 0.960459, 0.975625, 0.98677, 0.994316, 0.998625, 1], f = window.requestAnimationFrame || window[b.DU("requestAnimationFrame")] || function (h) { return setTimeout(h, 13) }, e = window.cancelAnimationFrame || window[b.DU("cancelAnimationFrame")] || function (h) { clearTimeout(h) }, d = function () { var j, i = function (o, m, r, n) { var l = new Date().getTime(); var k = m == "linear" ? g : c; var q = 1 / (k.length - 1); o *= 1000; var p = function () { var u = new Date().getTime(); if (l === 0) { l = u } var w = (u - l) / o; if (w > 1) { w = 1 } var x = w / q; var v = Math.floor(x); w = k[v]; if (v < k.length - 1) { var s = x - v; w += (k[v + 1] - k[v]) * s } r(w); if (w >= 1) { setTimeout(function () { n() }, 0); j = undefined } else { j = f(arguments.callee) } }; p() }, h = function () { if (j !== undefined) { e(j); j = undefined } }; return { Gh: i, cancel: h } }; return { requestAnimationFrame: function (h) { return f(h) }, cancelAnimationFrame: function (h) { e(h) }, Gv: d } })(); a.Fl = a.Fl || (function () { var o = document, u = a.Hu, d = a.Ht, z = a.GO, g = a.FlFrame, r = u.BR("keyframes"), l = u.BR("transform"), e = u.DU("transform"), k = u.DU("animation"), b = u.DU("animationFillMode"), x = u.DU("animationEnd"), f = u.DU("animationStart"), n = u.DU("transition"), s = u.DU("transitionEnd"), m = 0, c = o.styleSheets[0], q = function (A) { c.insertRule(A, c.cssRules.length) }, w = function (A) { var C = new RegExp("\\s" + A + "\\s", "g"); for (var B = c.cssRules.length - 1; B >= 0; --B) { if (c.cssRules[B].cssText.match(C)) { c.deleteRule(B); break } } }, t = function (B, G) { var I = "", E = "", H = "transition" + (++m), F, C; for (var D = 0; D < G.length; ++D) { var A = G[D]; I += A.Hi + ":" + A.from + ";"; E += A.Hi + ":" + A.to + ";"; B.style[A.Hi] = A.to } F = "@" + r + " " + H + " {\n   0.0% {" + I + "}\n  99.9% {" + E + "}\n 100.0% {" + E + "}\n}"; return { Gh: function (M, K, J) { var L = function (N) { C = null; z.Dp(B, x, arguments.callee, false); setTimeout(function () { B.style[k] = ""; w(H); M() }, 0) }; q(F); z.Et(B, x, L, false); if (!J) { J = "ease" } B.style[k] = H + " " + K + "s " + J + " 0s 1 normal"; B.style[b] = "both"; C = function () { z.Dp(B, x, L, false); B.style[k] = ""; w(H) } }, cancel: function () { if (C) { C(); C = null } }, GC: B } }, v = function (A, B) { var C = function (H, F, E) { setTimeout(function () { var L = 0; z.Et(A, s, function () { if (++L >= B.length) { z.Dp(A, s, arguments.callee, false); A.style[n] = null; H() } }, false); if (!E) { E = "ease" } var I = "", J; for (J = 0; J < B.length; ++J) { if (J > 0) { I += "," } I += B[J].Hi + " " + (F * 1000) + "ms " + E + " 0s" } A.style[n] = I; for (J = 0; J < B.length; ++J) { var K = B[J]; A.style[u.DV(K.Hi)] = K.to } }, 0); A.style[n] = null; for (var D = 0; D < B.length; ++D) { var G = B[D]; A.style[u.DV(G.Hi)] = G.from } }; return { Gh: C, GC: A } }, j = function (J) { var F = J.match(/[a-zA-Z]+\([^)]+\)/g), D = []; if (F) { for (var E = 0; E < F.length; ++E) { var A = F[E].match(/([a-zA-Z]+)\s*\(\s*([^,]+)\s*(,\s*([^,]+)\s*)?\)/); if (A.length == 5) { var C = A[1], I = A[2], H = A[4] !== undefined ? A[4] : I, B = I.match(/[a-zA-Z]+$/), G = B ? B[0] : ""; D.push({ type: C, value1: parseFloat(I), value2: parseFloat(H), unit: G }) } } } return D }, p = function (E) { var B = u.DV(E.Hi); var D = j(E.from); var C = j(E.to); var A = function (I) { var K = ""; for (var H = 0; H < D.length; ++H) { var M = D[H]; var L = C[H]; var G = M.value1 + (L.value1 - M.value1) * I; var F = M.value2 + (L.value2 - M.value2) * I; var J = M.unit; K += M.type + "(" + G + J + "," + F + J + ") " } return K }; return { Hi: B, FJ: A } }, h = function (G) { var C = u.DV(G.Hi); var F = parseFloat(G.from); var E = parseFloat(G.to); var D = ""; if (typeof G.from != "number") { var A = G.from.match(/[a-zA-Z]+$/); if (A) { D = A[0] } } var B = function (H) { return (F + (E - F) * H) + D }; return { Hi: C, FJ: B } }, y = function (B, D) { var F = [], A; for (var C = 0; C < D.length; ++C) { var G = D[C]; F.push(G.Hi == l ? p(G) : h(G)) } var E = function (J, I, H) { A = g.Gv(); A.Gh(I, H, function (L) { for (var K = 0; K < F.length; ++K) { B.style[F[K].Hi] = F[K].FJ(L) } }, function () { A = null; J() }) }; return { Gh: E, cancel: function () { if (A) { A.cancel(); A = null } }, GC: B } }, i = d.GY || (d.Fd && (/ L-06C /).test(navigator.userAgent)); return { useAnimationFrame: i, Gv: function (A, C, B) { if (B === undefined) { B = i } return (B ? y : t)(A, C) } } })()
})(window.NV);
(function (d) {
    var c = d.Gj, a = d.GO, e = d.Gn, b = d.CB; d.Gq = d.Gq || (function () { var i, h, m, j = false, f = function () { if (i.style.visibility != "visible") { i.style.visibility = "visible"; if (j) { m.parentNode.style.visibility = "visible" } } }, k = function () { if (i.style.visibility != "hidden") { i.style.visibility = "hidden"; if (j) { m.parentNode.style.visibility = "hidden" } } }, n = function () { if (h.style.visibility != "visible") { h.style.visibility = "visible"; f() } }, g = function () { if (h.style.visibility != "hidden") { h.style.visibility = "hidden"; k() } }, p = function () { return h.style.visibility == "visible" }, o = function () { i.style.height = (e.innerHeight() + (d.EV > 0 ? 100 : 0)) + "px" }, l = function (q) { j = q }; a.Et(window, "load", function () { i = c.Gm("guard"), h = c.Gm("loading"), m = c.Gm("indicator-area"), a.DS(i, b) }); return { BJ: l, Dg: o, Dz: n, Dm: g, BI: p, Ey: f, Ej: k } })()
})
    (window.NV);
(function (e) {
    var a = e.Gj, i = e.Ht, k = e.GO, l = e.Gn, f = e.Gc, b = e.Gq, h = e.Hu, d = e.Fl, j = e.Fm, c = e.CB; e.Gr = e.Gr || (function () { var an = l.BT("https://comic.k-manga.jp/"), aw = l.BT("https://comic.k-manga.jp/jikkuri"), S = l.BT("https://comic.k-manga.jp/register"), u = l.BT("https://comic.k-manga.jp/addpoint/eachtime/?continue_url=https://comic.k-manga.jp/title/{{bookid}}/{{mode}}"), Z = l.BT("https://comic.k-manga.jp/title/{{bookid}}/{{mode}}"), am = l.BT("https://comic.k-manga.jp/title/{{bookid}}/{{mode}}"), Q = l.BT("https://comic.k-manga.jp/guide/help/hajimete"), G, av, aP, bE, X, F, aT, ax, T, aH, bf, aB, ar, bs, M, bl, aY, q, aU, p, x, ad, ao, aW, bF, bz, W, ap, a3, by, a2, aI, s, N, a6, g, H, a8, z, aJ, U, y, bx, ag, ba, bt, aS, aG, v, ab, I, af, bw, aA, aM, a9, aV, aq, bd, V, bB, bp, aD, a7, aF, bv, a5, ah, al, be, at, D, br, P, aa, aE, K, aj, bc, ae, B, a1, bD, m, bo, bn, bq, J, w, r, bj, bi, au, bb, aZ, aK, aX, aN, a0, aO, bC, R, bk, aQ, ay, bh, ai, a4, bu, t, O, aL, aR, o, bm, ak, az = { Hc: 0, Go: 1, EN: 2, DA: 3, Fx: 4, CC: 5, Eb: 6, Gi: 7, DN: 9, GX: 10, Gy: 11, SELECT_COUPON: 12, TITLE: 13, SWITCH: 14, FW: 15, CW: 16, RECOMMEND_ITEMS: 17, MEMBER_FREE: 18, INDEX: 19 }, Y, bG = null, A = function (bH) { var bI = bH.offsetHeight; bG = setInterval(function () { if (bI != bH.offsetHeight) { bI = bH.offsetHeight; bH.style.marginTop = Math.round(-bH.offsetHeight / 2) + "px" } }, 100) }, L = function () { if (bG !== null) { clearTimeout(bG); bG = null } }, C = function (bH) { if (bH.length > 15) { bH = bH.substr(0, 14) + "…" } return bH }, E = function (bJ, bH, bI) { return bJ + (bH ? "<br><span>(" + bH + (bI == 1 ? "コマ" : "ページ") + ")</span>" : "") }, aC = function (bN, bP, ca) { var b3, b2, b5 = Y[bN]; for (b3 = 0; b3 < Y.length; ++b3) { Y[b3].style.display = Y[b3] == b5 ? "block" : "none" } var b4, bO, bS, b9 = false, bR = null; if (!bP) { bP = function () { } } if (bN == az.Hc) { bR = j.newInstance("html_viewer_toolbar_about"); b4 = [aP]; bO = bS = function () { ac() } } else { if (bN == az.Go) { b4 = [X, F]; bO = function () { if (this == X) { bP(0); l.Hm(an) } else { if (this == F) { bP(1); ac() } } } } else { if (bN == az.EN) { b4 = [ax, T, bf, aH]; bR = j.newInstance("html_viewer_dialog"); bO = function () { if (this == b4[0]) { bP(0) } else { if (this == b4[1]) { bP(1) } else { if (this == b4[2]) { ac(function () { bP(2) }) } else { if (this == b4[3]) { ac(function () { bP(3) }) } } } } var cf, ce = null; if (this.__nvopts) { cf = this.__nvopts.l; ce = this.__nvopts.u } else { cf = "キャンセル" } bR.EX("click", cf, function () { if (ce) { l.Hm(ce) } }) }; if (ca.campaign) { aB.style.display = "none"; ar.style.display = "block"; a.FQ(ar, "strong")[0].innerHTML = ca.campaign } else { aB.style.display = "block"; ar.style.display = "none" } } else { if (bN == az.MEMBER_FREE) { b4 = [bl, aY, q]; bR = j.newInstance("html_viewer_memberfree"); bO = function () { if (this == b4[0]) { bP(0) } else { if (this == b4[1]) { bP(1) } else { if (this == b4[2]) { ac(function () { bP(2) }) } } } var cf, ce = null; if (this.__nvopts) { cf = this.__nvopts.l; ce = this.__nvopts.u } else { cf = "キャンセル" } bR.EX("click", cf, function () { if (ce) { l.Hm(ce) } }) }; if (ca.campaign) { aU.style.display = "block"; a.FQ(aU, "strong")[0].innerHTML = ca.campaign } else { aU.style.display = "none" } M.innerHTML = E(ca.Fu) } else { if (bN == az.FW) { b4 = [ai, a4]; bO = function () { if (this == ai) { quitUrl = Z.replace("{{bookid}}", ca.GE).replace("{{mode}}", (ca.mode === "1" ? "fv" : "pv")); l.Hm(quitUrl) } else { if (this == a4) { ac() } } }; bh.innerHTML = ca.message } else { if (bN == az.CW) { b4 = [t, O, aL]; bO = function () { if (this == t) { ac(function () { bP() }) } else { if (this == aL || this == O) { ac() } } } } else { if (bN == az.DA) { bR = j.newInstance("html_viewer_toolbar_confirm_favorite_notmember"); b4 = [x, ao, ad]; bO = function () { if (this == b4[0]) { bR.EX("click", "入会ページ", function () { bP(0); l.Hm(S) }) } else { if (this == b4[1]) { bR.EX("click", "いいえ", function () { ac(function () { bP(1) }) }) } else { if (this == b4[2]) { bR.EX("click", "初めて方はこちら", function () { bP(2); l.Hm(Q) }) } } } } } else { if (bN == az.Fx) { bR = j.newInstance("html_viewer_nextstory"); b4 = [W, ap]; bO = function () { var ce = this == W ? 0 : this == ap ? 1 : -1; ac(function () { bP(ce) }); bR.EX("click", ce === 0 ? "続けて読む" : "キャンセル") }; bF.innerHTML = E(ca.Fu); bz.innerHTML = ca.DY } else { if (bN == az.CC) { bR = j.newInstance("html_viewer_addpoint"); b4 = [s, N]; bO = function () { var cf, ce = null; if (this == s) { bP(0); cf = "ポイント追加"; ce = u.replace("{{bookid}}", ca.GE).replace("{{mode}}", (ca.mode === "1" ? "fv" : "pv")) } else { if (this == N) { ac(function () { bP(1) }); cf = "キャンセル" } } bR.EX("click", cf, function () { if (ce) { l.Hm(ce) } }) }; by.innerHTML = E(ca.Fu, ca.contPages, ca.mode); a2.innerHTML = ca.Fs; aI.innerHTML = ca.Fr; a8.style.display = "none"; h.EC(H, "dialog-point-shortage-original-price"); if (ca.couponIndex !== undefined && ca.couponIndex >= 0) { var bQ = ca.coupons[ca.couponIndex]; if (bQ.type == 3) { a8.style.display = "inline"; h.FF(H, "dialog-point-shortage-original-price"); z.innerText = Math.floor(ca.Fs * (100 - bQ.rate) / 100) } else { if (bQ.type == 4) { a8.style.display = "inline"; h.FF(H, "dialog-point-shortage-original-price"); z.innerText = Math.max(ca.Fs - bQ.reduceValue, 0) } } } else { if (ca.Fs < ca.unitPoint) { a8.style.display = "inline"; h.FF(H, "dialog-point-shortage-original-price"); a2.innerHTML = ca.unitPoint; z.innerText = ca.Fs } } if (ca.campaign) { h.EC(a6, "font-R"); g.style.display = "block"; a.FQ(g, "strong")[0].innerHTML = ca.campaign } else { h.FF(a6, "font-R"); g.style.display = "none" } } else { if (bN == az.Eb) { bR = j.newInstance("html_viewer_purchasepoint"); b4 = [ba, bt, aS, v, af]; bO = function () { if (this == v || this == af) { ac(function () { aC(az.SELECT_COUPON, function (cg, cf) { if (cg === 0) { ca.couponIndex = cf } aC(az.Eb, bP, ca) }, { coupons: ca.coupons, defaultCouponIndex: ca.couponIndex }) }) } else { if (this == bt) { bP(2, ca.couponIndex); j.newInstance("html_viewer_addpoint").EX("click", "ポイント追加", function () { l.Hm(u.replace("{{bookid}}", ca.GE).replace("{{mode}}", (ca.mode === "1" ? "fv" : "pv"))) }) } else { var ce = this == ba ? 0 : this == aS ? 1 : -1; ac(function () { bP(ce, ca.couponIndex) }); bR.EX("click", ce === 0 ? "購入する" : "キャンセル") } } }; U.innerHTML = E(ca.Fu, ca.contPages, ca.mode); y.innerHTML = ca.Fs; bx.innerHTML = ca.Fr; aA.style.display = "none"; h.EC(bw, "dialog-use-point-original-price"); a9.style.display = "none"; var b6 = ca.Fs; if (ca.coupons && ca.coupons.length > 0) { if (ca.couponIndex >= 0) { var cd = ca.coupons[ca.couponIndex]; v.style.display = "none"; ab.style.display = "block"; if (cd.type == 3) { aA.style.display = "inline"; h.FF(bw, "dialog-use-point-original-price"); I.innerText = "クーポン使用中。" + cd.rate + "%OFF価格で購入できます"; b6 = Math.floor(ca.Fs * (100 - cd.rate) / 100); aM.innerText = b6 } else { if (cd.type == 4) { aA.style.display = "inline"; h.FF(bw, "dialog-use-point-original-price"); I.innerText = "クーポン使用中。" + cd.reduceValue + "ポイントOFF価格で購入できます"; b6 = Math.max(ca.Fs - cd.reduceValue, 0); aM.innerText = b6 } else { I.innerText = "クーポン使用中。購入後に" + Math.floor(ca.Fs * cd.rate / 100) + "ポイントバック。" } } } else { v.style.display = "block"; ab.style.display = "none" } } else { v.style.display = "none"; ab.style.display = "none"; if (ca.Fs < ca.unitPoint) { aA.style.display = "inline"; h.FF(bw, "dialog-use-point-original-price"); if (ca.endDateTime) { a9.style.display = "block"; aV.innerText = (ca.endDateTime.getMonth() + 1) + "月" + ca.endDateTime.getDate() + "日 " + ("00" + ca.endDateTime.getHours()).slice(-2) + ":" + ("00" + ca.endDateTime.getMinutes()).slice(-2) + " まで割引" } y.innerHTML = ca.unitPoint; aM.innerText = ca.Fs } } if (ca.campaign) { aG.style.display = "block"; a.FQ(aG, "strong")[0].innerHTML = ca.campaign } else { aG.style.display = "none" } ba.parentNode.style.display = "none"; bt.parentNode.style.display = "none"; if (b6 <= ca.Fr) { ba.parentNode.style.display = "block"; ag.innerHTML = "続きを購入しますか？<br>(ポイントが消費されます)" } else { bt.parentNode.style.display = "block"; ag.innerHTML = "続きを購入しますか？<br><strong>(ポイントが不足しています)</strong>"; if (ca.coupons && ca.coupons.length > 0) { if ((function (cg) { for (var cf = 0; cf < cg.length; ++cf) { var ce = ca.coupons[cf]; if (ce.type == 3 || ce.type == 4) { return false } } return true })(ca.coupons)) { v.style.display = "none"; ab.style.display = "none" } } } bR.Bs(ca.analyticsProduct) } else { if (bN == az.SELECT_COUPON) { b4 = [al, be]; var bI = 100, bH = 50, cc = a.Gm("dialog-select-coupon-template").childNodes[0], bZ = ca.defaultCouponIndex, cb = function (ce, cf) { k.Et(cf, f.Fp, function () { var cg = a.Dx(ah, "form-radio-icon"); for (b3 = 0; b3 < cg.length; ++b3) { h.EC(cg[b3], "active") } h.FF(cf, "active"); bZ = ce }) }; bO = function () { var ce = this == al ? 0 : 1; ac(function () { bP(ce, ce === 0 ? bZ : undefined) }) }; ah.style.maxHeight = bI + "px"; ah.style.minHeight = bI + "px"; while (ah.childNodes.length > 0) { a.Gw(ah, ah.childNodes[0]) } for (b3 = -1; b3 < ca.coupons.length; ++b3) { var b8 = a.Hg(cc), bX = b8.childNodes[0], bU = b8.childNodes[1]; bX.value = "" + b3; bX.id = "c" + b3; bU.htmlFor = bX.id; if (b3 == ca.defaultCouponIndex) { h.FF(b8, "active") } if (b3 >= 0) { var bV = ca.coupons[b3], bY = bV.use_max >= 0 ? "残り" + (bV.use_max - bV.use_count) + "回" : "無制限"; var bM = ""; if (bV.type == 3) { bM = bV.rate + "%割引" } else { if (bV.type == 4) { bM = bV.reduceValue + "ポイント値引" } else { bM = bV.rate + "%ポイントバック" } } bU.childNodes[0].innerText = bM + "/" + bY; bU.childNodes[1].innerText = bV.period_message } else { bU.childNodes[0].innerText = "使用しない" } a.Gt(ah, b8); f.FM(b8); cb(b3, b8) } ah.style.maxHeight = (l.innerHeight() - a5.offsetHeight + bI - bH) + "px"; ah.scrollTop = 0 } else { if (bN == az.TITLE) { b4 = [br, P]; D.innerText = ca.Hi; bO = function () { var ce = this == br ? 0 : this == P ? 1 : -1; ac(function () { bP(ce); if (ce === 0) { var cf = am.replace("{{bookid}}", ca.GE).replace("{{mode}}", (ca.mode === "1" ? "fv" : "pv")); l.Hm(cf) } }) } } else { if (bN == az.SWITCH) { b4 = [a7, aF, bv]; bO = function () { var ce = this == a7 ? 0 : this == bp ? 1 : this == aF ? 2 : 3; ac(function () { bP(ce) }) }; bd.innerText = ca.title; bp.style.display = "none"; a7.style.display = "none"; if (ca.nextType === 0 || ca.nextType === 1) { bp.style.display = "block"; bp.href = ca.nextUrl; bB.innerText = ca.nextType === 0 ? "購入済み" : "無料配信中" } else { if (ca.nextType == 2) { a7.style.display = "block" } } } else { if (bN == az.Gi) { if (ca.analyticsCategory || ca.analyticsProduct) { bR = j.newInstance(ca.analyticsCategory || "") } if (ca.analyticsProduct) { if (ca.analyticsCategory == "html_viewer_purchaseconfirm") { bR.AR(ca.analyticsProduct) } else { bR.AY(ca.analyticsProduct) } } b4 = [aj, K]; bO = function () { var ce = this == aj ? 0 : this == K ? 1 : -1; ac(function () { bP(ce) }); if (bR) { bR.EX("click", ce === 0 ? "はい" : "いいえ") } }; aE.innerHTML = ca.Dv } else { if (bN == az.DN) { b4 = [bi, bj].concat(au).concat(bb).concat(aZ); bO = function () { if (this == bi) { l.Hm(an); bP(3) } else { if (this == bj) { ac(function () { bP(0) }) } else { var cf = [au, bb]; var ci = [ca.artistRelatedInfo.books, ca.magazineRelatedInfo.books]; for (b3 = 0; b3 < cf.length; ++b3) { var ch = cf[b3]; for (b2 = 0; b2 < ch.length; ++b2) { if (this == ch[b2]) { var cg = ci[b3]; bP(b3 + 4, cg[b2]["link"], cg[b2]["xid"]); break } } } var ce = aZ; for (b3 = 0; b3 < ce.length; ++b3) { if (this == ce[b3]) { bP(2); l.Hm(this.href); break } } } } }; var bK = function (cl, ch, cr, ck, cf) { var cq = { 1: "青年漫画", 2: "少年漫画" }; var cj = { 3: "少女漫画", 34: "女性漫画", 104: "オトナ(大人)漫画" }; for (b3 = 0; b3 < ch.length; ++b3) { var cp = cr[b3], ce = ch[b3], cg = ce.author, co; cp.style.display = "block"; a.FQ(cp, "img")[0].src = ce.img; a.FQ(cp, "a")[0].innerText = C(ce.title); co = cg.indexOf(","); if (co != -1 && cg.length > co + 1) { co = cg.indexOf(",", co + 1); if (co != -1) { cg = cg.substr(0, co) + "他" } } a.Dx(cp, "book-author")[0].innerText = cg; var ci; var cn = cq[ce.category_id]; var cm = a.Dx(cp, "book-icon")[0]; if (cn) { ci = true } else { cn = cj[ce.category_id]; if (!cn) { cn = ce.category_name } ci = false } h.EC(cm, ci ? "book-icon__red" : "book-icon__blue"); h.FF(cm, ci ? "book-icon__blue" : "book-icon__red"); cm.innerText = cn } for (; b3 < 4; ++b3) { cr[b3].style.display = "none" } if (ch.length > 0) { ck.style.display = "block"; var cs = ""; for (b2 = 0; b2 < cl.length; ++b2) { cs += "「" + cl[b2] + "」" } cf.innerText = cs } else { ck.style.display = "none" } }; bK(ca.artistRelatedInfo.words, ca.artistRelatedInfo.books, au, bo, bn); bK(ca.magazineRelatedInfo.words, ca.magazineRelatedInfo.books, bb, bq, J); var b0 = (l.innerHeight() - w.offsetHeight - 50) + "px"; if (ca.artistRelatedInfo.books.length + ca.magazineRelatedInfo.books.length > 0) { r.style.display = "block"; aK.style.display = "none"; r.style.maxHeight = b0 } else { r.style.display = "none"; aK.style.display = "block"; aK.style.maxHeight = b0 } b9 = true } else { if (bN == az.GX) { b4 = [bC]; bO = function () { ac(function () { bP(0) }) }; a0.innerHTML = ca.EF; aO.innerHTML = ca.DW; aN.style.display = ca.hideIcon ? "none" : "inline" } else { if (bN == az.Gy) { b4 = [bk, aQ]; bO = function () { if (this == bk) { ac(function () { bP(0) }) } else { if (this == aQ) { bP(1); l.Hm() } } } } else { if (bN == az.RECOMMEND_ITEMS) { b4 = [B, a1]; bO = function () { if (this == B) { l.Hm(an); bP(1) } else { if (this == a1) { ac(function () { bP(2) }) } else { k.dispatch(this, "mousedown"); var ce = a.FQ(this, "a")[0]; bP(0, ce.href, ce.getAttribute("xid"), ce.getAttribute("sid")) } } }; ae.innerText = ca.title ? ("「" + C(ca.title) + "」") : "このタイトル"; var bT = function (cj, ci) { var cg = a.Gv("img"), cf = a.Gv("a"), ck = a.Gv("div"); h.FF(ck, "recommend-item"); var ch = cj.content; var ce = cj.sid; cf.href = ch.link; if (ce) { cf.setAttribute("sid", ce) } cf.setAttribute("xid", ch.xid); f.FM(cf); k.Et(cf, f.AG, function () { h.FF(cf, "hover") }, false); k.Et(cf, f.AB, function () { h.EC(cf, "hover") }, false); cg.src = ch.img; cg.setAttribute("alt", C(ch.title)); a.Gt(cf, cg); a.Gt(ck, cf); a.Gt(ci, ck); f.FM(ck); return ck }; bD.textContent = null; for (b3 = 0; b3 < ca.items.length; ++b3) { b4.push(bT(ca.items[b3], bD)) } bc.style.display = "block"; bc.style.marginTop = "-210px"; b9 = true } else { if (bN == az.INDEX) { bR = j.newInstance("html_viewer_index"); b4 = [o]; bO = function () { if (this == o) { ac() } else { k.dispatch(this, "mousedown"); var ce = this; bR.EX("click", ce.getAttribute("title"), function () { ac(function () { bP(0, parseInt(ce.getAttribute("sceneNo"))) }) }) } }; var bW = function (cg, ce) { var cf = a.Gv("span"), ch = a.Gv("div"); h.FF(ch, "index-item"); ch.setAttribute("sceneNo", cg[1]); ch.setAttribute("title", cg[0]); cf.innerText = cg[0]; a.Gt(ch, cf); a.Gt(ce, ch); f.FM(ch); k.Et(ch, f.AG, function () { h.FF(ch, "hover") }, false); k.Et(ch, f.AB, function () { h.EC(ch, "hover") }, false); return ch }; bm.textContent = null; for (b3 = 0; b3 < ca.indexItems.length; ++b3) { b4.push(bW(ca.indexItems[b3], bm)) } } } } } } } } } } } } } } } } } } } } var b7 = function () { for (var ce = 0; ce < b4.length; ++ce) { k.Dp(b4[ce], f.Fp, bJ, false) } if (bL) { k.Dp(G, f.EVENT_KEY_PRESSED, bL, false) } }, bL = bS ? function (ce) { if (ce.keyCode === 27) { b7(); bS() } } : null, bJ = function () { b7(); bO.call(this) }; for (b3 = 0; b3 < b4.length; ++b3) { k.Et(b4[b3], f.Fp, bJ, false) } if (bL) { k.Et(G, f.EVENT_KEY_PRESSED, bL, false) } L(); if (b9) { A(b5) } b5.style.marginTop = Math.round(-b5.offsetHeight / 2) + "px"; G.style.visibility = "visible"; var b1 = d.Gv(G, [{ Hi: "opacity", from: 0, to: 1 }]); b1.Gh(function () { }, 0.15); if (bR) { bR.DM() } }, n = function () { return G.style.visibility == "visible" }, ac = function (bI) { if (!n()) { return } b.Ey(); var bH = d.Gv(G, [{ Hi: "opacity", from: 1, to: 0 }]); bH.Gh(function () { for (var bJ = 0; bJ < Y.length; ++bJ) { Y[bJ].style.display = "none" } G.style.visibility = "hidden"; if (bI) { setTimeout(function () { bI() }, 0) } b.Ej() }, 0.1); L() }, bA = function () { if (n()) { for (var bH = 0; bH < Y.length; ++bH) { if (Y[bH].style.display == "block") { Y[bH].style.marginTop = Math.round(-Y[bH].offsetHeight / 2) + "px"; break } } } }, bg = function () { G.style.height = l.innerHeight() + "px"; bA() }; k.Et(window, "load", function () { var bK, bH = function () { h.FF(this, "hover") }, bM = function () { h.EC(this, "hover") }; G = a.Gm("dialog-area"); av = a.Gm("dialog-about"); aP = a.Gm("dialog-about-close-btn"); bE = a.Gm("dialog-normal"); X = a.Gm("dialog-normal-top-btn"); F = a.Gm("dialog-normal-cancel-btn"); aT = a.Gm("dialog-not-member"); ax = a.Gm("dialog-not-member-free-btn"); T = a.Gm("dialog-not-member-join-btn"); aH = a.Gm("dialog-not-member-help-btn"); bf = a.Gm("dialog-not-member-cancel-btn"); aB = a.Gm("dialog-not-member-join-msg"); ar = a.Gm("dialog-not-member-join-campaign"); bs = a.Gm("dialog-member-free"); M = a.Gm("dialog-member-free-title"); bl = a.Gm("dialog-member-free-free-btn"); aY = a.Gm("dialog-member-free-join-btn"); q = a.Gm("dialog-member-free-cancel-btn"); aU = a.Gm("dialog-member-free-join-campaign"); p = a.Gm("dialog-fav-not-member"); x = a.Gm("dialog-fav-not-member-join-btn"); ad = a.Gm("dialog-fav-not-member-help-btn"); ao = a.Gm("dialog-fav-not-member-cancel-btn"); aW = a.Gm("dialog-free-cont"); bF = a.Gm("dialog-free-cont-title"); bz = a.Gm("dialog-free-cont-subtitle"); W = a.Gm("dialog-free-cont-read-btn"); ap = a.Gm("dialog-free-cont-cancel-btn"); a3 = a.Gm("dialog-point-shortage"); by = a.Gm("dialog-point-shortage-title"); a2 = a.Gm("dialog-point-shortage-price"); aI = a.Gm("dialog-point-shortage-owned"); s = a.Gm("dialog-point-shortage-add-btn"); N = a.Gm("dialog-point-shortage-cancel-btn"); a6 = a.Gm("dialog-point-shortage-msg"); g = a.Gm("dialog-point-shortage-campaign"); H = a.Gm("dialog-point-shortage-original-price-area"); a8 = a.Gm("dialog-point-shortage-discount-price-area"); z = a.Gm("dialog-point-shortage-discount-price"); aJ = a.Gm("dialog-use-point"); U = a.Gm("dialog-use-point-title"); y = a.Gm("dialog-use-point-price"); bx = a.Gm("dialog-use-point-owned"); ag = a.Gm("dialog-use-point-msg"); ba = a.Gm("dialog-use-point-purchase-btn"); bt = a.Gm("dialog-use-point-shortage-add-btn"); aS = a.Gm("dialog-use-point-cancel-btn"); aG = a.Gm("dialog-use-point-campaign"); v = a.Gm("dialog-use-point-coupon-select-btn"); ab = a.Gm("dialog-use-point-coupon-confirm-area"); I = a.Gm("dialog-use-point-coupon-confirm-message"); af = a.Gm("dialog-use-point-coupon-change-btn"); bw = a.Gm("dialog-use-point-original-price-area"); aA = a.Gm("dialog-use-point-discount-price-area"); aM = a.Gm("dialog-use-point-discount-price"); a9 = a.Gm("dialog-use-point-discount-limit-area"); aV = a.Gm("dialog-use-point-discount-limit-message"); aq = a.Gm("dialog-switch"); bd = a.Gm("dialog-switch-title"); V = a.Gm("dialog-switch-continue"); bB = a.Gm("dialog-switch-continue-reason"); bp = a.Gm("dialog-switch-continue-btn"); aD = a.Gm("dialog-switch-purchase"); a7 = a.Gm("dialog-switch-purchase-btn"); aF = a.Gm("dialog-switch-next-btn"); bv = a.Gm("dialog-switch-close-btn"); a5 = a.Gm("dialog-select-coupon"); ah = a.Gm("dialog-select-coupon-form"); al = a.Gm("dialog-select-coupon-ok-btn"); be = a.Gm("dialog-select-coupon-cancel-btn"); at = a.Gm("dialog-title"); D = a.Gm("dialog-title-name"); br = a.Gm("dialog-title-detail-btn"); P = a.Gm("dialog-title-close-btn"); aa = a.Gm("dialog-confirm"); aE = a.Gm("dialog-confirm-message"); K = a.Gm("dialog-confirm-no"); aj = a.Gm("dialog-confirm-yes"); bc = a.Gm("dialog-recommend"); ae = a.Gm("recommend-title"); B = a.Gm("recommend-btn-top"); a1 = a.Gm("recommend-close-btn"); bD = a.Gm("recommend-items"); m = a.Gm("dialog-related-books"); bo = a.Gm("dialog-related-books-artist-names-area"), bn = a.Gm("dialog-related-books-artist-names"), bq = a.Gm("dialog-related-books-magazine-names-area"), J = a.Gm("dialog-related-books-magazine-names"), r = a.Gm("dialog-related-books-book-list"); aK = a.Gm("dialog-related-books-link-list"); aZ = Array.prototype.slice.call(a.FQ(aK, "a")), w = a.Gm("dialog-related-books-top-btn-area"); bi = a.Gm("dialog-related-books-top-btn"); bj = a.Gm("dialog-related-books-close-btn"); au = [a.Gm("dialog-related-books-artist-link-1"), a.Gm("dialog-related-books-artist-link-2"), a.Gm("dialog-related-books-artist-link-3"), a.Gm("dialog-related-books-artist-link-4")]; bb = [a.Gm("dialog-related-books-magazine-link-1"), a.Gm("dialog-related-books-magazine-link-2"), a.Gm("dialog-related-books-magazine-link-3"), a.Gm("dialog-related-books-magazine-link-4")]; aX = a.Gm("dialog-alert"); aN = a.Gm("dialog-alert-icon"); a0 = a.Gm("dialog-alert-title"); aO = a.Gm("dialog-alert-message"); bC = a.Gm("dialog-alert-ok"); R = a.Gm("dialog-alert2"); bk = a.Gm("dialog-alert2-retry"); aQ = a.Gm("dialog-alert2-quit"); ay = a.Gm("dialog-harmful"); bh = a.Gm("dialog-harmful-message"); ai = a.Gm("dialog-harmful-jump"); a4 = a.Gm("dialog-harmful-close-btn"); bu = a.Gm("dialog-confirm-harmful"); confirmHarmfulDialogMessage = a.Gm("dialog-confirm-harmful-message"); t = a.Gm("dialog-confirm-harmful-agree-btn"); O = a.Gm("dialog-confirm-harmful-disagree-btn"); aL = a.Gm("dialog-confirm-harmful-close-btn"); aR = a.Gm("dialog-index"); o = a.Gm("dialog-index-close-btn"); bm = a.Gm("index-items"); Y = [av, bE, aT, p, aW, a3, aJ, aa, bc, m, aX, R, a5, at, aq, ay, bu, bc, bs, aR]; k.DS(G, ["touchmove", "gesturestart", "gesturechange", "gestureend", "mousemove"]); f.FM(aP); f.FM(X); f.FM(F); f.FM(ax); f.FM(T); f.FM(aH); f.FM(bf); f.FM(bl); f.FM(aY); f.FM(q); f.FM(x); f.FM(ad); f.FM(ao); ax.__nvopts = { l: "無料コーナー", u: aw }; T.__nvopts = { l: "新規入会", u: S }; aH.__nvopts = { l: "初めての方はこちら", u: Q }; bl.__nvopts = { l: "無料コーナー", u: aw }; aY.__nvopts = { l: "新規入会", u: S }; f.FM(W); f.FM(ap); f.FM(s); f.FM(N); f.FM(ba); f.FM(bt); f.FM(aS); f.FM(v); f.FM(af); f.FM(ah); k.Et(ah, f.Ee, function (bN) { ah.scrollTop -= bN.deltaY }, false); f.FM(al); f.FM(be); f.FM(bv); f.FM(a7); f.FM(aF); f.FM(br); f.FM(P); if (i.Fd && i.Bd < 4) { var bI = K.parentNode.parentNode; var bL = K.parentNode; a.Gt(bI, bL) } f.FM(aj); f.FM(K); f.FM(B); f.FM(a1); f.FM(bD); k.Et(bD, f.Ee, function (bN) { bD.scrollTop -= bN.deltaY }, false); f.FM(bi); f.FM(bj); for (bK = 0; bK < au.length; ++bK) { f.FM(au[bK]) } for (bK = 0; bK < bb.length; ++bK) { f.FM(bb[bK]) } for (bK = 0; bK < aZ.length; ++bK) { f.FM(aZ[bK]) } f.FM(bC); f.FM(bk); f.FM(aQ); f.FM(ai); f.FM(a4); f.FM(t); f.FM(O); f.FM(aL); f.FM(o); f.FM(bm); k.Et(bm, f.Ee, function (bN) { bm.scrollTop -= bN.deltaY }, false); ak = Array.prototype.slice.call(a.Dx(G, "btn-B")); ak = ak.concat(Array.prototype.slice.call(a.Dx(G, "btn-O"))); ak = ak.concat(Array.prototype.slice.call(a.Dx(G, "btn-cancel"))); ak = ak.concat(Array.prototype.slice.call(a.Dx(G, "btn-no"))); ak = ak.concat(Array.prototype.slice.call(a.Dx(G, "btn-G"))); ak = ak.concat(Array.prototype.slice.call(a.Dx(G, "btn-link"))); ak.push(aP); ak.push(a1); for (bK = 0; bK < ak.length; ++bK) { var bJ = ak[bK]; k.Et(bJ, f.AG, bH, false); k.Et(bJ, f.AB, bM, false) } }); return { Hc: az.Hc, Go: az.Go, EN: az.EN, MEMBER_FREE: az.MEMBER_FREE, DA: az.DA, Fx: az.Fx, CC: az.CC, Eb: az.Eb, TITLE: az.TITLE, Gi: az.Gi, DN: az.DN, GX: az.GX, Gy: az.Gy, SWITCH: az.SWITCH, FW: az.FW, CW: az.CW, RECOMMEND_ITEMS: az.RECOMMEND_ITEMS, INDEX: az.INDEX, EE: aC, En: ac, Di: n, Dg: bg } })()
})(window.NV); (function (a) { a.Toast = a.Toast || (function () { var d = a.Fl, h = a.GO, b = a.Gj, c = a.Gq, f = a.Gr, k, e, g = function (l) { k.innerHTML = l; e.style.marginTop = -k.offsetHeight / 2 + "px"; if (f.Di()) { f.En(function () { c.Ey(); e.style.visibility = "visible"; d.Gv(e, [{ Hi: "opacity", from: 0, to: 1 }]).Gh(function () { }, 0.15) }) } else { e.style.visibility = "visible"; d.Gv(e, [{ Hi: "opacity", from: 0, to: 1 }]).Gh(function () { setTimeout(function () { d.Gv(e, [{ Hi: "opacity", from: 1, to: 0 }]).Gh(function () { e.style.visibility = "hidden" }, 0.15) }, 3000) }, 0.15) } }, j = function () { if (dialogArea.style.visibility == "visible") { for (var l = 0; l < dialogs.length; ++l) { if (dialogs[l].style.visibility == "visible") { dialogs[l].style.marginTop = -dialogs[l].offsetHeight / 2 + "px"; break } } } }, i = function () { dialogArea.style.height = Browser.innerHeight() + "px"; j() }; h.Et(window, "load", function () { e = b.Gm("toast-area"); k = b.Gm("toast") }); return { Fw: g, Dg: i } })() })(window.NV); (function (i) { var a = document, c = i.Gj, l = i.Ht, o = i.GO, p = i.Gn, j = i.Gc, k = i.Hu, n = i.GR, h = i.Fl, d = i.Gq, m = i.Gr, f = i.DG, b = i.Gg, e = i.CB; i.FV = i.FV || (function () { var g = function (a5) { var by = k.DU("transform"), aY = k.DU("transformOrigin"), ay = k.DU("animation"), U = k.DU("animationFillMode"), bl = k.DU("borderRadius"), aC = k.BR("keyframes"), a7 = k.BR("transform"), bh = a5, aA = i.FO.EB(bh.ctx), a9 = i.FO.FY(bh.ctx), aL = i.FO.Bm(bh.ctx), bB = i.FO.Er(bh.ctx), au = i.FO.toggleReadingDirectionSelected(bh.ctx), F = i.FO.tutorialMenuShowed(bh.ctx), bJ = c.Gm("readingDirectionLayer"), L = c.Gm("indicatorLayer"), bp = c.Gm("indicator-area"), aJ = c.Gm("ind-current-page"), a3 = c.Gm("ind-total-pages"), aw = c.Gm("current-page"), b4 = c.Gm("total-pages"), bi = c.Gm("tutorial-area-menu"), aE = c.Gm("tutorial-menu-guard-tb"), bo = c.Gm("tutorial-menu-swipe-btn"), aM = c.Gm("tutorial-menu-tap-btn"), aq = c.Gm("tutorial-menu-loupe-btn"), J = c.Gm("tutorial-menu-toolbar-btn"), a8 = c.Gm("tutorial-menu-swipe-image"), bZ = c.Gm("tutorial-menu-tap-image"), bW = c.Gm("tutorial-menu-loupe-image"), av = c.Gm("tutorial-menu-toolbar-image"), T = c.Gm("tutorial-btn-close"), ag = c.Gm("tutorial-area-swipe"), bF = c.Gm("tutorial-swipe-guard-tb"), aK = c.Gm("tutorial-swipe-back"), bA = c.Gm("tutorial-swipe-close"), aP = c.Gm("tutorial-swipe-pointer"), bP = c.Gm("tutorial-swipe-guide"), aF = c.Gm("tutorial-swipe-canvas"), W = c.Gm("tutorial-area-tap"), be = c.Gm("tutorial-tap-guard-tb"), s = c.Gm("tutorial-tap-back"), N = c.Gm("tutorial-tap-close"), a1 = c.Gm("tutorial-tap-left-pointer"), b0 = c.Gm("tutorial-tap-right-pointer"), at = c.Gm("tutorial-tap-canvas"), a0 = c.Gm("tutorial-area-toolbar"), aI = c.Gm("tutorial-toolbar-guard-tb"), bX = c.Gm("tutorial-toolbar-back"), b1 = c.Gm("tutorial-toolbar-close"), ar = c.Gm("tutorial-toolbar-pointer"), bq = c.Gm("tutorial-toolbar-finger"), ae = c.Gm("tutorial-toolbar-top"), bQ = c.Gm("tutorial-toolbar-bottom"), bS = c.Gm("tutorial-toolbar-canvas"), ad = c.Gm("tutorial-area-loupe"), bb = c.Gm("tutorial-loupe-guard-tb"), am = c.Gm("tutorial-loupe-back"), ai = c.Gm("tutorial-loupe-close"), bu = c.Gm("tutorial-loupe-normal-image"), bI = c.Gm("tutorial-loupe-magnified-image"), bH = c.Gm("tutorial-loupe-finger"), cf = c.Gm("tutorial-loupe-canvas"), aH = c.Gm("tutorial-area-hint"), b8 = c.Gm("tutorial-hint-btn"), bk = false, A = true, bv = 0, bG = 0, bj = false, ca = [], Y = null, aV = null, bm = false, ah = 0, cb = c.Gm("toolbarLayer"), bU = c.Gm("toolbarSubLayer"), Q = c.Gm("top-menu"), H = c.Gm("ic-back"), t = c.Gm("ic-help"), aj = c.Gm("ic-info"), X = c.Gm("title-page-btn"), aT = c.Gm("ic-title"), bC = function () { k.FF(this, "hover") }, aO = function () { k.EC(this, "hover") }, r = c.Gm("ic-nextContent"), br = c.Gm("ic-prevContent"), b2 = c.Gm("ic-nextContentThumbnail"), aX = c.Gm("ic-prevContentThumbnail"), bd = c.Gm("ic-favorite"), M = c.Gm("ikkini-logo"), I = c.Gm("ic-index"), aW = c.Gm("toggle-direction-btn-center"), O = c.Gm("toggle-direction-btn-top"), bL = c.Gv("img"), G = c.Gv("img"), K = c.Gm("current-reading-direction"), ac = c.Gm("toggle-direction-btn-center"), bY = c.Gv("img"), ap = c.Gv("img"), bn = c.Gv("img"), b9 = c.Gv("img"), bs = c.Gm("bottom-menu"), aU = c.Gm("slider-area"), aG = c.Gm("slider"), b3 = c.Gm("slider-act"), af = c.Gm("slider-btn"), bD = c.Gm("other-book"), bz = c.Gm("ic-nextPage"), S = c.Gm("ic-prevPage"), an = -af.offsetWidth / 2, al = -af.offsetHeight / 2 + aG.offsetHeight / 2, az, b7 = function (cg) { bh = cg; bt() }, bO = function (ci) { var cj = bh.ctx.GJ.Fq(), ch = (cj.Ez - 1) * 2, cg = Math.floor(ch * ci) + 1; return cj.Ez - Math.floor(cg / 2) }, bK = function (cm, cj) { var cl = an, ck = an + aG.offsetWidth, cg = cj ? cj : bh.ctx.GJ.Cs(); var ci = function (cp) { var cn = parseFloat(af.style.left) + cp.deltaX; if (cn > ck) { cn = ck } else { if (cn < cl) { cn = cl } } af.style.left = cn + "px"; var co = (cn - cl) / (ck - cl); cg = bO(co); ab(cg); b3.style.width = n.FI((1 - co) * 100) + "%" }; var ch = function (cn) { o.Dp(cm, j.Ee, ci, false); o.Dp(cm, j.AB, ch, false); aA(cg) }; o.Et(cm, j.Ee, ci, false); o.Et(cm, j.AB, ch, false) }, aQ = function (cg) { var ci = bh.ctx.GJ.Fq(); if (!ci) { return } var ch = (cg - 1) / (ci.Ez - 1); af.style.left = (an + (1 - ch) * aG.offsetWidth) + "px"; af.style.top = al + "px"; b3.style.width = n.FI(ch * 100) + "%" }, u = function () { if (v()) { aQ(bh.ctx.GJ.Cs()) } }, bE = function () { var cg = bh.ctx.GJ.Fq(); if (!cg) { return } cb.style.height = bU.style.height = L.style.height = bJ.style.height = bi.style.height = ag.style.height = W.style.height = a0.style.height = ad.style.height = p.innerHeight() + "px"; if (bi.style.visibility == "visible") { bc() } else { if (ag.style.visibility == "visible") { C(); B() } else { if (W.style.visibility == "visible") { C(); ax() } else { if (a0.style.visibility == "visible") { C(); aS() } else { if (ad.style.visibility == "visible") { C(); aa() } } } } } y(); aQ(bh.ctx.GJ.Cs()) }, bw = function () { bi.style.visibility = "visible"; bc(); aE.style.visibility = cb.style.visibility == "visible" ? "visible" : "hidden"; var cg = h.Gv(bi, [{ Hi: "opacity", from: 0, to: 1 }]); cg.Gh(function () { }, 0.25) }, bc = function () { var cq = 450, co = 620, ck = 10, cm = [{ button: bo, image: a8 }, { button: aM, image: bZ }, { button: J, image: av }, { button: aq, image: bW }]; for (var cn = 0; cn < cm.length; ++cn) { var cg = cm[cn], cp = cg.button, cj = cg.image, cl = (cp.offsetHeight - ck * 2) / (cp.offsetWidth - ck * 2), ci = cj.offsetHeight / cj.offsetWidth, ch; if (cl > ci) { ch = (cp.offsetWidth - ck * 2) / cq } else { ch = (cp.offsetHeight - ck * 2) / co } cj.style.height = (co * ch) + "px"; cj.style.width = (cq * ch) + "px"; cj.style.left = (cp.offsetWidth - cq * ch) / 2 + "px"; cj.style.top = (cp.offsetHeight - co * ch) / 2 + "px" } }, E = function () { var cg = h.Gv(bi, [{ Hi: "opacity", from: 1, to: 0 }]); cg.Gh(function () { bi.style.visibility = "hidden"; aE.style.visibility = "hidden" }, 0.25) }, bg = function () { aH.style.visibility = "visible"; b8.style.opacity = 0; ca.splice(0, ca.length); (function () { var cg = arguments.callee; var ch = h.Gv(b8, [{ Hi: "opacity", from: 0, to: 1 }]); ch.Gh(function () { ca.splice(0, ca.length); Y = setTimeout(function () { Y = null; ch = h.Gv(b8, [{ Hi: "opacity", from: 1, to: 0 }]); ch.Gh(function () { ca.splice(0, ca.length); cg() }, 1) }, 1000) }, 1); ca.push(ch) })() }, a6 = function () { var cg = i.Gs; if (aH.style.visibility != "visible" && !A && cg.AQ() && !cg.Bn() && cg.AH() < 3) { cg.AA(); A = true; bv = 2; bg() } }, cc = function () { aH.style.visibility = "hidden"; C() }, w = function (ci, ch) { E(); if (ch) { k.FF(ci, "tutorial-area-popup"); c.Dx(ci, "tutorial-btn-close")[0].style.display = "block"; c.Dx(ci, "tutorial-btn-back")[0].style.display = "none" } else { k.EC(ci, "tutorial-area-popup"); c.Dx(ci, "tutorial-btn-close")[0].style.display = "none"; c.Dx(ci, "tutorial-btn-back")[0].style.display = "block" } bG = (new Date()).getTime(); bj = ch; ci.style.visibility = "visible"; c.Dx(ci, "tutorial-guard-tb")[0].style.visibility = cb.style.visibility == "visible" ? "visible" : "hidden"; var cl = c.Dx(ci, "operation-text")[0]; var cg = c.Dx(ci, "tutorial-canvas")[0]; var cj = cl.getBoundingClientRect(); cg.style.height = (ci.offsetHeight - (cj.top + cj.height) - 20) + "px"; var ck = h.Gv(ci, [{ Hi: "opacity", from: 0, to: 1 }]); ck.Gh(function () { }, 0.25) }, B = function (cn) { var cg = i.Gs; cg.Bw(1); w(ag, cn); var cm = aF.offsetHeight, ch = aF.offsetWidth, ci, cj, co, ck, cp = 6 / 8, cl = 6 / 4, cq = cm / ch; if (cq > cp) { ci = ch * 0.8; cj = ci * cp } else { cj = cm * 0.8; ci = cj / cp } ck = cj; co = ck / cl; bP.style.width = ci + "px"; bP.style.height = cj + "px"; bP.style.left = (ch - ci) / 2 + "px"; bP.style.top = (cm - cj) / 2 + "px"; aP.style.width = co + "px"; aP.style.height = ck + "px"; aP.style.left = bP.style.left; aP.style.top = bP.style.top; ca.splice(0, ca.length); aP.style.left = (ch - ci) / 2 + "px"; aP.style.opacity = 1; bP.style.opacity = 1; Y = setTimeout(function () { Y = null; var cs, cr = arguments.callee; cs = h.Gv(aP, [{ Hi: "left", from: (ch - ci) / 2 + "px", to: ((ch + ci - co) / 2) + "px" }, { Hi: "opacity", from: 1, to: 0 }]); cs.Gh(function () { ca.splice(0, ca.length); Y = setTimeout(function () { Y = null; aP.style.left = bP.style.left; cs = h.Gv(aP, [{ Hi: "opacity", from: 0, to: 1 }]); cs.Gh(function () { ca.splice(0, ca.length); cr() }, 0.2); ca.push(cs); cs = h.Gv(bP, [{ Hi: "opacity", from: 0, to: 1 }]); cs.Gh(function () { }, 0.2); ca.push(cs) }, 1200) }, 1.5); ca.push(cs); cs = h.Gv(bP, [{ Hi: "opacity", from: 1, to: 0 }]); cs.Gh(function () { }, 1.5); ca.push(cs) }, 1000) }, ax = function (ck) { w(W, ck); var cl = 10, cj = at.offsetHeight, ch = at.offsetWidth, ci, cg, cm = 6 / 4; ci = ch * 2 / 5; cg = ci * cm; if (cg > cj - cl * 2) { cg = cj - cl * 2; ci = cg / cm } a1.style.width = ci + "px"; a1.style.height = cg + "px"; a1.style.left = (ch * 0.1) + "px"; a1.style.top = (cj - cg) / 2 + "px"; b0.style.width = ci + "px"; b0.style.height = cg + "px"; b0.style.right = (ch * 0.1) + "px"; b0.style.top = (cj - cg) / 2 + "px"; ca.splice(0, ca.length); (function () { a1.style.opacity = 1; b0.style.opacity = 0; var cn = arguments.callee; Y = setTimeout(function () { Y = null; var co; co = h.Gv(a1, [{ Hi: "opacity", from: 1, to: 0 }]); co.Gh(function () { ca.splice(0, ca.length); Y = setTimeout(function () { Y = null; co = h.Gv(a1, [{ Hi: "opacity", from: 0, to: 1 }]); co.Gh(function () { ca.splice(0, ca.length); cn() }, 0.5); ca.push(co); co = h.Gv(b0, [{ Hi: "opacity", from: 1, to: 0 }]); co.Gh(function () { }, 0.5); ca.push(co) }, 1500) }, 0.5); ca.push(co); co = h.Gv(b0, [{ Hi: "opacity", from: 0, to: 1 }]); co.Gh(function () { }, 0.5); ca.push(co) }, 1500) })() }, aS = function (cn) { var ch = i.Gs; ch.AQ(1); w(a0, cn); var cj = 10, ck = bS.offsetHeight, ci = bS.offsetWidth, cm, cl, cr, co, cq = 8 / 6, cg = 1 / 10, cp = ck / ci; cl = ck * 0.5; cm = cl / cq; if (cm > ci - cj * 2) { cm = ci - cj * 2; cl = cm * cq } cr = cl; co = cr * cg; ar.style.width = cm + "px"; ar.style.height = cl + "px"; ar.style.left = (ci - cm) / 2 + "px"; ar.style.top = (ck - cl) / 2 + "px"; bq.style.width = cm + "px"; bq.style.height = cl + "px"; bq.style.left = (ci - cm) / 2 + "px"; bq.style.top = (ck - cl) / 2 + "px"; ae.style.width = cr + "px"; ae.style.height = co + "px"; ae.style.left = (ci - cr) / 2 + "px"; ae.style.top = "10px"; bQ.style.width = cr + "px"; bQ.style.height = co + "px"; bQ.style.left = (ci - cr) / 2 + "px"; bQ.style.bottom = "10px"; ca.splice(0, ca.length); (function () { ar.style.opacity = 1; ae.style.opacity = 0; bQ.style.opacity = 0; var cs = arguments.callee; Y = setTimeout(function () { Y = null; var ct; ct = h.Gv(ar, [{ Hi: "opacity", from: 1, to: 0.2 }]); ct.Gh(function () { ca.splice(0, ca.length); Y = setTimeout(function () { Y = null; ct = h.Gv(ar, [{ Hi: "opacity", from: 0.2, to: 1 }]); ct.Gh(function () { ca.splice(0, ca.length); cs() }, 0.6); ca.push(ct); ct = h.Gv(ae, [{ Hi: "opacity", from: 1, to: 0 }]); ct.Gh(function () { }, 0.6); ca.push(ct); ct = h.Gv(bQ, [{ Hi: "opacity", from: 1, to: 0 }]); ct.Gh(function () { }, 0.6); ca.push(ct) }, 1200) }, 0.6); ca.push(ct); ct = h.Gv(ae, [{ Hi: "opacity", from: 0, to: 1 }]); ct.Gh(function () { }, 0.6); ca.push(ct); ct = h.Gv(bQ, [{ Hi: "opacity", from: 0, to: 1 }]); ct.Gh(function () { }, 0.6); ca.push(ct) }, 1200) })() }, aa = function (cl) { var ck = i.Gs; ck.Bn(1); w(ad, cl); var cj = cf.offsetHeight, ch = cf.offsetWidth, ci, cg, cn = 8 / 6, cm = cj / ch; if (cm > cn) { ci = ch * 0.8; cg = ci * cn } else { cg = cj * 0.8; ci = cg / cn } bu.style.width = ci + "px"; bu.style.height = cg + "px"; bu.style.left = (ch - ci) / 2 + "px"; bu.style.top = (cj - cg) / 2 + "px"; bI.style.width = ci + "px"; bI.style.height = cg + "px"; bI.style.left = (ch - ci) / 2 + "px"; bI.style.top = (cj - cg) / 2 + "px"; bH.style.width = ci + "px"; bH.style.height = cg + "px"; bH.style.left = (ch - ci) / 2 + "px"; bH.style.top = (cj - cg) / 2 + "px"; ca.splice(0, ca.length); (function () { bI.style.opacity = 0; var co = arguments.callee; Y = setTimeout(function () { Y = null; var cp; cp = h.Gv(bI, [{ Hi: "opacity", from: 0, to: 1 }]); cp.Gh(function () { ca.splice(0, ca.length); Y = setTimeout(function () { Y = null; cp = h.Gv(bI, [{ Hi: "opacity", from: 1, to: 0 }]); cp.Gh(function () { ca.splice(0, ca.length); co() }, 0.2); ca.push(cp) }, 1200) }, 0.2); ca.push(cp) }, 1500) })() }, C = function () { if (Y) { clearTimeout(Y); Y = null } for (var cg = 0; cg < ca.length; ++cg) { ca[cg].cancel() } ca.splice(0, ca.length) }, x = function (cg) { aN(cg); bw() }, aN = function (ch) { C(); var cg = h.Gv(ch, [{ Hi: "opacity", from: 1, to: 0 }]); cg.Gh(function () { ch.style.visibility = "hidden"; c.Dx(ch, "tutorial-guard-tb")[0].style.visibility = "hidden" }, 0.25) }, ao = function (cg) { if ((new Date()).getTime() - bG >= 3000) { if (bj) { aN(cg) } else { x(cg) } } }, a4 = function () { var cg = i.Gs; if (!l.GY && cg.Cx() === 0 && !cg.Bw()) { aV = setTimeout(function () { aV = null; B(true) }, 5000) } }, a2 = function (cg) { if (cg.target === cb && cb.style.visibility == "visible") { V() } }, Z = function (ch, cg) { aT.innerText = ch ? ch : "" }, D = function (ch, cg) { if (ch) { b2.src = ch; r.style.display = "block" } else { r.style.display = "none" } if (cg) { aX.src = cg; br.style.display = "block" } else { br.style.display = "none" } }, b6 = function () { if (cb.style.visibility == "visible") { return } if (aH.style.visibility == "visible") { bk = true; cc() } else { bk = false } if (aV) { bm = true; clearTimeout(aV); aV = null } else { bm = false } cb.style.visibility = "visible"; bU.style.visibility = "visible"; var ci = h.Gv(Q, [{ Hi: "top", from: -Q.offsetHeight + "px", to: "0px" }]), ch = h.Gv(X, [{ Hi: "top", from: -X.offsetHeight + "px", to: "65px" }]), cg = h.Gv(bs, [{ Hi: "bottom", from: -bs.offsetHeight + "px", to: "0px" }]), ck = h.Gv(O, [{ Hi: "top", from: -O.offsetHeight + "px", to: "70px" }]), cn, cj, cm = 6, cl = function () { if (--cm > 0) { return } o.Et(cb, j.AB, a2, false) }; ci.Gh(cl, 0.2); cg.Gh(cl, 0.2); ch.Gh(cl, 0.2); ck.Gh(cl, 0.2); if (M.style.display == "none") { --cm } else { cj = h.Gv(M, [{ Hi: "opacity", from: 0, to: 1 }]); cj.Gh(cl, 0.2) } if (bD.style.display == "none") { --cm } else { cn = h.Gv(bD, [{ Hi: "bottom", from: -bD.offsetHeight + "px", to: "70px" }]); cn.Gh(cl, 0.2) } if (!bh.Bz) { bp.style.backgroundColor = "rgba(0,0,0,0)" } aQ(bh.ctx.GJ.Cs()) }, V = function () { if (cb.style.visibility == "hidden") { return } if (bk) { bk = false; bg() } if (bm) { bm = false; a4() } o.Dp(cb, j.AB, a2, false); var ci = h.Gv(Q, [{ Hi: "top", from: "0px", to: -Q.offsetHeight + "px" }]), ch = h.Gv(X, [{ Hi: "top", from: "65px", to: -X.offsetHeight + "px" }]), cg = h.Gv(bs, [{ Hi: "bottom", from: "0px", to: -bs.offsetHeight + "px" }]), ck = h.Gv(O, [{ Hi: "top", to: -O.offsetHeight + "px", from: "70px" }]), cn, cj, cm = 6, cl = function () { if (--cm > 0) { return } cb.style.visibility = "hidden"; bU.style.visibility = "hidden"; X.style.top = "65px"; bs.style.bottom = "0px"; bD.style.bottom = "70px"; O.style.top = "70px" }; ci.Gh(cl, 0.2); ch.Gh(cl, 0.2); cg.Gh(cl, 0.2); ck.Gh(cl, 0.2); if (M.style.display == "none") { --cm } else { cj = h.Gv(M, [{ Hi: "opacity", from: 1, to: 0 }]); cj.Gh(cl, 0.2) } if (bD.style.display == "none") { --cm } else { cn = h.Gv(bD, [{ Hi: "bottom", from: "70px", to: -bD.offsetHeight + "px" }]); cn.Gh(cl, 0.2) } if (!bh.Bz) { bp.style.backgroundColor = "#333" } }, v = function () { return cb.style.visibility == "visible" }, bT = function () { return Q.offsetHeight + X.offsetHeight }, bx = function () { return bs.offsetHeight + (bh.ctx.Eo == "3" ? bD.offsetHeight : 0) }, R = [c.Gm("dialog-area"), c.Gm("guard")].concat(Array.prototype.slice.call(c.Dx(a, "tutorial-area"))), ba = function () { return R.some(function (cg) { return cg.style.visibility == "visible" }) }, bN = function () { d.Ey() }, aD = function () { d.Ej() }, ak = function () { d.Dz() }, z = function () { d.Dm() }, aZ = function () { a3.innerText = "" + bh.ctx.GJ.Fq().Ez; b4.innerText = "" + bh.ctx.GJ.Fq().Ez }, ab = function () { if (!bh.Bz && bp.style.visibility != "visible") { bp.style.visibility = "visible"; bp.style.top = (bs.offsetHeight - bp.offsetHeight) / 2 + "px" } var cg; if (arguments.length > 0) { cg = arguments[0] } else { cg = bh.ctx.GJ.Cs() } var ch = aJ.innerText; aJ.innerText = "" + cg; aw.innerText = "" + cg; if (ch != aJ.innerText) { if (aV) { clearTimeout(aV); aV = null } var ci = i.Gs; if (!l.GY && ++ah == 6 && !ci.AQ() && bh.ctx.isAUserForABTest()) { aS(true) } if (bv > 0) { if (--bv === 0) { cc() } } } }, bt = function () { var ci = bh.ctx.BH(), ch = ci ? "block" : "none", cj = [M, bD]; for (var cg = 0; cg < cj.length; ++cg) { cj[cg].style.display = ch } C(); if (aV) { clearTimeout(aV); aV = null } A = false; bv = 0; ah = 0; if (bh.Bz) { c.Gm("pager-area").style.display = "block"; L.style.display = "none" } else { c.Gm("pager-area").style.display = "none"; L.style.display = "block" } ce() }, ce = function () { if (l.GY) { O.style.display = "none" } else { var cg, ci, ch = i.Gs; if (ch.Cx() === 0) { cg = bL; ci = G } else { cg = G; ci = bL } if (ci.parentNode) { c.Gw(ci.parentNode, ci) } c.Gt(O, cg) } }, b5 = null, bV = function () { if (b5 !== null) { clearTimeout(b5); b5 = null } }, aR = function () { return b5 !== null }, cd = function () { bV(); var ch, ck, ci, cm, cl, cg = i.Gs; if (cg.Cx() === 0) { ch = ap; ck = bY; ci = bn; cm = b9; cl = "＞ タテ読みに切替え" } else { ch = bY; ck = ap; ci = b9; cm = bn; cl = "＞ ヨコ読みに切替え" } if (ck.parentNode) { c.Gw(ck.parentNode, ck) } c.Gt(K, ch); if (cm.parentNode) { c.Gw(cm.parentNode, cm) } ac.innerText = cl; bJ.style.visibility = "visible"; var cj = h.Gv(bJ, [{ Hi: "opacity", from: 0, to: 1 }]); cj.Gh(function () { }, 1); b5 = setTimeout(function () { aB() }, 3000) }, aB = function () { if (!aR()) { return } bV(); h.Gv(bJ, [{ Hi: "opacity", from: 1, to: 0 }]).Gh(function () { bJ.style.visibility = "hidden" }, 0.2); a4() }, P = function () { bk = false; au(false) }, y = function () { var cg = bh.ctx.GJ.getIndex(); if (cg && cg.length > 0) { I.style.display = "block"; k.FF(bp, "index"); k.FF(aU, "index"); k.FF(c.Gm("pager-area"), "index") } else { I.style.display = "none"; k.EC(bp, "index"); k.EC(aU, "index"); k.EC(c.Gm("pager-area"), "index") } }, bR = parseInt(getComputedStyle(bs).paddingLeft) + parseInt(getComputedStyle(aU).paddingLeft); bL.src = "images/ic-direction-vertical.6790984d.png"; G.src = "images/ic-direction-horizontal.ecf8b726.png"; bY.src = "images/img-direction-vertical.068fbb6f.png"; ap.src = "images/img-direction-horizontal.6d45f24f.png"; bn.src = "images/ic_vertical.a3fed95d.png"; b9.src = "images/ic_horizontal.7850e5d6.png"; o.Et(bi, j.EVENT_KEY_PRESSED, function (cg) { if (bi.style.visibility !== "visible") { return } if (cg.keyCode == 27) { E() } }); o.Et(T, j.Fp, function (cg) { E() }, false); o.Et(bo, j.Fp, function (cg) { B() }, false); o.Et(aM, j.Fp, function (cg) { ax() }, false); o.Et(aq, j.Fp, function (cg) { aa() }, false); o.Et(J, j.Fp, function (cg) { aS() }, false); o.Et(aK, j.Fp, function (cg) { x(ag) }, false); o.Et(s, j.Fp, function (cg) { x(W) }, false); o.Et(bX, j.Fp, function (cg) { x(a0) }, false); o.Et(am, j.Fp, function (cg) { x(ad) }, false); o.Et(bA, j.Fp, function (cg) { aN(ag) }, false); o.Et(N, j.Fp, function (cg) { aN(W) }, false); o.Et(b1, j.Fp, function (cg) { aN(a0) }, false); o.Et(ai, j.Fp, function (cg) { aN(ad) }, false); o.Et(aF, j.Fp, function (cg) { ao(ag) }, false); o.Et(at, j.Fp, function (cg) { ao(W) }, false); o.Et(bS, j.Fp, function (cg) { ao(a0) }, false); o.Et(cf, j.Fp, function (cg) { ao(ad) }, false); o.Et(b8, j.Fp, function (cg) { cc(); aa(true) }, false); o.Et(H, j.Fp, function (cg) { a9({ analyticsCategory: "html_viewer_toolbar_back", analyticsCategoryCallBack: function () { p.BW(function (ch) { return ch.indexOf("/title") == 0 && ch.indexOf("/title/purchase_complete") != 0 }) } }) }, false); o.Et(H, j.AG, bC, false); o.Et(H, j.AB, aO, false); if (l.GY) { t.style.display = "none"; bd.style.right = getComputedStyle(t).getPropertyValue("right") } else { o.Et(t, j.Fp, function (cg) { F(); bw() }, false); o.Et(t, j.AG, bC, false); o.Et(t, j.AB, aO, false) } var bf = getComputedStyle(bd), bM = parseInt(bf.right) + parseInt(bf.width); if (!isNaN(bM)) { aT.style.paddingRight = bM + "px" } o.Et(X, j.Fp, function (cg) { a9({ analyticsCategory: "html_viewer_toolbar_back_title", analyticsCategoryCallBack: function () { var ch = p.BT("https://comic.k-manga.jp/title/{{bookid}}/{{mode}}").replace("{{bookid}}", bh.ctx.GE).replace("{{mode}}", (bh.ctx.Hd == "1" ? "fv" : "pv")); p.Hm(ch) } }) }, false); o.Et(X, j.AG, bC, false); o.Et(X, j.AB, aO, false); o.Et(aj, j.Fp, function (cg) { m.EE(m.Hc) }, false); o.Et(aj, j.AG, bC, false); o.Et(aj, j.AB, aO, false); o.Et(I, j.Fp, function (cg) { m.EE(m.INDEX, function (ci, ch) { if (ci === 0) { aA(ch) } }, { indexItems: bh.ctx.GJ.getIndex() }) }, false); o.Et(I, j.AG, bC, false); o.Et(I, j.AB, aO, false); o.Et(T, j.AG, bC, false); o.Et(T, j.AB, aO, false); o.Et(bo, j.AG, bC, false); o.Et(bo, j.AB, aO, false); o.Et(aM, j.AG, bC, false); o.Et(aM, j.AB, aO, false); o.Et(aq, j.AG, bC, false); o.Et(aq, j.AB, aO, false); o.Et(J, j.AG, bC, false); o.Et(J, j.AB, aO, false); o.Et(aK, j.AG, bC, false); o.Et(aK, j.AB, aO, false); o.Et(s, j.AG, bC, false); o.Et(s, j.AB, aO, false); o.Et(bX, j.AG, bC, false); o.Et(bX, j.AB, aO, false); o.Et(am, j.AG, bC, false); o.Et(am, j.AB, aO, false); o.Et(bA, j.AG, bC, false); o.Et(bA, j.AB, aO, false); o.Et(N, j.AG, bC, false); o.Et(N, j.AB, aO, false); o.Et(b1, j.AG, bC, false); o.Et(b1, j.AB, aO, false); o.Et(ai, j.AG, bC, false); o.Et(ai, j.AB, aO, false); o.Et(b8, j.AG, bC, false); o.Et(b8, j.AB, aO, false); o.Et(bz, j.AG, bC, false); o.Et(bz, j.AB, aO, false); o.Et(bz, j.Fp, function (cg) { aA("next"); aQ(bh.ctx.GJ.Cs()) }, false); o.Et(S, j.AG, bC, false); o.Et(S, j.AB, aO, false); o.Et(S, j.Fp, function (cg) { aA("prev"); aQ(bh.ctx.GJ.Cs()) }, false); o.Et(r, j.Fp, function (cg) { aL("next") }, false); o.Et(r, j.AG, bC, false); o.Et(r, j.AB, aO, false); o.Et(br, j.Fp, function (cg) { aL("previous") }, false); o.Et(br, j.AG, bC, false); o.Et(br, j.AB, aO, false); o.Et(bd, j.Fp, function (cg) { bB() }, false); o.Et(bd, j.AG, bC, false); o.Et(bd, j.AB, aO, false); o.Et(O, j.Fp, function (cg) { P() }, false); o.Et(O, j.AG, bC, false); o.Et(O, j.AB, aO, false); o.Et(aW, j.Fp, function (cg) { P() }, false); o.Et(aW, j.AG, bC, false); o.Et(aW, j.AB, aO, false); o.DS(Q, e); o.DS(bs, e); j.FM(cb); j.FM(aU); j.FM(af); j.FM(H); j.FM(t); j.FM(aj); j.FM(X); j.FM(bz); j.FM(S); j.FM(r); j.FM(br); j.FM(bd); j.FM(I); j.FM(aW); j.FM(O); j.FM(bi); j.FM(T); j.FM(bo); j.FM(aM); j.FM(aq); j.FM(J); j.FM(aK); j.FM(s); j.FM(bX); j.FM(am); j.FM(bA); j.FM(N); j.FM(b1); j.FM(ai); j.FM(aF); j.FM(at); j.FM(bS); j.FM(cf); j.FM(b8); o.Et(aU, j.AG, function (ci) { if (aU != ci.target) { return } var ch = (ci.clientX - bR) / aG.offsetWidth; if (ch < 0 || ch > 1) { return } var cg = bO(ch); ab(cg); aQ(cg); bK(aU, cg) }, false); o.Et(aU, j.EO, function (ch) { var cg = (ch.clientX - bR) / aG.offsetWidth; aU.style.cursor = cg >= 0 && cg <= 1 ? 'url("images/cur_slider.c63a49ee.cur"), pointer' : "default" }, false); o.Et(af, j.AG, function (cg) { bK(af) }, false); bt(); return { DD: b7, GV: bt, Dz: ak, Dm: z, Ey: bN, Ej: aD, CI: bw, AC: a6, ED: b6, Em: V, CP: v, BG: bT, AU: bx, Bl: ba, CY: aZ, Cc: ab, Dg: bE, Bu: u, De: Z, setSwitchButtons: D, Bq: cd, Br: aB } }; var q; return { newInstance: function (r) { if (q) { q.DD(r) } else { q = g(r) } return q } } })() })(window.NV); (function (a) { a.Fz = a.Fz || (function () { var c = function (d) { return d === "3" || d === "4" }, b = function () { return { GE: null, Hl: null, DO: null, Ga: null, EK: null, FH: null, EQ: null, GJ: null, Ep: null, Hd: null, Eo: null, traceUuid: null, bookTitle: null, FG: null, Ca: false, CN: null, BD: null, Ex: null, Ei: 0, CK: false, AN: false, isAUserForABTest: function () { return /^[1-7]/.test(this.traceUuid) }, BH: function () { return c(this.Eo) } } }; return { newInstance: b, BH: c } })() })(window.NV); (function (a) { a.FO = a.FO || (function () { var d = 1, i = a.Ht, n = a.Gn, g = a.DG, o = a.EP, e = a.Gq, j = a.Gr, f = a.Gs, l = a.Fm, h = function (p) { return function (q) { if (q && q.analyticsCategory) { l.newInstance(q.analyticsCategory).EX("click", "", q.analyticsCategoryCallBack) } if (i.Fd) { p.DO.Ha() } } }, m = function (q) { var s, r = function (v) { if (q.isAUserForABTest() && q.Eo === "2") { s = v.numOfScenes; v.numOfScenes += 1; var u = v.contentInfos[v.contentInfos.length - 1]; var t = u.endSceneNo; if (s >= t) { s = t; u.endSceneNo += 1 } else { u.endSceneNo = s + 1 } } }, p = function (y) { var z = y.scenes[0]["sceneNo"]; var C = y.scenes[y.scenes.length - 1]["sceneNo"]; if (C > s) { y.scenes.splice(s - z + 1, C - s) } if (q.isAUserForABTest() && q.Eo === "2" && z <= s && s <= C) { var A = q.Hd === "1", B = A ? 320 : 800, x = A ? 320 : 1200, t = {}, u = {}, v = {}; t.effect = []; t.overlayImageIndexes = []; t.posX = t.posY = t.scrollTime = 0; u.effet = []; u.format = A ? "png" : "jpeg"; u.width = B; u.height = x; u.posX = u.posY = u.key = 0; u.imgSrc = A ? "images/sample_last_coma.5386b5a7.png" : "images/sample_last_page.564f6211.jpg"; v.sceneNo = s + 1; v.backColor = v.effectTime = v.effectType = v.repeatTimes = 0; v.sceneImageWidth = B; v.sceneImageHeight = x; v.sceneImagePartition = 1; v.steps = [t]; v.images = [u]; y.scenes.push(v) } }; return function (t) { if (t.sc) { if (!q.Ca) { q.Ca = true } if (t.t === "header") { r(t.d); q.GJ.Dj(t.d); q.FH.Dg(); q.FH.CY(); q.view.Dg() } else { if (t.t === "content") { p(t.d); var v = q.view; q.GJ.CU(t.d, function () { if (v.AF()) { v.GH() } }) } else { if (t.t === "index") { q.GJ.constructIndex(t.d) } } } } else { var w = function () { h(q)(); n.Hm() }; if (t.cd === "_ERROR_E010" || t.cd === "BCP010" || t.cd === "BCP211") { var y = function (z) { var A = "前のページに戻り、再読み込み後、もう一度お試しください。"; if (z) { if (z.length > 4) { z = z.substring(z.length - 4) } A += "(" + z + ")" } j.EE(j.GX, w, { EF: "閲覧期限が切れています", DW: A }) }; if (q.Ca && q.Ga) { g.BU(!q.BH(), q.Ga, "current", 0, null, null, false, function (z) { var A = z.d; if (z.sc && A && A.res_code && A.res_code === "NDOK" && A.view_info) { q.EQ.Gl(); q.EQ = o.newInstance({ Hd: q.Hd, GG: A.view_info.dlticket, GF: A.view_info.ofuid, GJ: q.GJ, Ep: q.Ep, FT: m(q) }); q.EQ.He() } else { y(z.cd) } }); return } else { y() } } else { if (t.cd === "N920") { var u = e.BI(); j.EE(j.Gy, function (z) { if (z === 0) { if (u) { e.Dz() } q.EQ.GA() } else { if (z === 1) { h(q)() } } }, { EF: "サーバとの通信に失敗しました", DW: "電波状況をご確認の上、もう一度お試し下さい。" }) } else { var x = t.cd; if (x.length > 4) { x = x.slice(-4) } j.EE(j.GX, w, { EF: "サーバとの通信に失敗しました", DW: "アプリの再起動をお願いいたします。問題が解決しない場合は、お手数ですがサポート窓口までお問い合わせ下さい。(コード:" + x + ")" }) } } e.Dm() } } }, b = function (p) { return function (q) { f.Cx(f.Cx() === 0 ? 1 : 0); l.AW(); var r = l.newInstance("toggle_reading_direction"); r.EX(f.Bb() + (q ? "OnLaunch" : "")); p.FH.Em(); p.FH.Ey(); setTimeout(function () { p.FH.Ej(); p.toggleReadingDirection() }, 200) } }, c = function (p) { return function (q) { if (typeof q === "number") { p.Ex(q) } else { if (q === "next") { p.CN() } else { if (q === "prev") { p.BD() } } } } }, k = function (p) { return function () { l.newInstance("html_viewer_toolbar_help").DM() } }; return { FY: h, Cn: m, toggleReadingDirectionSelected: b, EB: c, tutorialMenuShowed: k } })() })(window.NV); (function (a) { a.FO = a.FO || {}; var c = (function () { var s = a.Gj, e = a.Gn, i = a.DG, A = a.Gg, C = a.EP, d = a.Gq, j = a.Gr, t = a.Toast, h = a.Ht, n = a.Gs, o = a.Fm, p = a.Fz, B = false, f = a.FO.FY, r = function (E) { var H = parseInt(E.Hl, 10); if (H > 1) { return } var I = n.AV(); var F = new Date().getTime(); if (I >= 0 && F - I > 1000 * 60 * 60 * 24 * 30) { var G = Math.random() + ""; var D = G * 10000000000000; s.Gm("dcconv_wrapper").innerHTML = '<iframe src="https://5109331.fls.doubleclick.net/activityi;src=5109331;type=invmedia;cat=bhrsvxhf;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + D + '?" width="1" height="1" frameborder="0" style="display:none"></iframe>'; n.AV(F) } }, l = function (D, G, E, H) { if (G && G.res_code && G.res_code === "BP005") { j.EE(j.GX, function () { }, { EF: "お知らせ", DW: E + "は配信停止となりました。<br>大変申し訳ございません。", hideIcon: true }); return true } else { if (G && G.res_code && (G.res_code === "ND004" || G.res_code === "ND005")) { var F = "本コンテンツは年齢制限が設けられています。<br>"; F += G.res_code === "ND004" ? "まんが王国サイトから再度購入の操作をしていただき、生年月日のご登録をお願いします。" : "お客様は購入・閲覧できません。<br>ご了承下さい。"; j.EE(j.FW, function () { }, { mode: D.Hd, GE: D.GE, message: F }); return true } else { if (G && G.res_code && (G.res_code === "ND006")) { j.EE(j.CW, function () { H(1) }); return true } else { return false } } } }, g = function (E, H) { var F = H.checkid.split("+"), D, G = e.BT("https://comic.k-manga.jp/") + "?d=dl&m=dl004&book_id=" + F[0] + "&wa_id=" + F[1] + "&currentvalue=&b=" + (E.Hd === "1" ? "fv" : "pv") + "&nd_po=0"; if (E.Eo != "0" && E.GE == F[0] && E.Hl == F[1]) { D = E.GJ.Cs(); if (E.Eo == "2") { D -= 1 } } else { D = 1 } E.Eu({ GG: H.dlticket, GF: H.ofuid, GE: F[0], Hl: F[1], waTitle: H.waTitle, bookTitle: H.bookTitle, Ga: H.nextid, Hd: H.mode, Eo: H.content_type ? H.content_type : "0", initialSceneNo: D }); d.Dz() }, x = function (E, D, H, G, F) { d.Dz(); i.BU(true, E.Ga, "next", D, G, F, false, function (J) { d.Dm(); var L = function (N, O) { N.waTitle = H.waTitle; N.bookTitle = H.title; g(E, N); E.FH.Em() }; if (J.sc) { var K = J.d; if (K && K.res_code && K.res_code === "NDOK" && K.view_info) { if (D > 0) { if (fbq) { fbq("track", "Purchase", { content_type: "product", content_ids: [E.GE], value: D, currency: "JPY" }) } (function (N, O) { N.AY(H); N.EX("click", "はい", function () { L(O.view_info) }) })(o.newInstance("html_viewer_purchasecomplete"), K) } else { L(K.view_info, E.BH()) } } else { var I = arguments.callee; var M = l(E, K, H.waTitle, function (N) { d.Dz(); i.BU(true, E.Ga, "next", D, G, F, true, I) }); if (!M) { j.EE(j.GX, function () { }, { EF: "処理に失敗しました", DW: "お手数ですがサポート窓口までお問い合わせ下さい。(コード:N930)" }) } } } else { if (J.cd === "N900") { j.EE(j.GX, function () { e.Hm() }, { EF: "処理に失敗しました", DW: "前のページに戻り、再読み込み後、もう一度お試しください。" }) } else { j.EE(j.GX, function () { }, { EF: "処理に失敗しました", DW: "電波状況をご確認の上、もう一度お試し下さい。" }) } } }) }, u = function (D) { if (!D.CK) { var F = D.Ei > 0 ? "used" : "notUsed", E = D.GE + "_" + (D.Hd == "1" ? "fv" : "pv") + "_" + n.Bb(); o.newInstance("loupe_usage").EX(F, E); D.CK = true } if (!D.AN) { o.newInstance("last_reading_direction").EX(n.Bb()); D.AN = true } if (D.BH()) { return z(D) } else { return k(D) } }, z = function (D) { return function () { d.Dz(); if (!D.waTitle) { var E = arguments.callee; A.Db(D, function (F) { E() }); D.bookTitle = D.waTitle = " "; return } i.Cq(true, D.Ga, "next", function (K) { d.Dm(); D.FH.ED(); var J = K.d, O, N = -1, T, M = function () { if (N >= 0) { D.DO.Ha(); j.EE(j.SWITCH, function (U) { if (U === 0) { k(D)() } else { if (U === 2) { w(D, "next") } } }, { title: D.bookTitle, nextUrl: T, nextType: N }) } else { j.EE(j.GX, function () { }, { EF: "処理に失敗しました", DW: "繰り返し発生する場合、お手数ですがサポート窓口までお問い合わせ下さい。(コード:N970)" }) } }; if (K.sc && J && J.res_code && J.res_code === "NSOK") { var P = J.user_info, F = parseInt(P.status), G = J.cont_info, S = J.discount_info; if (F === 0 || F === 1) { r(D) } if (G) { var L = parseInt(G.point), H = parseInt(G.status), I = (parseInt(G.point) == 0) && G.is_sample, R = parseInt(G.unit_point), Q = S ? new Date(parseInt(S.end_date_timestamp) * 1000) : null; if ((H === 0 && I) || H === 1) { d.Dz(); i.BU(true, D.Ga, "next", "0", null, null, false, function (W) { d.Dm(); var Z = W.d; if (W.sc) { if (Z && Z.res_code && Z.res_code === "NDOK") { var Y = Z.view_info, X = Y.checkid.split("+"); T = "viewer.html?p0=" + Y.dlticket + "&p1=" + Y.ofuid + "&p2=" + Y.mode + "&p3=" + X[0] + "&p4=" + X[1] + "&p5=" + Y.nextid + "&p8=" + e.Dl("p8") + "&p10=" + (Y.content_type ? Y.content_type : "0") + "&p12=" + e.Dl("p12") + "&p13=" + e.Dl("p13") + "&p14=" + e.Dl("p14") + "&p15=" + e.Dl("p15") + "&p16=" + e.Dl("p16") + "&_from=ikkini"; if (H === 1) { N = 0 } else { N = 1 } } else { var V = arguments.callee; var U = l(D, Z, G.wa_title, function (aa) { d.Dz(); i.BU(true, D.Ga, "next", "0", null, null, true, V) }); if (U) { return } } } M() }); O = { waTitle: G.wa_title, title: G.book_title_org }; return } else { N = 2 } } else { if (F === 0 || F === 1) { N = 2 } } } M() }) } }, k = function (D) { var I = function () { j.EE(j.Go, function (K) { if (K === 0) { f(D)() } }) }, H = function (K) { j.EE(j.DN, function (M, N, L) { if (M === 0) { } else { if (M === 1 || M === 2 || M === 3) { f(D)() } else { e.Hm(N) } } }, K ? { artistRelatedInfo: K.artist_related_info, magazineRelatedInfo: K.magazine_related_info } : null) }, E = function () { d.Dz(); i.DZ(D.Ga, function (K) { var L = K.d; if (K.sc && L && L.res_code && L.res_code == "OK") { H(L) } d.Dm() }) }, G = function (K) { j.EE(j.RECOMMEND_ITEMS, function (N, O, M, L) { if (N === 0) { if (L) { i.recommendTrack(M, L, function (P) { e.Hm(O) }) } else { i.recommendTrack(M, function (P) { e.Hm(O) }) } } else { f(D)() } }, { title: D.bookTitle, items: K.items }) }, J = function () { d.Dz(); i.recommendItems(D.Ga, 0, function (K) { var L = K.d; if (K.sc && L && L.res_code && L.res_code == "RMIOK") { G(L) } d.Dm() }) }, F = function () { J() }; return function () { if (D.Ga) { d.Dz(); if (!D.waTitle) { var K = arguments.callee; A.Db(D, function (L) { K() }); D.bookTitle = D.waTitle = " "; return } i.Cq(true, D.Ga, "next", function (W) { d.Dm(); D.FH.ED(); var ah = W.d; if (W.sc && ah && ah.res_code && ah.res_code === "NSOK") { var R = ah.user_info, U = parseInt(R.status), ab = parseInt(R.has_point_count), S = ah.cont_info, af = ah.campaign_info, ae = ah.dl_checkid, aa = ah.discount_info, ag = ah.next_cont_info; if (U === 0 || U === 1) { r(D) } if (S) { var N = parseInt(S.point), M = parseInt(S.unit_point), T = aa ? new Date(parseInt(aa.end_date_timestamp) * 1000) : null, Y = parseInt(S.status), Q = (parseInt(S.point) == 0) && S.is_sample, ac = S.book_title, ai = S.book_title_org, ad = S.wa_title, V = S.wa_pages, Z = ac + " - " + ad, O = ad == D.waTitle, X = ("00" + (parseInt(D.Hl, 10) + (O ? 0 : 1))).slice(-3), L = { bookId: D.GE, waId: X, waTitle: ad, title: ai, type: D.Hd, point: N }; if ((Y === 0 && Q) || Y === 1 || Y === 2) { var P; if (Y === 1) { P = "続きを購入済みです" } else { if (Y === 2) { P = "続きを読み放題配信中です。" } else { P = "続きを無料配信中です" } } j.EE(j.Fx, function (ak) { if (ak === 0) { x(D, 0, L, null, null) } else { if (ak === 1) { if (U === 2) { F() } } } }, { Fu: Z, DY: P }) } else { if (U === 2) { var aj = ah.coupon_info; j.EE(j.Eb, function (al, am) { if (al === 0) { var ak = N; if (am >= 0) { if (aj[am].type == 3) { ak = Math.floor(N * (100 - aj[am].rate) / 100) } else { if (aj[am].type == 4) { ak = Math.max(N - aj[am].reduceValue, 0) } } } if (ab >= ak) { j.EE(j.Gi, function (an) { if (an === 0) { i.recommendTrack(D.Ga, function (ao) { }); x(D, N, L, am >= 0 ? aj[am].user_coupon : undefined, ae) } else { F() } }, { Dv: "必要なポイントが消費されますがよろしいですか？", analyticsProduct: L, analyticsCategory: "html_viewer_purchaseconfirm" }) } else { j.EE(j.CC, function (an) { if (an === 0) { f(D)() } else { if (an === 1) { F() } } }, { Fu: Z, Fs: N, contPages: V, GE: D.GE, mode: D.Hd, Fr: ab, campaign: (af && af.target === 1 ? af.message : null), coupons: aj, couponIndex: am, unitPoint: M, endDateTime: T }) } } else { if (al === 1) { F() } else { if (al === 2) { f(D)() } } } }, { Fu: Z, GE: D.GE, Fs: N, unitPoint: M, endDateTime: T, contPages: V, mode: D.Hd, Fr: ab, analyticsProduct: L, coupons: aj, couponIndex: -1, campaign: (af && af.target === 2 ? af.message : null) }) } } } else { if (U === 2) { F() } else { if (ag && ag.target_user == 1) { j.EE(j.MEMBER_FREE, function (ak) { if (ak === 0 || ak === 1) { f(D)() } }, { campaign: (af && af.target === 0 ? af.message : null), Fu: ag.book_title + "-" + ag.wa_title }) } else { j.EE(j.EN, function (ak) { if (ak === 0 || ak === 1) { f(D)() } }, { campaign: (af && af.target === 0 ? af.message : null) }) } } } } else { I() } }) } else { D.FH.ED(); I() } } }, w = function (D, E) { d.Dz(); i.Cq(false, D.Ga, E, function (G) { d.Dm(); var H = G.d; if (G.sc && H && H.res_code && H.res_code === "NSOK") { var F = H.cont_info; if (F) { d.Dz(); i.BU(false, D.Ga, E, 0, null, null, false, function (K) { d.Dm(); if (K.sc) { var J = K.d; if (J && J.res_code && J.res_code === "NDOK" && J.view_info) { J.view_info.waTitle = F.wa_title; J.view_info.bookTitle = F.book_title_org; g(D, J.view_info); D.FH.Em() } else { var I = arguments.callee; var L = l(D, J, F.wa_title, function (M) { d.Dz(); i.BU(false, D.Ga, E, 0, null, null, true, I) }); if (!L) { j.EE(j.GX, function () { }, { EF: "処理に失敗しました", DW: "お手数ですがサポート窓口までお問い合わせ下さい。(コード:N950)" }) } } } else { if (K.cd === "N900") { j.EE(j.GX, function () { e.Hm() }, { EF: "処理に失敗しました", DW: "前のページに戻り、再読み込み後、もう一度お試しください。" }) } else { j.EE(j.GX, function () { }, { EF: "処理に失敗しました", DW: "電波状況をご確認の上、もう一度お試し下さい。" }) } } }) } else { j.EE(j.GX, function () { }, { EF: "作品がありません", DW: (E === "next" ? "次" : "前") + "の作品はありませんでした。" }) } } else { j.EE(j.GX, function () { }, { EF: "処理に失敗しました", DW: "繰り返し発生する場合、お手数ですがサポート窓口までお問い合わせ下さい。(コード:N960)" }) } }) }, y = function (D) { return function (E) { w(D, E) } }, m = e.Dl("p16"), q = function (D) { return function () { j.EE(j.Gi, function (E) { if (E === 0) { d.Dz(); i.DF(D.Eo, D.Ga, true, function (F) { d.Dm(); if (F.sc && F.d && F.d.res_code && F.d.res_code == "NBOK") { t.Fw("登録しました。本棚のお気に入り一覧で確認できます。") } else { t.Fw("処理に失敗しました。") } }) } }, { Dv: "お気に入りに登録しますか？", analyticsCategory: "html_viewer_toolbar_confirm_favorite" }) } }, v = function (D) { return function () { j.EE(j.DA) } }; return { AZ: u, Bm: y, Er: m == "1" ? q : v } })(); for (var b in c) { a.FO[b] = c[b] } })(window.NV); (function (a) { a.GT = a.GT || (function () { var i = document, e = a.Gj, d = a.GO, c = a.Ht, b = a.Gu, g = a.FN, f = a.EP, h = function (V) { var k = null, D = null, M = null, U = 0, N = false, s = 0, t = 0, X = -1, x = V.DO, P = x.FZ(), n = 0, p = -1, R = false, v = function (ae) { k = { Fc: ae.frameWidth, EA: ae.frameHeight, Ez: ae.numOfScenes, t: ae.t, dk: ae.dk ? ae.dk : undefined, Ef: [] }; for (var ad = 0; ad < ae.contentInfos["length"]; ++ad) { var af = ae.contentInfos[ad]; k.Ef.push({ EI: false, Hi: af.name, Ed: af.startSceneNo, EG: af.endSceneNo, Hn: af.size }) } var ab = k.Ef[0].Ed, aa = k.Ef[k.Ef.length - 1].EG; if (k.Ez > aa - ab + 1) { k.Ez = aa - ab + 1 } U = ab - 1; if (U > 0) { for (var ac = 0; ac < k.Ef.length; ++ac) { k.Ef[ac].Ed -= U; k.Ef[ac].EG -= U } } M = new Array(k.Ez); if (P > k.Ez) { P = k.Ez; x.FZ(P) } }, O = function (av, ag) { if (!M) { return } var aq, ap, ar, au, ae, ab = 0, ao, ac, am, an, aj, al, af = function (az, aE, aB, aA) { var aC = aB.key, ax = aA ? 0 : aB.posX, aw = aA ? 0 : aB.posY, ay = aB.width, aD = aB.height; d.Et(aE, "load", function (aF) { if (!M) { return } d.Dp(aE, "load", arguments.callee, false); if (aC > 0) { g.AJ(az, aE, aC, ax, aw, ay, aD) } else { g.Cd(az, aE, ax, aw, ay, aD) } if (--ab === 0 && ag) { ag() } }, false); if (aC > 0) { aE.src = "data:image/" + aB.format + ";base64," + aB.imgBase64 } else { aE.src = aB.imgSrc } aE.className = "nv-fv" }; for (aq = 0; aq < av.scenes.length; ++aq) { ar = av.scenes[aq]; ab += ar.images["length"] } for (aq = 0; aq < av.scenes.length; ++aq) { ar = av.scenes[aq]; if (aq === 0) { au = ar.sceneNo - U } if (aq == av.length - 1) { ae = ar.sceneNo - U } var ai = ar.sceneNo - U - 1; M[ai] = { FZ: ar.sceneNo - U, Fo: ar.backColor, ET: ar.effectType, ES: ar.effectTime, Es: ar.repeatTimes, CV: ar.sceneImageWidth, CS: ar.sceneImageHeight, Hf: [], Gp: [] }; if (ar.zooms) { M[ai].zooms = ar.zooms } for (ap = 0; ap < ar.steps["length"]; ++ap) { var ad = ar.steps[ap]; M[ai].Hf.push({ FB: ap, Hh: ad.posX, Hj: ad.posY, EH: ad.scrollTime, GI: ad.effect, BM: ad.overlayImageIndexes }) } if (ar.sceneImagePartition > 1) { var at = M[ai].CV, aa = M[ai].CS; an = b.BS(at, aa); aj = an.DP; al = an.FC; for (ap = 0; ap < ar.sceneImagePartition; ++ap) { am = ar.images[ap]; ao = e.Gv("img"); af(aj, ao, am) } ac = { width: at, height: aa, Hh: 0, Hj: 0, GI: M[ai].Gp[0], DP: aj, EW: al }; M[ai].Gp.push(ac); jstart = ar.sceneImagePartition } else { jstart = 0 } for (ap = jstart; ap < ar.images["length"]; ++ap) { am = ar.images[ap]; an = b.BS(am.width, am.height); aj = an.DP; al = an.FC; ao = e.Gv("img"); af(aj, ao, am, true); ac = { width: am.width, height: am.height, Hh: am.posX, Hj: am.posY, GI: am.effect, DP: aj, EW: al }; M[ai].Gp.push(ac) } if (P == M[ai].FZ && N) { n = M[ai].Hf.length - 1; var ah = M[ai].Hf[n]; p = ah.BM.length === 0 ? -1 : ah.BM.length - 1; N = false } } for (aq = 0; aq < k.Ef.length; ++aq) { var ak = k.Ef[aq]; if (au >= ak.Ed && au <= ak.EG) { ak.EI = true; break } } }, J = function (ab) { if (ab.length < 2) { return } D = []; for (var aa = 1; aa < ab.length; ++aa) { if (ab[aa].length == 2 && ab[aa][0] && ab[aa][1]) { D.push(ab[aa]) } } }, I = function () { for (var ad = 0; ad < k.Ef.length; ++ad) { var ac = k.Ef[ad]; if (ac.EI) { for (var ab = ac.Ed; ab <= ac.EG; ++ab) { for (var aa = 0; aa < M[ab - 1].Gp.length; ++aa) { var ae = M[ab - 1].Gp[aa]; b.Cf(ae.EW) } } } } k = null; M = null; N = false; s = 0; t = 0; X = -1; P = x.FZ(), n = 0; p = -1 }, Z = function (aa) { R = aa }, B = function () { var ai = f.Dd(V.Hd), ah = f.AM(V.Hd), ag = -1, af = -1, aa = -1, aj, ae; for (ae = 0; ae < k.Ef.length; ++ae) { aj = k.Ef[ae]; if (P >= aj.Ed && P <= aj.EG) { ag = ae >= ah ? ae - ah : 0 } if (s >= aj.Ed && s <= aj.EG) { af = ae } if (ag >= 0 && af >= 0) { break } } if (R) { for (ae = 0; ae < k.Ef.length; ++ae) { aj = k.Ef[ae]; if (s + 1 >= aj.Ed && s + 1 <= aj.EG) { aa = ae; break } } } for (ae = 0; ae < k.Ef.length; ++ae) { aj = k.Ef[ae]; if (aj.EI && ae != af && ae != aa && (ae < ag || ae >= ag + ai)) { for (var ad = aj.Ed; ad <= aj.EG; ++ad) { for (var ac = 0; ac < M[ad - 1].Gp.length; ++ac) { var ab = M[ad - 1].Gp[ac]; b.Cf(ab.EW) } delete M[ad - 1] } aj.EI = false } } }, T = function () { var aa = o(); return (p + 1) < aa.BM.length }, E = function () { var aa = H(); return (n + 1) < aa.Hf.length }, Q = function () { return M && P < k.Ez }, q = function () { return Q() ? w(parseInt(P) + 1) : null }, Y = function () { s = P; t = n; X = p }, A = function (aa) { Y(); P = aa; n = 0; p = -1; x.FZ(P); B() }, W = function (ab) { var aa = ""; if (T()) { Y(); ++p; aa = "overlay" } else { if (E()) { Y(); ++n; p = -1; aa = "step" } else { if (Q()) { Y(); ++P; n = 0; p = -1; x.FZ(P); aa = "scene" } else { aa = "none" } } } if (ab) { ab(aa) } B() }, u = function () { var aa = o(); return p >= 0 }, j = function () { var aa = H(); return n > 0 }, C = function () { return P > 1 }, L = function () { return C() ? w(P - 1) : null }, S = function (ad) { var aa = "", ab; if (u()) { Y(); --p; aa = "overlay" } else { if (j()) { Y(); --n; ab = o(); p = ab.BM.length === 0 ? -1 : ab.BM.length - 1; aa = "step" } else { if (C()) { Y(); --P; var ac = H(); if (ac) { n = ac.Hf.length - 1; ab = o(); p = ab.BM.length === 0 ? -1 : ab.BM.length - 1 } else { N = true } x.FZ(P); aa = "scene" } else { aa = "none" } } } if (ad) { ad(aa) } B() }, F = function () { return k }, z = function () { return D }, w = function (aa) { return M ? M[aa - 1] : undefined }, H = function () { return w(P) }, o = function () { var aa = w(P); return aa.Hf[n] }, G = function () { return P }, m = function () { return p }, r = function () { return w(s) }, l = function () { var aa = w(s); return aa.Hf[t] }, K = function () { return s }, y = function () { return X }; x.FZ(P); return { Dj: v, CU: O, constructIndex: J, GV: I, CN: W, BD: S, Ex: A, Fq: F, getIndex: z, FD: w, DT: q, CE: L, DQ: Q, CG: C, Cs: G, Dc: H, DC: o, AX: m, AL: K, AS: r, Bk: l, AD: y, CQ: Z } }; return { newInstance: h } })() })(window.NV); (function (a) { a.FR = a.FR || (function () { var b = function (r) { var q = a.Gj, d = a.Ht, o = a.Gu, s = a.Hu, v = a.Fl, k = a.GT, e = s.DU("transform"), j = s.DU("transformOrigin"), m = s.BR("transform"); var t = (function () { var y = function (G, E, L, K) { var F = G.Gp[0]; var D = q.Gv("div"); D.className = "nv-fvTransitionCanvas"; D.style[j] = "0 0"; o.Bh(D, F.EW, E.Hh - K.x, E.Hj - K.y, true); D.style.width = K.width + "px"; D.style.height = K.height + "px"; D.style.left = K.x + "px"; D.style.top = K.y + "px"; var B = G.Fo >> 16 & 255; var H = G.Fo >> 8 & 255; var J = G.Fo & 255; D.style.backgroundColor = "rgb(" + B + "," + H + "," + J + ")"; if (L >= 0) { var I = G.Gp[1 + E.BM[L]]; var C = q.Gv("div"); C.className = "nv-fvTransitionCanvas"; C.style[j] = "0 0"; o.Bh(C, I.EW, 0, 0, true); C.style.width = I.width + "px"; C.style.height = I.height + "px"; C.style.left = (E.Hh + I.Hh - K.x) + "px"; C.style.top = (E.Hj + I.Hj - K.y) + "px"; q.Gt(D, C) } return D }, A = function (C) { var B = q.Gv("div"); B.className = "nv-fvTransitionCanvas"; B.style[j] = "0 0"; B.style.width = C.width + "px"; B.style.height = C.height + "px"; B.style.left = C.x + "px"; B.style.top = C.y + "px"; B.style.backgroundColor = "black"; return B }, x = function (D) { var E, C, B; if (arguments.length <= 1 || arguments[1]) { E = r.GJ.Dc(); C = r.GJ.DC(); B = r.GJ.AX(); return y(E, C, B, D) } else { E = r.GJ.AS(); if (E) { C = r.GJ.Bk(); B = r.GJ.AD(); return y(E, C, B, D) } else { return A(D) } } }, z = function () { var C = r.GJ.Fq(); var B = q.Gv("div"); B.className = "nv-fvTransitionCanvas"; B.style.width = C.Fc + "px"; B.style.height = C.EA + "px"; B.style[j] = "0 0"; B.style[e] = "scale(" + r.FA + "," + r.FA + ")"; return B }; return { DX: x, BL: z } })(); var f = function () { var J = r.GJ.Fq(); var N = r.GJ.Dc(); var z = N.ET; var G = J.Fc; var E = J.EA; var Q = true; var M = true; var P = []; switch (z) { case 256: P.push({ GM: G, GL: 0, Hq: 0 }); Q = false; break; case 257: P.push({ GM: G, GL: 0, Hq: 0 }); break; case 259: P.push({ GM: 0, GL: 0, Hq: G }); M = false; break; case 262: P.push({ GM: G, GL: E, Hq: 0, Hr: 0 }); break; case 264: P.push({ GM: 0, GL: 0, Hq: G, Hr: E }); M = false; break; case 266: P.push({ GM: G, GL: -E, Hq: 0, Hr: 0 }); break; case 268: P.push({ GM: 0, GL: 0, Hq: G, Hr: -E }); M = false; break; case 512: P.push({ GM: -G, GL: 0, Hq: 0 }); Q = false; break; case 513: P.push({ GM: -G, GL: 0, Hq: 0 }); break; case 515: P.push({ GM: 0, GL: 0, Hq: -G }); M = false; break; case 518: P.push({ GM: -G, GL: E, Hq: 0, Hr: 0 }); break; case 520: P.push({ GM: 0, GL: 0, Hq: -G, Hr: E }); M = false; break; case 522: P.push({ GM: -G, GL: -E, Hq: 0, Hr: 0 }); break; case 524: P.push({ GM: 0, GL: 0, Hq: -G, Hr: -E }); M = false; break; case 768: P.push({ GM: 0, GL: E, Hr: 0 }); Q = false; break; case 769: P.push({ GM: 0, GL: E, Hr: 0 }); break; case 771: P.push({ GM: 0, GL: 0, Hr: E }); M = false; break; case 1024: P.push({ GM: 0, GL: -E, Hr: 0 }); Q = false; break; case 1025: P.push({ GM: 0, GL: -E, Hr: 0 }); break; case 1027: P.push({ GM: 0, GL: 0, Hr: -E }); M = false; break; case 1792: P.push({ GM: -G / 2, GL: 0, Hq: 0, r: { x: 0, y: 0, width: G / 2, height: E } }); P.push({ GM: G / 2, GL: 0, Hq: 0, r: { x: G / 2, y: 0, width: G / 2, height: E } }); break; case 1793: P.push({ GM: 0, GL: 0, Hq: -G / 2, r: { x: 0, y: 0, width: G / 2, height: E } }); P.push({ GM: 0, GL: 0, Hq: G / 2, r: { x: G / 2, y: 0, width: G / 2, height: E } }); M = false; break; case 1794: P.push({ GM: 0, GL: -E / 2, Hr: 0, r: { x: 0, y: 0, width: G, height: E / 2 } }); P.push({ GM: 0, GL: E / 2, Hr: 0, r: { x: 0, y: E / 2, width: G, height: E / 2 } }); break; case 1795: P.push({ GM: 0, GL: 0, Hr: -E / 2, r: { x: 0, y: 0, width: G, height: E / 2 } }); P.push({ GM: 0, GL: 0, Hr: E / 2, r: { x: 0, y: E / 2, width: G, height: E / 2 } }); M = false; break }var A = "scale(" + r.FA + "," + r.FA + ")"; var C = Q ? t.DX({ x: 0, y: 0, width: J.Fc, height: J.EA }, !M) : null; var O = t.BL(); var L = []; for (var K = 0; K < P.length; ++K) { var F = P[K]; var I = "translate(" + F.GM + "px," + F.GL + "px)"; var x = "translate(" + (F.Hq !== undefined ? F.Hq : F.GM) + "px," + (F.Hr !== undefined ? F.Hr : F.GL) + "px)"; var D = F.r !== undefined ? F.r : { x: 0, y: 0, width: J.Fc, height: J.EA }; var y = t.DX(D, M); var H = v.Gv(y, [{ Hi: m, from: I, to: x }]); q.Gt(O, y); L.push(H) } var B = function (V) { if (C) { C.style[e] = A; q.Gt(r.FG, C) } var U = 0, T = function () { if (++U >= L.length) { V(); q.Gw(r.FG, O); if (C) { q.Gw(r.FG, C) } } }; for (var R = 0; R < L.length; ++R) { var S = L[R]; S.Gh(T, N.ES / 1000) } q.Gt(r.FG, O) }; return { He: B } }; var u = function () { var L = r.GJ.Fq(), O = r.GJ.Dc(), z = O.ET, I = L.Fc, G = L.EA, Q = true, P = [], A = "scale(" + r.FA + "," + r.FA + ")", y = t.BL(), N = [], D = function (V) { var U = 0, T = function () { if (++U >= N.length / 2) { V(); q.Gw(r.FG, y) } }; for (var R = N.length / 2; R < N.length; ++R) { var S = N[R]; S.Gh(T, O.ES / 2000, "linear"); S.GC.style.visibility = "visible" } }, C = function (V) { var U = 0, T = function () { if (++U >= N.length / 2) { D(V) } }; for (var R = 0; R < N.length / 2; ++R) { var S = N[R]; S.Gh(T, O.ES / 2000, "linear") } q.Gt(r.FG, y) }, B = function (S) { for (var R = 0; R < N.length; ++R) { N[R].GC.style.visibility = R < N.length / 2 ? "visible" : "hidden" } C(S) }; switch (z) { case 2560: P.push({ GM: 0, GL: 0, Hq: I / 2, EL: true }); P.push({ GM: 0, GL: 0, Hq: -I / 2, EL: false }); P.push({ GM: -I / 2, GL: 0, Hq: 0, EL: false }); P.push({ GM: I / 2, GL: 0, Hq: 0, EL: true }); break; case 2561: P.push({ GM: 0, GL: 0, Hq: -I / 2, EL: true }); P.push({ GM: 0, GL: 0, Hq: I / 2, EL: false }); P.push({ GM: I / 2, GL: 0, Hq: 0, EL: false }); P.push({ GM: -I / 2, GL: 0, Hq: 0, EL: true }); break; case 2562: P.push({ GM: 0, GL: 0, Hr: G / 2, EL: true }); P.push({ GM: 0, GL: 0, Hr: -G / 2, EL: false }); P.push({ GM: 0, GL: -G / 2, Hr: 0, EL: false }); P.push({ GM: 0, GL: G / 2, Hr: 0, EL: true }); break; case 2563: P.push({ GM: 0, GL: 0, Hr: -G / 2, EL: true }); P.push({ GM: 0, GL: 0, Hr: G / 2, EL: false }); P.push({ GM: 0, GL: G / 2, Hr: 0, EL: false }); P.push({ GM: 0, GL: -G / 2, Hr: 0, EL: true }); break }for (var M = 0; M < P.length; ++M) { var H = P[M]; var K = "translate(" + H.GM + "px," + H.GL + "px)"; var x = "translate(" + (H.Hq !== undefined ? H.Hq : H.GM) + "px," + (H.Hr !== undefined ? H.Hr : H.GL) + "px)"; var E = { x: 0, y: 0, width: L.Fc, height: L.EA }; var F = t.DX(E, H.EL); F.style.zIndex = M; var J = v.Gv(F, [{ Hi: m, from: K, to: x }]); q.Gt(y, F); N.push(J) } return { He: B } }; var g = function () { var at, ar, aq, A, I, T, aw, S, J, ad, D, L, V, C = r.GJ.Fq(), aa = r.GJ.Dc(), ax = aa.ET, x = C.Fc, z = C.EA, U = true, P = false, y = []; switch (ax) { case 258: y.push({ FP: x, Fk: x, FX: 0, EJ: z, GB: 0 }); break; case 269: y.push({ FP: x, Fk: x, FX: 0, EJ: 0, GB: 0, FL: z }); U = false; break; case 270: y.push({ FP: x, Fk: x, FX: z, EJ: z, GB: 0, GP: 0 }); U = false; break; case 514: y.push({ FP: 0, Fk: 0, FX: 0, EJ: z, Ge: x }); break; case 525: y.push({ FP: 0, Fk: 0, FX: 0, EJ: 0, Ge: x, FL: z }); U = false; break; case 526: y.push({ FP: 0, Fk: 0, FX: z, EJ: z, Ge: x, GP: 0 }); U = false; break; case 770: y.push({ FP: 0, Fk: x, FX: z, EJ: z, GP: 0 }); break; case 1026: y.push({ FP: 0, Fk: x, FX: 0, EJ: 0, FL: z }); break; case 1280: y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, GB: 0, GP: 0 }); y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, Ge: x, GP: 0 }); y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, GB: 0, FL: z }); y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, Ge: x, FL: z }); U = false; break; case 1281: y.push({ FP: 0, Fk: 0, FX: 0, EJ: z, Ge: x / 2 }); y.push({ FP: x, Fk: x, FX: 0, EJ: z, GB: x / 2 }); break; case 1282: y.push({ FP: 0, Fk: x, FX: 0, EJ: 0, FL: z / 2 }); y.push({ FP: 0, Fk: x, FX: z, EJ: z, GP: z / 2 }); break; case 1283: y.push({ FP: 0, Fk: x / 2, FX: 0, EJ: z, Ge: 0, Ea: true }); y.push({ FP: x / 2, Fk: x, FX: 0, EJ: z, GB: x, Ea: true }); P = true; break; case 1284: y.push({ FP: 0, Fk: x, FX: 0, EJ: z / 2, FL: 0, Ea: true }); y.push({ FP: 0, Fk: x, FX: z / 2, EJ: z, GP: x, Ea: true }); P = true; break; case 1285: y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, GB: 0, GP: 0 }); y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, Ge: x, GP: 0 }); y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, GB: 0, FL: z }); y.push({ FP: x / 2, Fk: x / 2, FX: z / 2, EJ: z / 2, Ge: x, FL: z }); break; case 1286: y.push({ FP: 0, Fk: x / 2, FX: 0, EJ: z / 2, GB: x / 2, GP: z / 2, Ea: true }); y.push({ FP: x / 2, Fk: x, FX: 0, EJ: z / 2, Ge: x / 2, GP: z / 2, Ea: true }); y.push({ FP: 0, Fk: x / 2, FX: z / 2, EJ: z, GB: x / 2, FL: z / 2, Ea: true }); y.push({ FP: x / 2, Fk: x, FX: z / 2, EJ: z, Ge: x / 2, FL: z / 2, Ea: true }); P = true; break; case 1287: y.push({ FP: 0, Fk: x / 2, FX: 0, EJ: z / 2, Ge: 0, FL: 0, Ea: true }); y.push({ FP: x / 2, Fk: x, FX: 0, EJ: z / 2, GB: x, FL: 0, Ea: true }); y.push({ FP: 0, Fk: x / 2, FX: z / 2, EJ: z, Ge: 0, GP: z, Ea: true }); y.push({ FP: x / 2, Fk: x, FX: z / 2, EJ: z, GB: x, GP: z, Ea: true }); P = true; break; case 1288: y.push({ FP: 0, Fk: 0, FX: 0, EJ: 0, Ge: x / 2, FL: z / 2 }); y.push({ FP: x, Fk: x, FX: 0, EJ: 0, GB: x / 2, FL: z / 2 }); y.push({ FP: 0, Fk: 0, FX: z, EJ: z, Ge: x / 2, GP: z / 2 }); y.push({ FP: x, Fk: x, FX: z, EJ: z, GB: x / 2, GP: z / 2 }); break; case 261: case 265: case 517: case 521: I = 30; aq = Math.floor((z - 1) / I + 1); T = x + (aq - 1) * I; L = ax == 265 || ax == 521; ad = ax == 517 || ax == 521; for (at = 0; at < aq; ++at) { A = L ? at : (aq - 1 - at); var ae = ad ? -(A * I) : x + (A * I), ab = ad ? -(A * I) : x + (A * I); y.push({ FP: ae, Fk: ab, FX: at * I, EJ: (at + 1) * I, GB: (ad ? ae : (ae - T)), Ge: (ad ? (ab + T) : ab) }) } break; case 263: case 267: case 519: case 523: I = 30; aq = Math.floor((x - 1) / I + 1); T = z + (aq - 1) * I; D = ax == 267 || ax == 523; L = ax == 519 || ax == 523; for (at = 0; at < aq; ++at) { A = L ? at : (aq - 1 - at); var Y = D ? -(A * I) : z + (A * I), ah = D ? -(A * I) : z + (A * I); y.push({ FP: at * I, Fk: (at + 1) * I, FX: Y, EJ: ah, GP: (D ? Y : (Y - T)), FL: (D ? (ah + T) : ah) }) } break; case 2304: case 2305: aq = 8; V = ax == 2305; for (at = 0; at < aq; ++at) { var ac = (at % 2 === 0 && !V) || (at % 2 === 1 && V); y.push({ FP: (ac ? 0 : x), Fk: (ac ? 0 : x), FX: at * (z / aq), EJ: (at + 1) * (z / aq), GB: 0, Ge: x }) } break; case 2306: case 2307: aq = 8; V = ax == 2307; for (at = 0; at < aq; ++at) { var N = (at % 2 === 0 && !V) || (at % 2 === 1 && V); y.push({ FP: at * (x / aq), Fk: (at + 1) * (x / aq), FX: (N ? 0 : z), EJ: (N ? 0 : z), GP: 0, FL: z }) } break; case 2816: aq = 20; aw = z / aq; for (at = 0; at < aq; ++at) { y.push({ FP: 0, Fk: x, FX: at * aw, EJ: at * aw, FL: (at + 1) * aw }) } break; case 2817: aq = 20; aw = x / aq; for (at = 0; at < aq; ++at) { y.push({ FP: at * aw, Fk: at * aw, FX: 0, EJ: z, Ge: (at + 1) * aw }) } break; case 3584: aq = 10; S = x / aq; J = S; for (at = 0; at < aq; ++at) { for (ar = -1; ar * J < z; ++ar) { if ((at % 2 === 0 && ar % 2 !== 0) || (at % 2 !== 0 && ar % 2 === 0)) { continue } var E = at * S; var an = E + S; var G = ar * J; y.push({ FP: at * S, Fk: (at + 1) * S, FX: ar * J, EJ: ar * J, FL: ar * J + 2 * J }) } } break; case 3840: y.push({ FP: 0, Fk: 0, FX: 0, EJ: 0, Ge: x, FL: z }); break; case 3841: y.push({ FP: 0, Fk: x, FX: 0, EJ: z, Ge: 0, FL: 0, Ea: true }); P = true; break; case 3842: y.push({ FP: x, Fk: x, FX: 0, EJ: 0, GB: 0, FL: z }); break; case 3843: y.push({ FP: 0, Fk: x, FX: 0, EJ: z, GB: x, FL: 0, Ea: true }); P = true; break; case 3844: y.push({ FP: 0, Fk: 0, FX: z, EJ: z, Ge: x, GP: 0 }); break; case 3845: y.push({ FP: 0, Fk: x, FX: 0, EJ: z, Ge: 0, GP: z, Ea: true }); P = true; break; case 3846: y.push({ FP: x, Fk: x, FX: z, EJ: z, GB: 0, GP: 0 }); break; case 3847: y.push({ FP: 0, Fk: x, FX: 0, EJ: z, GB: x, GP: z, Ea: true }); P = true; break }var al = "scale(" + r.FA + "," + r.FA + ") translate(0px,0px)"; var af = U ? t.DX({ x: 0, y: 0, width: x, height: z }, P) : null; var av = t.BL(); var B = []; for (at = 0; at < y.length; ++at) { var ao = y[at]; var ak = ao.FP, Z = ao.Fk, Q = ao.FX, K = ao.EJ; var W = ao.GB !== undefined ? ao.GB : ak; var F = ao.Ge !== undefined ? ao.Ge : Z; var aj = ao.GP !== undefined ? ao.GP : Q; var ap = ao.FL !== undefined ? ao.FL : K; var ai = Z - ak; var R = F - W; var O = K - Q; var au = ap - aj; var am = { x: Math.min(ak, W), y: Math.min(Q, aj), width: Math.max(ai, R), height: Math.max(O, au) }; var H = t.DX(am, !P); var M = q.Gv("div"); M.className = "nv-fvTransitionClip"; M.style.width = R; M.style.height = au; s.Dw(H, "left"); s.Dw(H, "top"); if (ak == W) { H.style.left = "0px"; M.style.left = W + "px" } else { H.style.right = "0px"; M.style.right = (C.Fc - F) + "px" } if (Q == aj) { H.style.top = "0px"; M.style.top = aj + "px" } else { H.style.bottom = "0px"; M.style.bottom = (C.EA - ap) + "px" } q.Gt(M, H); var ag = v.Gv(M, [{ Hi: "width", from: (ai + "px"), to: (R + "px") }, { Hi: "height", from: (O + "px"), to: (au + "px") }]); q.Gt(av, M); B.push(ag) } var X = function (aC) { if (af) { af.style[e] = al; q.Gt(r.FG, af) } var aB = 0, aA = function () { if (++aB >= B.length) { aC(); q.Gw(r.FG, av); if (af) { q.Gw(r.FG, af) } } }; for (var ay = 0; ay < B.length; ++ay) { var az = B[ay]; az.Gh(aA, aa.ES / 1000) } q.Gt(r.FG, av) }; return { He: X } }; var n = function () { var N = r.GJ.Fq(); var L = { x: 0, y: 0, width: N.Fc, height: N.EA }; var P = t.DX(L, true); var z = t.DX(L, false); var A = q.Gv("div"); A.className = "nv-fvTransitionCanvas"; A.style[j] = "0 0"; q.Gt(A, z); q.Gt(A, P); var R = r.GJ.Dc(); var B = R.ET; var E = 0, D = 0, G = 0, F = 0; var H, O; var K = 0, J = 0, y = 0, x = 0; switch (B) { case 260: E = N.Fc; H = N.Fc * 2; O = N.EA; K = -N.Fc; break; case 516: G = N.Fc; H = N.Fc * 2; O = N.EA; y = -N.Fc; break; case 772: D = N.EA; H = N.Fc; O = N.EA * 2; J = -N.EA; break; case 1028: F = N.EA; H = N.Fc; O = N.EA * 2; x = -N.EA; break }A.style.width = H + "px"; A.style.height = O + "px"; z.style.left = E + "px"; z.style.top = D + "px"; P.style.left = G + "px"; P.style.top = F + "px"; var M = "scale(" + r.FA + "," + r.FA + ") translate(" + K + "px," + J + "px)"; var I = "scale(" + r.FA + "," + r.FA + ") translate(" + y + "px," + x + "px)"; var Q = v.Gv(A, [{ Hi: m, from: M, to: I }]); var C = function (S) { Q.Gh(function () { S(); q.Gw(r.FG, A) }, R.ES / 1000); q.Gt(r.FG, A) }; return { He: C } }; var p = function () { var F = r.GJ.Fq(); var G = r.GJ.Dc(); var J = G.ET; var A = F.Fc, M = F.EA; var x = { x: 0, y: 0, width: A, height: M }; var y = t.BL(); var N = J <= 3331; var C = J & 2; var D = C ? A : 0, E = C ? 0 : M, L = A, H = M; var I = J & 1; var K = function (R) { var U = "scale(" + R.fromScaleX + "," + R.fromScaleY + ")"; var O = "scale(" + R.toScaleX + "," + R.toScaleY + ")"; var Q = { x: 0, y: 0, width: F.Fc, height: F.EA }; var P = t.DX(Q, R.current); var T = R.vertical ? 0 : (R.reverse ? "100%" : "0"); var S = R.vertical ? (R.reverse ? "100%" : "0") : 0; P.style[j] = T + " " + S; q.Gt(y, P); return v.Gv(P, [{ Hi: m, from: U, to: O }]) }; var B = []; if (N) { B.push(K({ fromScaleX: 1, fromScaleY: 1, toScaleX: D / A, toScaleY: E / M, current: false, vertical: C, reverse: !I })) } else { q.Gt(y, t.DX(x, false)) } B.push(K({ fromScaleX: D / A, fromScaleY: E / M, toScaleX: 1, toScaleY: 1, current: true, vertical: C, reverse: I })); var z = function (S) { var R = 0, Q = function () { if (++R >= B.length) { S(); q.Gw(r.FG, y) } }; for (var O = 0; O < B.length; ++O) { var P = B[O]; P.Gh(Q, G.ES / 1000) } q.Gt(r.FG, y) }; return { He: z } }; var h = function () { var ae, ad, E = r.GJ.Fq(), O = r.GJ.Dc(), aj = O.ET, z = E.Fc, B = E.EA, ai = []; switch (aj) { case 1537: case 1538: var G = 20; var ah = G; var ac = G * (aj === 1537 ? 1 : 2); var S = Math.ceil(z / ah); var J = Math.ceil(B / ac); var M = new Array(S * J); for (ae = 0; ae < M.length; ++ae) { M[ae] = ae } for (ae = 0; ae < M.length; ++ae) { ad = Math.floor(Math.random() * M.length); var af = M[ae]; M[ae] = M[ad]; M[ad] = af } for (ae = 0; ae < M.length; ++ae) { var W = M[ae]; ai.push({ x: ah * (W % S), y: ac * Math.floor(W / S), width: ah, height: ac }) } break; case 3072: case 3073: var A = 120; var C = new Array(A); var Q = aj == 3072; for (ae = 0; ae < C.length; ++ae) { C[ae] = ae } for (ae = 0; ae < C.length; ++ae) { ad = Math.floor(Math.random() * C.length); var Z = C[ae]; C[ae] = C[ad]; C[ad] = Z } for (ae = 0; ae < C.length; ++ae) { var D = C[ae]; if (Q) { ai.push({ x: 0, y: Math.floor(D * B / A), width: z, height: Math.ceil(B / A) }) } else { ai.push({ x: Math.floor(D * z / A), y: 0, width: Math.ceil(z / A), height: B }) } } break; case 3585: case 3586: var aa = 10; var L = z / aa; var H = L; var ab = Math.ceil(B / H); var T = []; var I = []; for (var U = 0; U < ab; ++U) { for (var V = 0; V < aa; ++V) { var P = { x: L * V, y: H * U, width: L, height: H }; if ((V % 2 === 0 && U % 2 === 0) || (V % 2 !== 0 && U % 2 !== 0)) { T.push(P) } else { I.push(P) } } } ai = T.concat(I); if (aj == 3586) { ai.reverse() } break }var Y = []; var ag = t.BL(); var X = { x: 0, y: 0, width: z, height: B }; var R = t.DX(X, false); q.Gt(ag, R); for (ae = 0; ae < ai.length; ++ae) { var F = t.DX(ai[ae], true); F.style.visibility = "hidden"; Y.push(F); q.Gt(ag, F) } var K = window.requestAnimationFrame || window[s.DU("requestAnimationFrame")] || function (x) { return setTimeout(x, 13) }; var N = function (al) { var x = function () { var ao = new Date().getTime(); var am = (ao - y) / O.ES; if (am > 1) { am = 1 } var ap = Math.floor(Y.length * am); if (ap > ak) { for (var an = ak; an < ap; ++an) { Y[an].style.visibility = "visible" } ak = ap } if (am >= 1) { setTimeout(function () { al(); q.Gw(r.FG, ag) }, 0) } else { K(arguments.callee) } }; var ak = 0; var y = new Date().getTime(); K(x); q.Gt(r.FG, ag) }; return { He: N } }; var w = function () { var E = r.GJ.Fq(); var C = r.GJ.Dc(); var A = "scale(" + r.FA + "," + r.FA + ")"; var z = { x: 0, y: 0, width: E.Fc, height: E.EA }; var x = t.DX(z, true); var y = t.DX(z, false); x.style[e] = A; y.style[e] = A; var B = v.Gv(y, [{ Hi: "opacity", from: 1, to: 0 }]); var D = function (F) { B.Gh(function () { F(); q.Gw(r.FG, y); q.Gw(r.FG, x) }, C.ES / 1000); q.Gt(r.FG, x); q.Gt(r.FG, y) }; return { He: D } }; var i = function () { var x = function (K, A, D) { var G = r.GJ.Fq(); var z = { x: 0, y: 0, width: G.Fc, height: G.EA }; var C = t.DX(z, !D); var J; var H; var I = "scale(" + r.FA + "," + r.FA + ") translate(0px,0px) scale(1,1)"; var L; if ((D && K.type == 1) || (!D && K.type == 2)) { H = G.Fc / K.width; L = "scale(" + r.FA + "," + r.FA + ") translate(" + (-K.x * H) + "px," + (-K.y * H) + "px) scale(" + H + "," + H + ")" } else { if (A.type == 3) { J = t.DX(z, D) } H = K.width / G.Fc; L = "scale(" + r.FA + "," + r.FA + ") translate(" + K.x + "px," + K.y + "px) scale(" + H + "," + H + ")" } var B = D ? I : L; var F = D ? L : I; var E = v.Gv(C, [{ Hi: m, from: B, to: F }]); return function (M) { if (J) { J.style[e] = I; q.Gt(r.FG, J) } E.Gh(function () { M(); q.Gw(r.FG, C); if (J) { q.Gw(r.FG, J) } }, K.duration / 1000); q.Gt(r.FG, C) } }; var y = function (E) { var A = r.GJ.Dc(); var C = r.GJ.AS(); var B = A.zooms[0]; var z = A.zooms[1]; var D = []; if (C && (B.type == 1 || B.type == 2)) { D.push(x(B, z, true)) } if (z.type == 1 || z.type == 2) { D.push(x(z, B, false)) } if (D.length > 0) { (function () { if (D.length > 0) { D[0](arguments.callee); D.shift() } else { E() } })() } else { setTimeout(function () { E() }, 0) } }; return { He: y } }; var c = function () { var z = r.GJ.Dc(); switch (z.ET) { case 0: return null; case 256: case 257: case 259: case 262: case 264: case 266: case 268: case 512: case 513: case 515: case 518: case 520: case 522: case 524: case 768: case 769: case 771: case 1024: case 1025: case 1027: case 1792: case 1793: case 1794: case 1795: return f(); case 258: case 514: case 770: case 1026: case 261: case 263: case 265: case 267: case 517: case 519: case 521: case 523: case 269: case 270: case 525: case 526: case 1280: case 1281: case 1282: case 1283: case 1284: case 1285: case 1286: case 1287: case 1288: case 2304: case 2305: case 2306: case 2307: case 2816: case 2817: case 3840: case 3841: case 3842: case 3843: case 3844: case 3845: case 3846: case 3847: case 3584: return g(); case 2560: case 2561: case 2562: case 2563: return u(); case 260: case 516: case 772: case 1028: return n(); case 3328: case 3329: case 3330: case 3331: case 3332: case 3333: case 3334: case 3335: return p(); case 1537: case 1538: case 3072: case 3073: case 3585: case 3586: return h(); case 2048: if (d.EZ) { var y = z.zooms[0].duration; var x = z.zooms[1].duration; if (!y) { y = 0 } if (!x) { x = 0 } z.ES = y + x; return w() } else { return i() } break; case 1536: case 1539: return w(); default: return null } }; var l = function () { var x = c(); if (x) { var B = x.He; var y = 0; var A = r.GJ.Dc(); var z = A.Es; x.He = function (C) { B.call(x, function () { ++y; if (y < z) { var D = arguments.callee; setTimeout(function () { B.call(x, D) }, 0) } else { C() } }) } } return x }; return { Gv: l } }; return { newInstance: b } })() })(window.NV); (function (a) { a.Ev = a.Ev || (function () { var g = 0, l = document, p = document.body, n = a.Gj, f = a.Ht, v = a.GO, m = a.Gu, d = a.Gn, o = a.Hu, q = a.Gc, u = a.EP, c = a.Gq, h = a.Gr, t = a.FV, s = a.Fl, k = a.Fz, i = a.FO, r = a.FR, j = a.GT, b = a.Magnify, e = function (I) { var y = I.DR, D = I.GG, A = I.GF; I.FA = 1; I.view = (function () { var K = o.DU("transform"), S = o.DU("transformOrigin"), V = o.BR("transform"), N = false, Y = {}, Z = null, ab = function (aj) { N = true }, af = function () { P = {}; aa = false; ag = false; ae = false; for (var ak in Y) { var aj = Y[ak].GC; n.Gw(aj.parentNode, aj); delete Y[ak] } Y = {}; I.FG.style.backgroundColor = "rgb(0,0,0)" }, R = function () { if (!N) { return } var aj = I.GJ.Fq(); if (!aj || !aj.Fc) { return } I.FA = parseFloat(I.FG.offsetWidth) / aj.Fc; T(); if (Z) { Z.magnifyLayer.style.height = d.innerHeight() + "px" } }, P = {}, aa = false, ag = false, ae = false, L = function () { return aa || ag }, U = function () { var am = I.GJ.Dc(); var al = am.Fo >> 16 & 255; var ak = am.Fo >> 8 & 255; var aj = am.Fo & 255; I.FG.style.backgroundColor = "rgb(" + al + "," + ak + "," + aj + ")" }, T = function () { if (!N) { return } if (!ae || ag) { ad(); return } var au = I.GJ.Dc(); if (au) { I.FH.Dm(); aa = false } else { I.FH.Dz(); aa = true; if (arguments.length > 0) { P.update = arguments[0] } return } var ao = I.GJ.DC(); var at = cloneProps(Y); var aq = []; aq.push(0); var aw = I.GJ.AX(); if (aw >= 0) { aq.push(1 + ao.BM[aw]) } for (var ar = 0; ar < aq.length; ++ar) { var am = aq[ar]; var ap = au.Gp[am]; var an = "scale(" + I.FA + "," + I.FA + ") translate(" + (ao.Hh + ap.Hh) + "px," + (ao.Hj + ap.Hj) + "px)"; var av = "" + au.FZ + "-" + am; if (Y[av]) { var al = Y[av]; al.GC.style[K] = an; delete at[av] } else { var ak = n.Gv("div"); ak.className = "nv-fvCanvas"; ak.style[K] = an; ak.style[S] = "0 0"; m.Bh(ak, ap.EW, 0, 0); ak.style.width = ap.width + "px"; ak.style.height = ap.height + "px"; n.Gt(I.FG, ak); Y[av] = { image: ap, GC: ak } } } for (var aj in at) { n.Gw(I.FG, at[aj].GC); delete Y[aj] } U(); I.FH.Cc(); if (arguments.length > 0) { arguments[0]() } else { if (P.update) { P.update(); P.update = undefined } } }, X = function (ao, aq) { var am = I.GJ.DC(); var aj = I.GJ.Bk(); var ap = ao.image; var al = ao.GC; var ak = "scale(" + I.FA + "," + I.FA + ") translate(" + (am.Hh + ap.Hh) + "px," + (am.Hj + ap.Hj) + "px)"; var an = s.Gv(al, [{ Hi: V, from: al.style[K], to: ak }]); an.Gh(function () { T(); I.FH.Ej(); aq() }, aj.EH / 1000); I.FH.Ey() }, M = window.requestAnimationFrame || window[o.DU("requestAnimationFrame")] || function (aj) { return setTimeout(aj, 1000 / 60) }, Q = window.cancelAnimationFrame || window[o.DU("cancelAnimationFrame")] || function (aj) { clearTimeout(aj) }, W = function (av, au) { var am = I.GJ.DC(); var aj = I.GJ.Bk(); var ak = av.GC; var ao = av.image; var ar = ak.style[K].match(/translate\(([^p]+)px\s*,\s*([^p]+)px/); var ax = parseFloat(ar[1]); var aw = parseFloat(ar[2]); var ap = am.Hh; var an = am.Hj; var al = "scale(" + I.FA + "," + I.FA + ") translate(" + (am.Hh + ao.Hh) + "px," + (am.Hj + ao.Hj) + "px)"; var at = new Date().getTime(); var aq = aj.EH; M(function () { var aB = new Date().getTime(); var ay = aB - at; var aA = ay / aq; if (aA > 1) { aA = 1 } var az = "scale(" + I.FA + "," + I.FA + ") translate(" + (ao.Hh + ax + (ap - ax) * aA) + "px," + (ao.Hj + aw + (an - aw) * aA) + "px)"; ak.style[K] = az; if (ay < aq) { M(arguments.callee) } else { T(); I.FH.Ej(); au() } }); I.FH.Ey() }, O = g === 0 ? X : W, J = function () { if (!N) { return } var ao = I.GJ.Dc(); var am = I.GJ.DC(); var ak = cloneProps(Y); delete ak["" + ao.FZ + "-0"]; for (var aq in ak) { n.Gw(I.FG, ak[aq].GC); delete Y[aq] } var aj = 0; var an = ao.Gp[aj]; var al = "" + ao.FZ + "-" + aj; if (!Y[al]) { return } var ap = arguments.length > 0 ? arguments[0] : null; O(Y[al], function () { if (ap) { setTimeout(function () { ap() }, 0) } }) }, ah = r.newInstance(I), ad = function () { if (!N) { return } var al = I.GJ.Dc(); if (al) { I.FH.Dm(); ag = false } else { I.FH.Dz(); ag = true; if (arguments.length > 0) { P.transition = arguments[0] } return } if (!ae) { ae = true } var an; if (arguments.length > 0) { an = arguments[0] } else { if (P.transition) { an = P.transition; P.transition = undefined } } var ak = ah.Gv(); if (ak) { var aj = cloneProps(Y); I.FH.Ey(); ak.He(function () { I.FH.Ej(); T(); if (an) { an() } }); for (var am in aj) { n.Gw(I.FG, aj[am].GC); delete Y[am] } U() } else { T(); if (an) { an() } } }, ac = function (ax, au) { var aj, aw, av; if (!Z) { var aA = n.Gv("div"); aA.className = "nv-magnify"; aA.style.height = d.innerHeight() + "px"; I.FG.parentNode.insertBefore(aA, I.FG.nextSibling); av = b.Eq(); n.Gt(aA, av); aw = []; Z = []; var ao = I.GJ.CF(); for (var at = 0; at < ao.length; ++at) { var aq = ao[at]; aj = n.Gv("div"); aj.className = "nv-fvCanvas"; aj.style[S] = "0 0"; aj.style.width = aq.width + "px"; aj.style.height = aq.height + "px"; m.Bh(aj, aq.FC, 0, 0); n.Gt(av, aj); aw.push(aj) } Z = { data: ao, GQ: av, FS: aw, magnifyLayer: aA }; ++I.Ei } else { aw = Z.FS; av = Z.GQ } b.BN(av, ax, au); var an = av.Fn; for (var ap = 0; ap < aw.length; ++ap) { var ar = Z.data[ap].scene, ak = Z.data[ap].Hk, am = Z.data[ap].image, al = I.FA, az = (ak.Hh + am.Hh) * al, ay = (ak.Hj + am.Hj) * al; aj = aw[ap]; transform = "translate(" + (an / 2 - b.Ho * ((ax - parseFloat(I.FG.style.left)) - az)) + "px," + (an / 2 - b.Ho * ((au - parseFloat(I.FG.style.top)) - ay)) + "px) scale(" + (b.Ho * al) + "," + (b.Ho * al) + ") "; aj.style[K] = transform } }, ai = function () { if (Z) { var aj = Z.data, an = Z.magnifyLayer, ak = Z.GQ; for (var al = 0; al < aj.length; ++al) { var am = aj[al]; I.GJ.BV(Z.data.FC) } n.Gw(ak.parentNode, ak); n.Gw(an.parentNode, an); Z = null } }; return { Fe: ab, GV: af, GH: T, Hk: J, Fb: ad, Dg: R, AF: L, Dh: ac, Dr: ai } })(); I.GJ = j.newInstance({ DO: I.DO, Hd: I.Hd }); (function () { var J = null, K = function () { var R = I.GJ.Dc(); J = []; var Q = I.GJ.Dc(); if (!Q) { return } var O = I.GJ.DC(), N, P; N = m.Ci(Q.Gp[0].EW); P = { scene: Q, Hk: O, image: Q.Gp[0], FC: N.FC, width: Q.CV, height: Q.CS }; J.push(P); var M = I.GJ.AX(); if (M >= 0) { var L = 1 + M; N = m.Ci(Q.Gp[L].EW); P = { scene: Q, Hk: O, image: Q.Gp[L], FC: N.FC, width: Q.Gp[L].width, height: Q.Gp[L].height }; J.push(P) } }; I.GJ.CF = function () { if (!J) { K() } return J }; I.GJ.BV = function () { if (J) { for (var L = 0; L < J.length; ++L) { var M = J[L]; m.Cf(M.FC) } J = null } } })(); I.EQ = u.newInstance({ Hd: "1", GG: D, GF: A, GJ: I.GJ, Ep: I.Ep, FT: i.Cn(I) }); I.FH = t.newInstance({ ctx: I }); var C = "tag_fv", G = function () { v.Bi(C); I.EQ.Gl(); I.GJ.GV(); I.view.GV() }, F = function () { I.view.Fe({}); I.view.Fb(function () { var O = I.GJ.DC(); H(O.GI, true) }); I.EQ.He(); c.Dz(); var J = n.Gm("next_page_label"), K = n.Gm("prev_page_label"); J.innerText = "　次へ　"; K.innerText = "　前へ　"; v.BP(C, y, q.EVENT_KEY_PRESSED, function (O) { if (I.FH.Bl()) { return } if (O.keyCode === 37 || O.keyCode === 32) { z(); I.EQ.GA() } else { if (O.keyCode === 39) { B(); I.EQ.GA() } } }, false); v.BP(C, y, q.Fp, function (O) { if (O.clientX < this.clientWidth / 2) { z() } else { B() } I.EQ.GA() }, false); var N = I.FH.BG() + 20, M = I.FH.AU() + 20, L = 0; v.BP(C, y, q.EO, function (P) { if (I.FH.Bl()) { return } if (P.clientX < this.clientWidth / 2) { y.style.cursor = 'url("images/cur_next.afe82fa9.cur"), pointer' } else { y.style.cursor = 'url("images/cur_prev.e6506cb2.cur"), pointer' } var O = new Date().getTime(); if (O - L < 500) { return } if (I.FH.CP() && (P.clientY > N && P.clientY < y.offsetHeight - M)) { I.FH.Em(); L = O } else { if (!I.FH.CP() && (P.clientY <= N || P.clientY >= y.offsetHeight - M)) { I.FH.ED(); L = O } } }, false) }, x = function () { I.view.Fe({}); I.view.Fb(function () { var J = I.GJ.DC(); H(J.GI, true) }); I.EQ.He(); c.Dz(); v.BP(C, y, q.AG, function (J) { I.FH.Br() }, false); v.BP(C, y, q.Fp, function (J) { if (J.clientX < this.clientWidth / 3) { z(); I.EQ.GA() } else { if (J.clientX > this.clientWidth * 2 / 3) { B(); I.EQ.GA() } else { I.FH.ED() } } }, false); v.BP(C, y, q.El, function (J) { if (Math.abs(J.deltaX) > Math.abs(J.deltaY)) { if (J.deltaX > 0) { z() } else { B() } I.EQ.GA() } }, false); v.BP(C, y, q.Ew, function (J) { if (!f.GY) { I.FH.AC() } }, false); v.BP(C, y, q.AI, function (J) { I.view.Dh(J.clientX, J.clientY) }, false); v.BP(C, y, q.AT, function (J) { I.view.Dh(J.clientX, J.clientY) }, false); v.BP(C, y, q.AE, function (J) { I.view.Dr(); I.GJ.BV() }, false) }, E = (function () { var J = 0, M = 0, N = f.Fd && f.EZ, L; if (N) { L = []; for (var K = 0; K < 4; ++K) { L.push(n.Gv("div")); L[K].className = "nv-guard"; p.insertBefore(L[K], I.FG.nextSibling) } } return function () { window.scrollTo(0, a.EV); var P = d.innerWidth(); var S = d.innerHeight(); if (J != P || M != S) { var O; var R = d.GD(); O = S < P ? S : P; if (f.Fg || f.GY) { O = Math.round(O * 0.625) } else { if (f.EZ) { O = Math.floor(O / 160) * 160 } } I.FG.style.width = O + "px"; I.FG.style.height = O + "px"; I.FG.style.left = (P - O) / 2 + "px"; I.FG.style.top = (S - O) / 2 + "px"; if (N) { var T = S < P ? (P - O) / 2 + 1 : P; var Q = S < P ? S : (S - O) / 2 + 1; L[0].style.left = "0px"; L[0].style.top = "0px"; L[0].style.width = P; L[0].style.height = (S - O) / 2 + 1; L[1].style.left = "0px"; L[1].style.top = "0px"; L[1].style.width = (P - O) / 2 + 1; L[1].style.height = S; L[2].style.left = "0px"; L[2].style.top = (S + O) / 2 - 1; L[2].style.width = P; L[2].style.height = (S - O) / 2 + 1; L[3].style.left = (P + O) / 2 - 1; L[3].style.top = "0px"; L[3].style.width = (P - O) / 2 + 1; L[3].style.height = S } J = P; M = S; y.style.height = S + "px"; c.Dg(); h.Dg(); I.FH.Dg(); I.view.Dg() } } })(), H = function (K, J) { if (K && K.autoPlay) { I.FH.Ey(); setTimeout(function () { I.FH.Ej(); z(); I.EQ.GA() }, K.autoPlay.duration) } else { if (K && K.imageConnection) { if (J) { z() } else { B() } I.EQ.GA() } } }, z = function () { I.GJ.CN(function (J) { if (J == "overlay") { I.view.GH(function () { var K = I.GJ.AX(); var M = I.GJ.Dc(); var L = M.Gp[1 + K]; H(L.GI, true) }) } else { if (J == "step") { I.view.Hk(function () { var K = I.GJ.DC(); H(K.GI, true) }) } else { if (J == "scene") { I.view.Fb(function () { var K = I.GJ.DC(); H(K.GI, true); I.FH.Bu() }) } else { if (J == "none") { i.AZ(I)() } } } } }) }, B = function () { I.GJ.BD(function (J) { var K = function () { var L = I.GJ.AX(); if (L >= 0) { var O = I.GJ.Dc(); var N = O.Gp[1 + L]; H(N.GI, false) } else { var M = I.GJ.DC(); H(M.GI, false) } }; if (J == "overlay") { I.view.GH(function () { K() }) } else { if (J == "step") { I.view.Hk(function () { K() }) } else { if (J == "scene") { I.view.GH(function () { K(); I.FH.Bu() }) } } } }) }, w = function (J) { I.GJ.Ex(J); I.view.GH(); I.EQ.GA() }; I.CN = z; I.BD = B; I.Ex = w; return { Fe: f.GY ? F : x, Gk: G, DI: E } }; return { newInstance: e } })() })(window.NV); (function (a) { a.ER = a.ER || (function () { var c = document, e = a.Gj, l = a.Ht, p = a.GO, f = a.Gu, q = a.Gn, k = a.Hu, j = a.Gc, r = a.EP, g = a.Gq, o = a.Gr, d = a.FV, i = a.Fl, n = a.FO, h = a.GT, b = a.Magnify, m = function (G) { var u = 1; var w = 0; var E = -1; var t = G.DR; var B = G.GG; var y = G.GF; G.GJ = (function () { var W, ak = function (at) { W = at.Fj }, O = function (at) { W.Dj(at) }, ae = function (at) { W.constructIndex(at) }, ad = function (at) { W.GV() }, Z = function () { return W.Fq() }, T = function () { return W.getIndex() }, aa = function () { return W.Cs() }, ab = function () { return W.Dc() }, K = function () { return W.DT() }, af = function () { return W.CE() }, ai = function () { return W.DQ() }, V = function () { return W.CG() }, ao = 0, Y = 1, L = 1.4, H = null, ag = function (av, aw) { W.CU(av, aw); var at = [ab(), K(), af()]; for (var au = 0; au < at.length; ++au) { S(at[au]) } }, U = function (at) { ac(); ao = 0; Y = 1; W.Ex(at); ah() }, ap = function (at) { ac(); ao = 0; Y = 1; W.CN(function (au) { ah(); if (at) { at(au) } }) }, aj = function (at) { ac(); ao = 0; Y = 1; W.BD(function (au) { ah(); if (at) { at(au) } }) }, N = function () { ac(); ah() }, ac = function () { var at = [ab(), K(), af()]; for (var au = 0; au < at.length; ++au) { var av = at[au]; if (av && av.Hs) { delete av.Hs } } }, ah = function () { var at = [ab(), K(), af()]; for (var au = 0; au < at.length; ++au) { S(at[au]) } }, S = function (aw) { if (!aw || aw.Hs) { return } var av = aw.Gp[0]; var aC = av.width; var aA = av.height; var aB = parseFloat(G.FG.offsetWidth); var ax = parseFloat(G.FG.offsetHeight); var az, aE, aD, ay, aF; if (l.GY || aB <= ax) { var at = aB / ax; var au = aC / aA; if (at >= au) { az = ax / aA; aE = (aB - (aC * az)) / 2; aD = 0 } else { az = aB / aC; aE = 0; aD = (ax - (aA * az)) / 2 } } else { az = aB / aC; aE = 0; aD = 0 } ay = aE; aF = aD; var aG = ab(); if (!aG) { return } aw.Hs = {}; if (aw.FZ == aG.FZ) { aw.Hs.DB = function (aH) { return aE + (aH ? 0 : (ao * aB)) }; aw.Hs.Ec = function () { return az * Y }; aw.Hs.CR = function (aH, aI) { aE = aH; aD = aI } } else { if (aw.FZ > aG.FZ) { aw.Hs.DB = function (aH) { return aG.Hs.DJ(aH) - aG.Hs.CT() - aB + ay }; aw.Hs.Ec = function () { return az } } else { aw.Hs.DB = function (aH) { return aG.Hs.DJ(aH) + aG.Hs.Ec() * aG.Gp[0].width + aG.Hs.CT() + ay }; aw.Hs.Ec = function () { return az } } } aw.Hs.DJ = function (aH) { var aI = aw.Hs.DB(aH); return Math.abs(aI) > 0.000001 ? aI : 0 }; aw.Hs.DL = function () { return Math.abs(aD) > 0.000001 ? aD : 0 }; aw.Hs.Cg = function () { return aw.Hs.Ec() * aC }; aw.Hs.BQ = function () { return aw.Hs.Ec() * aA }; aw.Hs.CT = function () { return ay }; aw.Hs.Dn = function () { return aF } }, Q = function (aw, au) { var av = parseFloat(G.FG.offsetWidth); var ax = parseFloat(G.FG.offsetHeight); var ay = ab(); if (ax >= ay.Hs.BQ()) { au = 0 } var at = ay.Hs.DJ() + aw; var az = ay.Hs.DL() + au; if (at > ay.Hs.CT()) { ao = (at - ay.Hs.CT()) / av; at = ay.Hs.CT() } else { if (at + ay.Hs.Cg() + ay.Hs.CT() < av) { ao = (at + ay.Hs.Cg() + ay.Hs.CT() - av) / av; at = av - (ay.Hs.Cg() + ay.Hs.CT()) } } if (ay.FZ == 1 && ao < 0) { ao = 0 } else { if (ay.FZ == Z().Ez && ao > 0) { ao = 0 } } if (az > ay.Hs.Dn()) { az = ay.Hs.Dn() } else { if (az + ay.Hs.BQ() + ay.Hs.Dn() < ax) { az = ax - (ay.Hs.BQ() + ay.Hs.Dn()) } } ay.Hs.CR(at, az) }, J = function () { ao = 0 }, an = function (ax, aw, au) { var av = Y; var at = av * ax; if (at < 1) { at = 1 } else { if (at > L * L) { at = L * L } } Y = at; P(at / av, aw, au) }, am = function (au, at) { var av = Y; if (Y < L) { Y = L } else { if (Y < L * L) { Y = L * L } else { Y = 1 } } P(Y / av, au, at) }, P = function (at, av, au) { var aB = ab(); var aA = aB.Gp[0]; var ax = parseFloat(G.FG.offsetWidth); var aw = parseFloat(G.FG.offsetHeight); var az = av - (av - aB.Hs.DJ()) * at; var ay = au - (au - aB.Hs.DL()) * at; if (az > aB.Hs.CT()) { az = aB.Hs.CT() } else { if (az + aB.Hs.Cg() + aB.Hs.CT() < ax) { az = ax - aB.Hs.Cg() - aB.Hs.CT() } } if (ay > aB.Hs.Dn()) { ay = aB.Hs.Dn() } else { if (ay + aB.Hs.BQ() + aB.Hs.Dn() < aw) { ay = aw - aB.Hs.BQ() - aB.Hs.Dn() } } aB.Hs.CR(az, ay) }, M = function () { return ao }, al = function (at) { ao = at }, R = function () { var at = ab(); return at.Hs.DJ() >= at.Hs.CT() - 1 }, ar = function () { var au = ab(); var at = parseFloat(G.FG.offsetWidth); return au.Hs.DJ() + au.Hs.Cg() + au.Hs.CT() <= at + 1 }, I = function () { var au = ab(); if (!au) { return } var at = f.Ci(au.Gp[0].EW); H = { scene: au, FC: at.FC, width: au.CV, height: au.CS } }, aq = function () { if (!H) { I() } return H }, X = function () { if (H) { f.Cf(H.FC); H = null } }; return { Fe: ak, Dj: O, CU: ag, constructIndex: ae, GV: ad, Ex: U, CN: ap, BD: aj, Fq: Z, getIndex: T, Cs: aa, Dc: ab, DT: K, CE: af, DQ: ai, CG: V, Dg: N, FE: Q, CJ: J, Gf: an, EY: am, Ds: R, BX: ar, Be: M, Bj: al, CF: aq, BV: X } })(); G.view = (function () { var K = k.DU("transform"), Q = k.DU("transformOrigin"), R = k.BR("transform"), Z = false, af = false, U = {}, N = false, L, ad, J, T, X, W = {}, Y = null, aa = function (ai) { N = true }, ae = function () { Z = false; af = false; U = {}; for (var aj in W) { var ai = W[aj].GC; e.Gw(ai.parentNode, ai); delete W[aj] } W = {}; if (L) { e.Gw(G.FG, L) } }, O = function () { if (!N) { return } var ak = G.GJ.Fq(); if (!ak) { return } var ai = parseFloat(G.FG.offsetWidth); var aj = parseFloat(G.FG.offsetHeight); if (!L) { L = e.Gv("div"); L.className = "nv-pvCanvas"; L.style[Q] = "0 0"; ad = e.Gv("div"); ad.className = "nv-pvCanvas"; ad.style[Q] = "0 0"; ad.style.backgroundColor = "rgb(0,0,0)"; J = e.Gv("div"); J.className = "nv-pvImageCanvas"; e.Gt(ad, J); T = e.Gv("div"); T.className = "nv-pvCanvas"; T.style[Q] = "0 0"; T.style.backgroundColor = "rgb(0,0,0)"; X = e.Gv("div"); X.className = "nv-pvImageCanvas"; e.Gt(T, X); e.Gt(L, ad); e.Gt(L, T); L.style.display = "none"; e.Gt(G.FG, L) } L.style.width = (ai * 2) + "px"; L.style.height = aj + "px"; ad.style.width = ai + "px"; ad.style.height = aj + "px"; ad.style[K] = "translate(0px, 0px)"; T.style.width = ai + "px"; T.style.height = aj + "px"; T.style[K] = "translate(" + ai + "px, 0px)"; P() }, S = function (ak, ai, am, al) { if (l.Cp) { var aj = "translate(" + ai + "px," + am + "px) scale(" + al + "," + al + ")"; ak.style[Q] = "0 0"; ak.style[K] = aj } else { ak.style.zIndex = 1; ak.style.filter = "progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11=" + al + ",M22=" + al + ",M12=0,M21=0)"; ak.style.left = ai + "px"; ak.style.top = am + "px" } }, P = function () { if (!N) { return } if (af) { ab(U.Ft, U.FT); return } var ay = G.GJ.Dc(); var ap = G.GJ.DT(); var am = G.GJ.CE(); if (ay) { G.FH.Dm(); Z = false } else { G.FH.Dz(); Z = true; return } var ar = cloneProps(W); var aj = [ay, ap, am]; for (var aq = 0; aq < aj.length; ++aq) { var at = aj[aq]; if (!at) { continue } var ao = at.Gp[0]; var ax = at.Hs.DJ(); var av = at.Hs.DL(); var an = at.Hs.Ec(); var aw = at.FZ; if (W[aw]) { var al = W[aw]; S(al.GC, ax, av, an); delete ar[aw] } else { var ak = e.Gv("div"); ak.className = "nv-pvImageCanvas"; f.Bh(ak, ao.EW, 0, 0); ak.style.width = ao.width + "px"; ak.style.height = ao.height + "px"; S(ak, ax, av, an); L.parentNode.insertBefore(ak, L); W[aw] = { image: ao, GC: ak } } } for (var ai in ar) { var au = ar[ai].GC; e.Gw(au.parentNode, au); delete W[ai] } G.FH.Cc() }, I = function (aC, aq) { if (!N) { return } var az = G.GJ.Be(); var aF, ak; if (aC == w) { if (az > 0 || !G.GJ.CG()) { ak = G.GJ.DT() } else { ak = G.GJ.CE() } aF = G.GJ.Dc() } else { aF = G.GJ.Dc(); ak = aC == u ? G.GJ.DT() : G.GJ.CE() } if (aF && ak) { G.FH.Dm(); af = false; U.Ft = null; U.FT = null } else { G.FH.Dz(); af = true; U.Ft = aC; U.FT = aq; return } var ax = parseFloat(G.FG.offsetWidth), ar = parseFloat(G.FG.offsetHeight), aG = new Array(2), ai = [aF, ak], an = function () { G.FH.Ej(); aq() }, am = function () { }; for (var ay = 0; ay < 2; ++ay) { var aB = ai[ay]; var aD = parseInt(aB.FZ); var au = W[aD]; if (!au) { P(); au = W[aD] } var av = aB.Hs.DJ(); var at = aB.Hs.DL(); var aE = aB.Hs.Ec(); var al; if (ay === 0) { if (aC == w) { if (az > 0) { al = aB.Hs.CT() } else { if (az < 0) { al = ax - aB.Hs.Cg() - aB.Hs.CT() } else { al = av } } } else { if (aC == u) { al = ax + aB.Hs.CT() } else { al = -aB.Hs.Cg() - aB.Hs.CT() } } } else { if (aC == w) { if (az > 0 || !G.GJ.CG()) { al = -aB.Hs.Cg() - aB.Hs.CT() } else { al = ax + aB.Hs.CT() } } else { al = aB.Hs.CT() } } var aj = at; var ap; if (l.Cp) { var ao = "translate(" + av + "px," + at + "px) scale(" + aE + "," + aE + ")"; var aw = "translate(" + al + "px," + aj + "px) scale(" + aE + "," + aE + ")"; ap = [{ Hi: R, from: ao, to: aw }] } else { au.GC.style.zIndex = 1; au.GC.style.filter = "progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11=" + aE + ",M22=" + aE + ",M12=0,M21=0)"; ap = [{ Hi: "left", from: (av + "px"), to: (al + "px") }, { Hi: "top", from: (at + "px"), to: (aj + "px") }] } G.FH.Ey(); var aA = i.Gv(au.GC, ap); if (ay == 1) { aA.Gh(am, aC == w ? 0.2 : 0.3) } else { aA.Gh(an, aC == w ? 0.2 : 0.3) } } }, V = function (aB, ao) { if (!N) { return } var ai = G.GJ.Be(), av; var aD, ak; if (aB == w) { if (Math.abs(ai) < 0.000001) { return } else { if (ai > 0 || !G.GJ.CG()) { ak = G.GJ.DT() } else { ak = G.GJ.CE() } } aD = G.GJ.Dc(); av = 0 } else { aD = G.GJ.Dc(); ak = aB == u ? G.GJ.DT() : G.GJ.CE(); av = aB == u ? 1 : -1 } if (aD && ak) { G.FH.Dm(); af = false; U.Ft = null; U.FT = null } else { G.FH.Dz(); af = true; U.Ft = aB; U.FT = ao; return } var ax = parseFloat(G.FG.offsetWidth); var ap = parseFloat(G.FG.offsetHeight); var aq = aB == E || (aB == w && ai <= 0 && G.GJ.CG()); var aE = new Array(2); var aj = [aD, ak]; for (var ay = 0; ay < 2; ++ay) { var aA = aj[ay]; var aC = parseInt(aA.FZ); var at = W[aC]; if (!at) { P(); at = W[aC] } var am = ((ay === 0 && aq) || (ay === 1 && !aq)) ? J : X; var an = [Q, "backgroundImage", "backgroundPosition", "width", "height"]; for (var aw = 0; aw < an.length; ++aw) { var ar = an[aw]; am.style[ar] = at.GC.style[ar] } aE[ay] = am } aE[0].style[K] = "translate(" + aD.Hs.DJ(true) + "px," + aD.Hs.DL() + "px) scale(" + aD.Hs.Ec() + "," + aD.Hs.Ec() + ")"; aE[1].style[K] = "translate(" + ak.Hs.CT() + "px," + ak.Hs.DL() + "px) scale(" + ak.Hs.Ec() + "," + ak.Hs.Ec() + ")"; var au; var al; if (aq) { au = ax * ai; al = aB == E ? -ax : 0; e.Gt(ad, aE[0]); e.Gt(T, aE[1]) } else { au = ax * (ai - 1); al = aB == u ? 0 : -ax; e.Gt(T, aE[0]); e.Gt(ad, aE[1]) } G.FH.Ey(); L.style.display = "block"; var az = i.Gv(L, [{ Hi: R, from: "translate(" + au + "px,0px)", to: "translate(" + al + "px,0px)" }]); az.Gh(function () { G.FH.Ej(); L.style.display = "none"; e.Gw(aE[0].parentNode, aE[0]); e.Gw(aE[1].parentNode, aE[1]); ao() }, aB == w ? 0.2 : 0.3); if (l.Gz && ai != av) { setTimeout(function () { G.GJ.Bj(av); P() }, 50) } }, ah = function (ap, ao, au) { var av = G.GJ.Dc(); var ai = W[av.FZ]; var aj = ai.GC; var ak = aj.style[K]; var am = av.Gp[0]; var at = av.Hs.DJ(); var ar = av.Hs.DL(); var al = av.Hs.Ec(); var aq = "translate(" + at + "px," + ar + "px) scale(" + al + "," + al + ")"; G.FH.Ey(); var an = i.Gv(aj, [{ Hi: R, from: ak, to: aq }]); an.Gh(function () { G.FH.Ej(); au() }, 0.15) }, H = function (aw) { var ax = G.GJ.Dc(); var ar = W[ax.FZ]; var aj = ar.GC; var al = aj.style[K]; var ao = ax.Gp[0]; var av = ax.Hs.DJ(); var au = ax.Hs.DL(); var an = ax.Hs.Ec(); var at = "translate(" + av + "px," + au + "px) scale(" + an + "," + an + ")"; G.FH.Ey(); var ap = i.Gv(aj, [{ Hi: R, from: al, to: at }]); ap.Gh(function () { G.FH.Ej(); if (ai) { ai.GC.style.display = "block" } if (am) { am.GC.style.display = "block" } aw() }, 0.15); var ai = null; var aq = G.GJ.DT(); if (aq) { ai = W[aq.FZ]; ai.GC.style.display = "none" } var am = null; var ak = G.GJ.CE(); if (ak) { am = W[ak.FZ]; am.GC.style.display = "none" } }, ac = function (ai, an) { var ak, aj; if (!Y) { var al = G.GJ.CF(); aj = b.Eq(); loupeSize = aj.Fn; ak = e.Gv("div"); ak.className = "nv-pvImageCanvas"; ak.style[Q] = "0 0"; ak.style.width = al.width + "px"; ak.style.height = al.height + "px"; f.Bh(ak, al.FC, 0, 0); e.Gt(aj, ak); e.Gt(G.FG, aj); Y = { data: al, GQ: aj, GC: ak }; ++G.Ei } else { ak = Y.GC; aj = Y.GQ } var am = Y.data.scene; ah = am.Hs.Ec(), imageX = am.Hs.DJ(), imageY = am.Hs.DL(), loupeSize = aj.Fn; b.BN(aj, ai, an); S(ak, loupeSize / 2 - b.Ho * (ai - imageX), loupeSize / 2 - b.Ho * (an - imageY), b.Ho * ah) }, ag = function () { if (Y) { var aj = Y.data, ai = Y.GQ; G.GJ.BV(Y.data.FC); e.Gw(ai.parentNode, ai); Y = null } }, M = function () { return Z || af }, ab = (c.getCSSCanvasContext || k.Gx == "moz") ? V : I; return { Fe: aa, GV: ae, GH: P, Fb: ab, GZ: ah, Hb: H, Dh: ac, Dr: ag, AF: M, Dg: O } })(); j.Df(true); G.GJ.Fe({ Fj: h.newInstance({ DO: G.DO, Hd: G.Hd }) }); G.EQ = r.newInstance({ Hd: "2", GG: B, GF: y, GJ: G.GJ, Ep: G.Ep, FT: n.Cn(G) }); G.FH = d.newInstance({ ctx: G, Bz: (l.GY ? false : true) }); var A = "tag_pv", D = function () { G.EQ.Gl(); G.GJ.GV(); G.view.GV(); p.Bi(A) }, F = function () { G.view.Fe({}); G.EQ.He(); g.Dz(); p.BP(A, t, j.Fp, function (J) { if (J.clientX < this.clientWidth / 3) { x() } else { if (J.clientX > this.clientWidth * 2 / 3) { z() } else { G.FH.ED() } } }, false); p.BP(A, t, j.CO, function (J) { G.GJ.EY(J.clientX, J.clientY); G.view.GZ(J.clientX, J.clientY, function () { G.view.GH() }) }, false); p.BP(A, t, j.Ew, function (J) { if (!l.GY) { G.FH.AC() } G.GJ.Gf(J.GZ, J.centerX, J.centerY); G.view.GH() }, false); var H = false; var I = false; p.BP(A, t, j.AG, function (J) { H = G.GJ.Ds(); I = G.GJ.BX(); G.view.GH(); G.FH.Br() }, false); p.BP(A, t, j.Ee, function (J) { G.GJ.FE(J.deltaX, J.deltaY); G.view.GH() }, false); p.BP(A, t, j.CX, function (K) { var J = G.GJ.Be(); if (J > 0.5) { x() } else { if (J < -0.5) { z() } else { v() } } G.GJ.CJ() }, false); p.BP(A, t, j.El, function (N) { var O = false; var M = false; if (Math.abs(N.deltaX) > Math.abs(N.deltaY)) { if (N.deltaX > 0) { O = true } else { M = true } } if (O && !H) { O = false } if (M && !I) { M = false } if (O) { x() } else { if (M) { z() } else { var L = 0.3; var K = N.deltaX / (N.elapsedTime / 1000) * L; var J = N.deltaY / (N.elapsedTime / 1000) * L; G.GJ.FE(K / 2, J / 2); G.GJ.CJ(); G.view.Hb(function () { G.view.GH() }) } } }, false); p.BP(A, t, j.AI, function (J) { G.view.Dh(J.clientX, J.clientY) }, false); p.BP(A, t, j.AT, function (J) { G.view.Dh(J.clientX, J.clientY) }, false); p.BP(A, t, j.AE, function (J) { G.view.Dr(); G.GJ.BV() }, false) }; var v = function () { G.view.Fb(w, function () { G.view.GH() }) }; var x = function () { if (G.GJ.DQ()) { G.view.Fb(u, function () { G.GJ.CN(function (H) { if (H != "scene") { return } G.view.GH() }); G.EQ.GA() }) } else { n.AZ(G)() } }; var z = function () { if (!G.GJ.CG()) { return } G.view.Fb(E, function () { G.GJ.BD(function (H) { if (H != "scene") { return } G.view.GH() }); G.EQ.GA() }) }; var s = function (H) { G.GJ.Ex(H); G.view.GH(); G.EQ.GA() }; var C = (function () { var H = 0, I = 0; return function () { window.scrollTo(0, a.EV); var J = q.innerWidth(), K = q.innerHeight(); if (H != J || I != K) { G.FG.style.width = J + "px"; G.FG.style.height = K + "px"; G.FG.style.left = "0px"; G.FG.style.top = "0px"; H = J; I = K; t.style.height = K + "px"; g.Dg(); o.Dg(); G.FH.Dg(); G.GJ.Dg(); G.view.Dg() } } })(); G.CN = x; G.BD = z; G.Ex = s; return { Fe: function () { F() }, Gk: D, DI: C } }; return { newInstance: m } })() })(window.NV); (function (b) { var c = 25.4, a = 2; b.ERSpread = b.ERSpread || (function () { var e = b.Gj, l = b.Ht, p = b.GO, f = b.Gu, q = b.Gn, k = b.Hu, j = b.Gc, r = b.EP, g = b.Gq, o = b.Gr, d = b.FV, i = b.Fl, n = b.FO, h = b.GT, m = function (G) { var v = 1; var w = 0; var F = -1; var u = G.DR; var B = G.GG; var y = G.GF; G.GJ = (function () { var L, U = function (af) { L = af.Fj; L.CQ(true) }, ae = function (af) { L.Dj(af) }, M = function (af) { L.constructIndex(af) }, ab = function (af) { L.GV() }, R = function () { return L.Fq() }, W = function () { return L.getIndex() }, H = function () { var af = L.Cs(); return (af > 1 && af % 2 == 1) ? af - 1 : af }, K = function () { var af = H(); return af > 1 ? L.FD(af + 1) : L.FD(af) }, ac = function () { var af = H(); return af > 1 ? L.FD(af) : null }, ad = function () { var af = H(); return L.FD(af > 1 ? af + 3 : af + 2) }, P = function () { var af = H(); return L.FD(af > 1 ? af + 2 : af + 1) }, Q = function () { var af = H(); return L.FD(af - 1) }, S = function () { var af = H(); return L.FD(af - 2) }, V = function () { var ag = R(), af = H(); if (!ag) { return false } return af > 1 ? af <= ag.Ez : false }, J = function () { var ag = R(), af = H(); if (!ag) { return false } return af > 1 ? (af + 1 <= ag.Ez) : true }, aa = function () { var ag = R(), af = H(); if (!ag) { return false } return af > 1 ? af + 2 <= ag.Ez : ag.Ez >= 2 }, I = function () { var ag = R(), af = H(); if (!ag) { return false } return af > 1 ? af + 3 <= ag.Ez : ag.Ez >= 3 }, O = function () { return H() > 2 }, N = function () { return H() > 1 }, T = 0, Y = 1, X = 1.4, Z = Math.round(q.GD() / c * a); constructContent = function (ah, ai) { L.CU(ah, ai); var af = [ac(), K(), P(), ad(), S(), Q()]; for (var ag = 0; ag < af.length; ++ag) { setupGeometry(af[ag]) } }, s = function (af) { clearGeometries(); T = 0; Y = 1; if (af > 1 && af % 2 == 1) { --af } L.Ex(af); setupGeometries() }, x = function (ag) { var af = H(); s(af > 1 ? af + 2 : af + 1); if (ag) { ag("scene") } }, z = function (ag) { var af = H(); s(af > 2 ? af - 2 : 1); if (ag) { ag("scene") } }, viewportUpdated = function () { clearGeometries(); setupGeometries() }, clearGeometries = function () { var af = [ac(), K(), P(), ad(), S(), Q()]; for (var ag = 0; ag < af.length; ++ag) { var ah = af[ag]; if (ah && ah.Hs) { delete ah.Hs } } }, setupGeometries = function () { var af = [ac(), K(), P(), ad(), S(), Q()]; for (var ag = 0; ag < af.length; ++ag) { setupGeometry(af[ag]) } }, setupGeometry = function (ai) { if (!ai || ai.Hs) { return } var ap = ai.FZ === 1 ? true : (ai.FZ % 2 === 1), ah = ai.Gp[0], ao = ah.width, am = ah.height, an = parseFloat(G.FG.offsetWidth / 2), aj = parseFloat(G.FG.offsetHeight), al, ar, aq, ak, at; var af = (an - Z / 2) / aj; var ag = ao / am; if (af >= ag) { al = aj / am; ar = ap ? (an - (ao * al)) - Z / 2 : an + Z / 2; aq = 0 } else { al = an / ao; ar = ap ? 0 : an + Z / 2; aq = (aj - (am * al)) / 2 } ak = ar; at = aq; ai.Hs = {}; ai.Hs.Ec = function () { return al }; ai.Hs.DJ = function (au) { return Math.abs(ar) > 0.000001 ? ar : 0 }; ai.Hs.DL = function () { return Math.abs(aq) > 0.000001 ? aq : 0 }; ai.Hs.Cg = function () { return ai.Hs.Ec() * ao }; ai.Hs.BQ = function () { return ai.Hs.Ec() * am }; ai.Hs.CT = function () { return ak }; ai.Hs.Dn = function () { return at } }; return { Fe: U, Dj: ae, CU: constructContent, constructIndex: M, GV: ab, Ex: s, CN: x, BD: z, Fq: R, getIndex: W, Cs: H, BE: K, Bp: ac, CD: ad, Ck: P, Bv: Q, Bf: S, BF: J, BC: V, CA: I, Cm: aa, BB: N, Bo: O, Dg: viewportUpdated, } })(); G.view = (function () { var N = k.DU("transform"), R = k.DU("transformOrigin"), H = k.BR("transform"), I = false, J = false, U = {}, K = false, O = {}, T = function (V) { K = true }, P = function () { I = false; J = false; U = {}; for (var W in O) { var V = O[W].GC; e.Gw(V.parentNode, V); delete O[W] } O = {} }, S = function () { if (!K) { return } var X = G.GJ.Fq(); if (!X) { return } var V = parseFloat(G.FG.offsetWidth); var W = parseFloat(G.FG.offsetHeight); L() }, M = function (X, V, Z, Y) { if (l.Cp) { var W = "translate(" + V + "px," + Z + "px) scale(" + Y + "," + Y + ")"; X.style[R] = "0 0"; X.style[N] = W } else { X.style.zIndex = 1; X.style.filter = "progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11=" + Y + ",M22=" + Y + ",M12=0,M21=0)"; X.style.left = V + "px"; X.style.top = Z + "px" } }, L = function () { if (!K) { return } if (J) { Q(U.Ft, U.FT); return } var ag = G.GJ.Bp(), ad = G.GJ.BE(), X = G.GJ.Ck(), aa = G.GJ.CD(), Y = G.GJ.Bf(), ae = G.GJ.Bv(); if ((!G.GJ.BC() || ag) && (!G.GJ.BF() || ad)) { G.FH.Dm(); I = false } else { G.FH.Dz(); I = true; return } var aj = cloneProps(O); var Z = [ag, ad, X, aa, Y, ae]; for (var ai = 0; ai < Z.length; ++ai) { var ak = Z[ai]; if (!ak) { continue } var ah = ak.Gp[0]; var W = ak.Hs.DJ(); var V = ak.Hs.DL(); var am = ak.Hs.Ec(); var an = ak.FZ; if (O[an]) { var af = O[an]; af.GC.style.opacity = ai < 2 ? 1 : 0; M(af.GC, W, V, am); if (ai > 0) { e.Gt(G.FG, af.GC) } delete aj[an] } else { var ac = e.Gv("div"); ac.className = "nv-pvImageCanvas"; f.Bh(ac, ah.EW, 0, 0); ac.style.width = ah.width + "px"; ac.style.height = ah.height + "px"; ac.style.opacity = ai < 2 ? 1 : 0; M(ac, W, V, am); e.Gt(G.FG, ac); O[an] = { image: ah, GC: ac } } } for (var ab in aj) { var al = aj[ab].GC; e.Gw(al.parentNode, al); delete O[ab] } G.FH.Cc() }, Q = function (al, aa) { if (!K) { return } var ae = G.GJ.Bp(), ab = G.GJ.BE(), ak = al == v ? G.GJ.Ck() : G.GJ.Bf(), X = al == v ? G.GJ.CD() : G.GJ.Bv(), ac = al == v ? G.GJ.Cm : G.GJ.Bo, W = al == v ? G.GJ.CA : G.GJ.BB; if ((!G.GJ.BC() || ae) && (!G.GJ.BF() || ab) && (!ac() || ak) && (!W() || X)) { G.FH.Dm(); J = false; U.Ft = null; U.FT = null } else { G.FH.Dz(); J = true; U.Ft = al; U.FT = aa; return } var V = [ae, ab, ak, X], af = [function () { G.FH.Ej(); aa() }, function () { }]; G.FH.Ey(); for (var ah = 0; ah < V.length; ++ah) { if (!V[ah]) { continue } var ai, aj = V[ah], am = parseInt(aj.FZ), ag = ah < 2 ? "1" : "0", Y = ah < 2 ? "0" : "1", Z = [{ Hi: "opacity", from: ag, to: Y }], ad = O[am]; if (!ad) { L(); ad = O[am] } ai = i.Gv(ad.GC, Z); ai.Gh(af[0], 0.15); if (af.length > 1) { af.splice(0, 1) } } }; needsUpdateOnContentDownload = function () { return I || J }; return { Fe: T, GV: P, GH: L, Fb: Q, AF: needsUpdateOnContentDownload, Dg: S } })(); j.Df(true); G.GJ.Fe({ Fj: h.newInstance({ DO: G.DO, Hd: G.Hd }) }); G.EQ = r.newInstance({ Hd: "2", GG: B, GF: y, GJ: G.GJ, Ep: G.Ep, FT: n.Cn(G) }); G.FH = d.newInstance({ ctx: G, Bz: (l.GY ? false : true) }); var A = "tag_pv2", E = function () { p.Bi(A); G.EQ.Gl(); G.GJ.GV(); G.view.GV() }, D = function () { G.view.Fe({}); G.EQ.He(); g.Dz(); p.BP(A, u, j.EVENT_KEY_PRESSED, function (K) { if (G.FH.Bl()) { return } if (K.keyCode === 37 || K.keyCode === 32) { x() } else { if (K.keyCode === 39) { z() } } }, false); p.BP(A, u, j.Fp, function (K) { if (K.clientX < this.clientWidth / 2) { x() } else { z() } }, false); var J = G.FH.BG() + 20, H = G.FH.AU() + 20, I = 0; p.BP(A, u, j.EO, function (L) { if (G.FH.Bl()) { return } if (L.clientX < this.clientWidth / 2) { u.style.cursor = 'url("images/cur_next.afe82fa9.cur"), pointer' } else { u.style.cursor = 'url("images/cur_prev.e6506cb2.cur"), pointer' } var K = new Date().getTime(); if (K - I < 500) { return } if (G.FH.CP() && (L.clientY > J && L.clientY < G.FG.offsetHeight - H)) { G.FH.Em(); I = K } else { if (!G.FH.CP() && (L.clientY <= J || L.clientY >= G.FG.offsetHeight - H)) { G.FH.ED(); I = K } } }, false); p.BP(A, u, j.AG, function (K) { G.view.GH() }, false) }, t = function () { G.view.Fe({}); G.EQ.He(); g.Dz(); p.BP(A, u, j.Fp, function (H) { if (H.clientX < this.clientWidth / 3) { x() } else { if (H.clientX > this.clientWidth * 2 / 3) { z() } else { G.FH.ED() } } }, false); p.BP(A, u, j.AG, function (H) { G.view.GH() }, false) }, x = function () { if (G.GJ.Cm()) { G.view.Fb(v, function () { G.GJ.CN(function (H) { if (H != "scene") { return } G.view.GH(); G.FH.Bu() }); G.EQ.GA() }) } else { n.AZ(G)() } }, z = function () { if (!G.GJ.BB()) { return } G.view.Fb(F, function () { G.GJ.BD(function (H) { if (H != "scene") { return } G.view.GH(); G.FH.Bu() }); G.EQ.GA() }) }, s = function (H) { G.GJ.Ex(H); G.view.GH(); G.EQ.GA() }, C = (function () { var H = 0, I = 0; return function () { window.scrollTo(0, b.EV); var J = q.innerWidth(), K = q.innerHeight(); if (H != J || I != K) { G.FG.style.width = J + "px"; G.FG.style.height = K + "px"; G.FG.style.left = "0px"; G.FG.style.top = "0px"; H = J; I = K; u.style.height = K + "px"; g.Dg(); o.Dg(); G.FH.Dg(); G.GJ.Dg(); G.view.Dg() } } })(); G.CN = x; G.BD = z; G.Ex = s; return { Fe: l.GY ? D : t, Gk: E, DI: C } }; return { newInstance: m } })() })(window.NV); (function (a) { a._ViewerVertical = a._ViewerVertical || (function () { var h = 0, m = document, q = document.body, o = a.Gj, f = a.Ht, x = a.GO, n = a.Gu, d = a.Gn, p = a.Hu, s = a.Gc, w = a.EP, c = a.Gq, i = a.Gr, v = a.FV, u = a.Fl, g = a.FlFrame, l = a.Fz, j = a.FO, t = a.FR, k = a.GT, r = a.FN, b = a.Magnify, e = function (O) { var F = 1, K = 0, C = -1, E = false, N = O.DR, R = O.GG, M = O.GF, H = null; O.FA = 1; O.GJ = (function () { var an, aB = function (aJ) { an = aJ.Fj }, af = function (aJ) { an.Dj(aJ) }, av = function (aJ) { an.constructIndex(aJ) }, au = function (aJ) { an.GV() }, ap = function () { return an.Fq() }, aj = function () { return an.getIndex() }, ar = function () { return an.Cs() }, at = function () { return T(ar(), an.Dc()) }, aa = function () { var aK, aL = 0, aJ; do { ++aL; aJ = ar() + aL; aK = T(aJ, an.FD(aJ)) } while (!aK.FU && aK.invisible === true); return aK }, aw = function () { var aK, aL = 0, aJ; do { ++aL; aJ = ar() - aL; aK = T(aJ, an.FD(aJ)) } while (!aK.FU && aK.invisible === true); return aK }, az = function () { return an.DQ() }, am = function () { return an.CG() }, ai = function (aJ) { return T(aJ, an.FD(aJ)) }, ax = function (aM, aO) { var aK = false; an.CU(aM, function () { if (aK) { E = true } if (O.Hd == "1") { for (var aZ = 0; aZ < aM.scenes.length; ++aZ) { var aR = aM.scenes[aZ]["sceneNo"]; var a0 = ai(aR); if (a0.FU) { continue } a0.overlays = []; for (var aY = 0; aY < a0.Hf.length; ++aY) { var a2 = a0.Hf[aY].BM; if (a2.length > 0) { a0.overlays = a0.overlays.concat(a2) } else { if (aY == a0.Hf.length - 1) { a0.overlays.push(-1) } } } var aV = a0.Gp[0]; var a1 = r.BY(aV.DP, aV.width, aV.height); a0.invisible = (aR != 1 && aR != ap().Ez) && a1; a0.melted = false; if (aR > 2 && aR < ap().Ez) { var aU = ai(aR - 1); if (!aU.FU && !aU.invisible) { var aP = aU.Gp[0]; var aT = r.CZ(aV.DP, aV.width, aV.height, aP.DP, aP.width, aP.height); if (aT) { a0.melted = true; a0.invisible = true; while (aU.melted) { aU = ai(aU.FZ - 1) } aU.Gp.push(a0.Gp[0]); aU.overlays.push(aU.Gp.length - 2) } } } if (aR < ap().Ez - 2 && aZ == aM.scenes.length - 1) { var aX = ai(aR + 1); if (!aX.FU && !aX.invisible) { var aS = aX.Gp[0]; var a3 = r.CZ(aV.DP, aV.width, aV.height, aS.DP, aS.width, aS.height); if (a3) { aX.melted = true; aX.invisible = true; a0.Gp.push(aX.Gp[0]); a0.overlays.push(a0.Gp.length - 2); for (var aW = 0; aW < aX.overlays.length; ++aW) { var aQ = aX.overlays[aW]; if (aQ >= 0) { a0.Gp.push(aX.Gp[1 + aQ]); a0.overlays.push(a0.Gp.length - 2) } } } } } } } aO() }); for (var aL = 0; aL < aM.scenes.length; ++aL) { var aJ = aM.scenes[aL]["sceneNo"]; var aN = ai(aJ); if (aN.FU) { continue } aN.overlays = []; aN.melted = false; aN.invisible = false } aK = ay() }, al = function (aJ) { aD = 0; var aK, aL = 0; do { an.Ex(aJ + aL); aK = at(); ++aL } while (!aK.FU && aK.invisible === true); ay() }, aE = function (aJ) { aD = 0; an.CN(function (aK) { if (aK == "scene") { ay(); var aL = at(); if (aL.invisible) { an.CN(arguments.callee) } else { if (aJ) { aJ(aK) } } } else { an.CN(arguments.callee) } }) }, aA = function (aJ) { aD = 0; an.BD(function (aK) { if (aK == "scene") { ay(); var aL = at(); if (aL.invisible) { an.BD(arguments.callee) } else { if (aJ) { aJ(aK) } } } else { an.BD(arguments.callee) } }) }, ad = function () { ah = parseFloat(O.FG.offsetWidth); ae = parseFloat(O.FG.offsetHeight); ay() }, ah = 0, ae = 0, aD = 0, V = [], X = -1, T = function (aJ, aN) { if (aN) { aN.FU = false } else { var aL = o.Gv("div"), aK = o.Gv("img"), aM = parseFloat(O.FG.offsetWidth); aL.className = "nv-dummyCanvas"; aL.style.width = aM + "px"; aL.style.height = aM + "px"; aK.className = "nv-dummyImage"; aK.src = "images/img-loading.68ee652a.gif"; o.Gt(aL, aK); aN = { FZ: aJ, FU: true, Fo: 0, overlays: [], CV: aM, CS: aM, Gp: [{ width: aM, height: aM, Hh: 0, Hj: 0, elem: aL }] } } return aN }, ay = function () { var aP = ap(); if (!aP) { return false } var aO, aR = false, aU = ar(), aY = at(), aK = Y(aY), aW = ae / 2 - (1 + aD) * aK.height / 2, aQ, aL, aX = aK, aJ = aW, aM = aU, aS = aU; for (aL = aU - 1; aL >= 1 && aJ >= -ae; --aL) { aQ = ai(aL); aX = Y(aQ); aJ = aJ - aX.height; aM = aL } aJ = aW + aK.height; var aT = aU - aM + 1; for (aL = aU + 1; aL <= aP.Ez && aJ <= ae * 2; ++aL) { aJ = aJ + aX.height; aQ = ai(aL); aX = Y(aQ); ++aT } if (V.length != aT || X != aM) { V = []; X = aM; for (aO = 0; aO < aT; ++aO) { V.push(ai(X + aO)) } aR = true } else { for (aO = 0; aO < aT; ++aO) { aQ = ai(X + aO); var aV = V[aO]; if (aV.FU && !aQ.FU) { V[aO] = aQ; aR = true } } } if (aD > 1 || aD < -1) { for (aO = 0; aO < V.length; ++aO) { aQ = V[aO]; var aN = aq(aQ); if (aN.y <= ae / 2 && aN.y + aN.height >= ae / 2) { an.Ex(aQ.FZ); aD = ((ae / 2 - aN.height / 2) - aN.y) / (aN.height / 2); break } } aR = true } return aR }, aI = 30, ak = 0, ac = function (aK) { if (aK.invisible) { return { GZ: 0, CT: 0, Dn: 0 } } var aN = (ah - ak * 2) / aK.CV; if (O.Hd == "1") { if (aN * aK.CS + aI * 2 > ae) { aN = (ae - aI * 2) / aK.CS } if (aK.overlays && aK.overlays.length > 0) { if (aN * aK.CS > ae * 0.7) { aN = ae * 0.7 / aK.CS } } if (aN > O.FA) { aN = O.FA } } else { if (aN * aK.CS > ae) { aN = ae / aK.CS } } var aJ = aK.CV * aN, aM = aK.CS * aN, aL = (aJ / aM > 1.5) ? (aJ / 1.5 - aM) / 2 : 0; return { GZ: aN, CT: (ah - aK.CV * aN) / 2, Dn: aI + aL } }, Y = function (aK) { var aJ = ac(aK); return { Fa: aJ.GZ, Eg: aJ.CT, Ek: aJ.Dn, width: aK.CV * aJ.GZ + aJ.CT * 2, height: aK.CS * aJ.GZ + aJ.Dn * 2 } }, aq = function (aO, aM) { if (aM === undefined) { aM = aD } var aJ = ar(); var aQ = at(); var aP = Y(aQ); var aN = ae / 2 - (1 + aM) * aP.height / 2; while (aO.FZ != aJ) { var aL = false; var aK = aP; if (aO.FZ < aJ) { --aJ } else { ++aJ; aL = true } aQ = V[aJ - X]; aP = Y(aQ); aN = aN + (aL ? aK.height : -aP.height); aJ = aQ.FZ } return { Fa: aP.Fa, Eg: Math.abs(aP.Eg) > 0.000001 ? aP.Eg : 0, Ek: Math.abs(aP.Ek) > 0.000001 ? aP.Ek : 0, width: aP.width, height: aP.height, x: 0, y: Math.abs(aN) > 0.000001 ? aN : 0 } }, U = function () { var aR = at(), aK = aH(true); H = []; for (var aP = 0; aP < aK.length; ++aP) { var aQ = aK[aP]; if (aQ.FU) { continue } var aJ = W(aQ); for (var aN = 0; aN < aJ.length; ++aN) { var aM, aO, aL = aJ[aN]; aM = n.Ci(aQ.Gp[aL].EW); aO = { scene: aQ, image: aQ.Gp[aL], FC: aM.FC, width: aL === 0 ? aQ.CV : aQ.Gp[aL].width, height: aL === 0 ? aQ.CS : aQ.Gp[aL].height }; H.push(aO) } } }, aG = function () { if (!H) { U() } return H }, ao = function () { if (H) { for (var aJ = 0; aJ < H.length; ++aJ) { var aK = H[aJ]; n.Cf(aK.FC) } H = null } }, ag = function (aK, aJ) { var aM = at(); var aL = aq(aM); aD = ((ae / 2 - aL.height / 2) - (aL.y + aJ)) / (aL.height / 2); if (aM.FZ == 1 && aD < 0) { aD = 0 } else { if (aM.FZ == ap().Ez && aD > 0) { aD = 0 } } ay() }, Z = function () { aD = 0 }, aH = function (aJ) { if (aJ) { return V.filter(function (aM, aK) { var aL = O.GJ.Cy(aM); return aL.y <= d.innerHeight() && aL.y + aL.height >= 0 }) } else { return V } }, aF = function () { return X }, aC = function (aJ) { aD = aJ; ay() }, ab = function () { return aD }, W = function (aP) { var aN = ab(), aK = []; aK.push(0); if (aP.overlays.length > 0) { var aM = aP.overlays.length + 1, aO = aq(aP), aL = ae - aO.height + aO.Ek * 2, aQ = aO.y + aO.Ek, aJ = Math.floor(aM * (aL - aQ) / aL) - 1; if (aJ >= aP.overlays.length) { aJ = aP.overlays.length - 1 } if (aJ >= 0 && aP.overlays[aJ] >= 0) { aK.push(1 + aP.overlays[aJ]) } } return aK }; return { Fe: aB, Dj: af, CU: ax, constructIndex: av, GV: au, Ex: al, CN: aE, BD: aA, Fq: ap, getIndex: aj, Cs: ar, Dc: at, DT: aa, CE: aw, DQ: az, CG: am, Dg: ad, FE: ag, CJ: Z, Bj: aC, Be: ab, Cw: aH, Ba: aF, Eh: Y, Cy: aq, CF: aG, BV: ao, Bg: W } })(); O.view = (function () { var T = p.DU("transform"), Y = p.DU("transformOrigin"), aa = p.BR("transform"), V = false, ac = {}, ab = {}, ad = null, af = function (al) { V = true }, ai = function () { W = {}; ae = false; aj = false; ab = {}; for (var am in ac) { var al = ac[am].GC; o.Gw(al.parentNode, al); delete ac[am] } ac = {} }, X = function () { if (!V) { return } var al = O.GJ.Fq(); if (!al || (O.Hd == "1" && !al.Fc)) { return } if (O.Hd == "1") { O.FA = parseFloat(O.FG.offsetWidth < O.FG.offsetHeight ? O.FG.offsetWidth : O.FG.offsetHeight) / al.Fc } Z() }, W = {}, ae = false, aj = false, U = function () { return ae || aj || E }, Z = function () { if (!V) { return } if (aj) { ah(ab.Ft, ab.FT); return } var aB = O.GJ.Dc(); if (aB) { O.FH.Dm(); ae = false } else { O.FH.Dz(); ae = true; return } if (E) { E = false } var aw = O.GJ.Be(), aA = O.GJ.Cw(), ax = cloneProps(ac); for (var av = 0; av < aA.length; ++av) { var ay = aA[av], az = O.GJ.Bg(ay); for (var au = 0; au < az.length; ++au) { var an = az[au], at = ay.Gp[an], aD = O.GJ.Cy(ay), am = aD.x + aD.Eg + Math.round(at.Hh * aD.Fa), al = aD.y + aD.Ek + Math.round(at.Hj * aD.Fa), aq = "translate(" + am + "px," + al + "px) scale(" + aD.Fa + "," + aD.Fa + ") ", aC = "" + ay.FZ + "-" + (ay.FU ? "dummy" : an); if (ac[aC]) { var ar = ac[aC]; ar.GC.style[T] = aq; delete ax[aC] } else { var ap = o.Gv("div"); ap.className = "nv-fvCanvas"; ap.style[T] = aq; ap.style[Y] = "0 0"; if (ay.FU) { o.Gt(ap, at.elem) } else { if (!ay.invisible) { n.Bh(ap, at.EW, 0, 0) } } ap.style.width = at.width + "px"; ap.style.height = at.height + "px"; o.Gt(O.FG, ap); ac[aC] = { image: at, GC: ap } } } } for (var ao in ax) { o.Gw(O.FG, ax[ao].GC); delete ac[ao] } O.FH.Cc() }, ah = function (aq, aN) { if (!V) { return } var aU = O.GJ.Be(), ap = O.GJ.Dc(), ar; if (aq == K) { if (aU > 0 || !O.GJ.CG()) { ar = O.GJ.DT() } else { ar = O.GJ.CE() } } else { ar = aq == F ? O.GJ.DT() : O.GJ.CE() } if (!ap.FU && !ar.FU) { O.FH.Dm(); aj = false; ab.Ft = null; ab.FT = null } else { O.FH.Dz(); aj = true; ab.Ft = aq; ab.FT = aN; return } var aO = new Array(2), aQ = [ap, ar], aR = 0, aA, ao = aq == K ? 0.2 : 0.2, az = function () { if (--aR === 0) { O.FH.Ej(); aN(); if (aA !== undefined) { clearTimeout(aA) } } }, av, aB = O.GJ.Eh(ap), aP = O.GJ.Eh(ar), al = O.GJ.Cw(), aK = cloneProps(ac); if (aq == K) { av = 0 } else { if (aq == F) { av = (aB.height + aP.height) / aB.height } else { av = -(aB.height + aP.height) / aB.height } } for (var aT = 0; aT < al.length; ++aT) { var aD = al[aT]; var aH = parseInt(aD.FZ); var aM = O.GJ.Bg(aD), an = O.GJ.Cy(aD), aJ = an.Fa, aC = O.GJ.Cy(aD, av); for (var aS = 0; aS < aM.length; ++aS) { var aI = aM[aS], am = aD.Gp[aI], aF = an.x + an.Eg + Math.round(am.Hh * aJ), aE = an.y + an.Ek + Math.round(am.Hj * aJ), ay = aF, ax = aC.y + aC.Ek + Math.round(am.Hj * aJ), au = "" + aD.FZ + "-" + aI, aw = ac[au]; if (!aw) { Z(); aw = ac[aH] } if (!aw) { continue } delete aK[au]; var aV = "translate(" + aF + "px," + aE + "px) scale(" + aJ + "," + aJ + ")", aL = "translate(" + ay + "px," + ax + "px) scale(" + aJ + "," + aJ + ")", aG = [{ Hi: aa, from: aV, to: aL }]; var aW = u.Gv(aw.GC, aG, (f.Gz && !u.useAnimationFrame) ? true : u.useAnimationFrame); aW.Gh(az, ao); ++aR } } for (var at in aK) { if (ac[at]) { o.Gw(O.FG, aK[at].GC); delete ac[at] } } if (aR > 0) { O.FH.Ey(); aA = setTimeout(function () { if (aR !== 0) { aR = 0; O.FH.Ej(); aN() } }, ao * 1000 + 50) } else { aN() } }, ag = function (ay, av) { var al, ax, aw; if (!ad) { aw = b.Eq(); o.Gt(O.FG, aw); ax = []; ad = []; var ao = O.GJ.CF(); for (var au = 0; au < ao.length; ++au) { var ar = ao[au]; al = o.Gv("div"); al.className = "nv-pvImageCanvas"; al.style[Y] = "0 0"; al.style.width = ar.width + "px"; al.style.height = ar.height + "px"; n.Bh(al, ar.FC, 0, 0); o.Gt(aw, al); ax.push(al) } ad = { data: ao, GQ: aw, FS: ax }; ++O.Ei } else { ax = ad.FS; aw = ad.GQ } b.BN(aw, ay, av); var an = aw.Fn; for (var aq = 0; aq < ax.length; ++aq) { var at = ad.data[aq].scene, am = ad.data[aq].image, ap = O.GJ.Cy(at), aA = ap.x + ap.Eg + Math.round(am.Hh * ap.Fa), az = ap.y + ap.Ek + Math.round(am.Hj * ap.Fa); al = ax[aq]; transform = "translate(" + (an / 2 - b.Ho * (ay - aA)) + "px," + (an / 2 - b.Ho * (av - az)) + "px) scale(" + (b.Ho * ap.Fa) + "," + (b.Ho * ap.Fa) + ") "; al.style[T] = transform } }, ak = function () { if (ad) { var al = ad.data, am = ad.GQ; for (var an = 0; an < al.length; ++an) { var ao = al[an]; O.GJ.BV(ad.data.FC) } o.Gw(am.parentNode, am); ad = null } }; return { Fe: af, GV: ai, GH: Z, Hk: scroll, Fb: ah, Dg: X, AF: U, Dh: ag, Dr: ak } })(); O.GJ.Fe({ Fj: k.newInstance({ DO: O.DO, Hd: O.Hd }) }); O.EQ = w.newInstance({ Hd: O.Hd, GG: R, GF: M, GJ: O.GJ, Ep: O.Ep, FT: j.Cn(O) }); O.FH = v.newInstance({ ctx: O, Bz: true }); var z = "tag_fv", Q = function () { x.Bi(z); O.EQ.Gl(); O.GJ.GV(); O.view.GV() }, I = function () { O.view.Fe({}); O.EQ.He(); c.Dz(); var T = o.Gm("next_page_label"), V = o.Gm("prev_page_label"); T.innerText = "　次へ　"; V.innerText = "　前へ　"; x.BP(z, N, s.EVENT_KEY_PRESSED, function (X) { if (O.FH.Bl()) { return } if (X.keyCode === 37 || X.keyCode === 32) { L(); O.EQ.GA() } else { if (X.keyCode === 39) { P(); O.EQ.GA() } } }, false); x.BP(z, N, s.Fp, function (X) { if (X.clientX < this.clientWidth / 2) { L() } else { P() } O.EQ.GA() }, false); var U = O.FH.getToolbarHeight() + 20, W = 0; x.BP(z, N, s.EO, function (Y) { if (O.FH.Bl()) { return } if (Y.clientX < this.clientWidth / 2) { N.style.cursor = 'url("images/cur_next.afe82fa9.cur"), pointer' } else { N.style.cursor = 'url("images/cur_prev.e6506cb2.cur"), pointer' } var X = new Date().getTime(); if (X - W < 500) { return } if (O.FH.CP() && (Y.clientY > U && Y.clientY < N.offsetHeight - U)) { O.FH.Em(); W = X } else { if (!O.FH.CP() && (Y.clientY <= U || Y.clientY >= N.offsetHeight - U)) { O.FH.ED(); W = X } } }, false) }, A = function () { O.view.Fe({}); O.EQ.He(); c.Dz(); x.BP(z, N, s.AG, function (T) { D(); O.view.GH(); O.FH.Br() }, false); x.BP(z, N, s.Ee, function (T) { O.GJ.FE(T.deltaX, T.deltaY); O.view.GH(); O.EQ.GA() }, false); x.BP(z, N, s.CX, function (T) { }, false); x.BP(z, N, s.Fp, function (U) { var T = O.GJ.Be(); if (U.clientX < this.clientWidth / 3) { if (T >= 0) { L() } else { y() } } else { if (U.clientX > this.clientWidth * 2 / 3) { if (T <= 0) { P() } else { y() } } else { O.FH.ED() } } }, false); x.BP(z, N, s.Ew, function (T) { if (!f.GY) { O.FH.AC() } }, false); x.BP(z, N, s.El, function (U) { var T = U.deltaY / (U.elapsedTime / 1000); S(T) }, false); x.BP(z, N, s.AI, function (T) { O.view.Dh(T.clientX, T.clientY) }, false); x.BP(z, N, s.AT, function (T) { O.view.Dh(T.clientX, T.clientY) }, false); x.BP(z, N, s.AE, function (T) { O.view.Dr(); O.GJ.BV() }, false) }, B = (function () { var T = 0, U = 0; return function () { window.scrollTo(0, a.EV); var V = d.innerWidth(); var W = d.innerHeight(); if (T != V || U != W) { O.FG.style.width = V + "px"; O.FG.style.height = W + "px"; O.FG.style.left = "0px"; O.FG.style.top = "0px"; if (f.Fg || f.GY) { } T = V; U = W; N.style.height = W + "px"; c.Dg(); i.Dg(); O.FH.Dg(); O.GJ.Dg(); O.view.Dg() } } })(), G, S = function (T) { var W = new Date().getTime() / 1000, U = 0, V = (T > 0 ? -1 : 1) * d.GD() * 30; enterFrame = function () { var ac = new Date().getTime() / 1000, Z = ac - W, ab = T * Z + 0.5 * V * Z * Z, X = ab - U, aa = false; G = undefined; if ((T <= 0 && X > 0) || (T >= 0 && X < 0)) { return } O.GJ.FE(0, X); O.view.GH(); O.EQ.GA(); var Y = O.GJ.Cs(); if ((Y == 1 || Y == O.GJ.Fq().Ez) && O.GJ.Be() === 0) { if (Y == O.GJ.Fq().Ez) { j.AZ(O)() } return } U = ab; G = g.requestAnimationFrame(arguments.callee) }; enterFrame() }, D = function () { if (G !== undefined) { g.cancelAnimationFrame(G); G = undefined } }, y = function () { O.view.Fb(K, function () { O.GJ.Bj(0); O.view.GH() }) }, L = function () { if (O.GJ.DQ()) { O.view.Fb(F, function () { O.GJ.CN(function (T) { if (T != "scene") { return } O.view.GH() }); O.EQ.GA() }) } else { j.AZ(O)() } }, P = function () { if (!O.GJ.CG()) { return } O.view.Fb(C, function () { O.GJ.BD(function (T) { if (T != "scene") { return } O.view.GH() }); O.EQ.GA() }) }, J = function (T) { O.GJ.Ex(T); O.view.GH(); O.EQ.GA() }; O.CN = L; O.BD = P; O.Ex = J; return { Fe: f.GY ? I : A, Gk: Q, DI: B } }; return { newInstance: e } })(); a.EvVertical = a.ERVertical = a._ViewerVertical })(window.NV); (function (a) { a.Viewer = a.Viewer || (function () { var d = a.Ht, c = a.Gs, g = a.Ev, f = a.EvVertical, b = a.ER, h = a.ERVertical, e = a.ERSpread; return { newInstance: function (i) { var j = (function () { if (i.Hd == "1") { if (d.GY) { return g } else { return c.Cx() === 0 ? g : f } } else { if (d.GY) { return e } else { return c.Cx() === 0 ? b : h } } })(); return j.newInstance.apply(j, arguments) } } })() })(window.NV); NV.GO.Et(window, "load", function () { var f = document.body, b = NV.Gj, h = NV.Ht, l = NV.GO, m = NV.Gn, g = NV.Gc, d = NV.Gq, i = NV.Gr, c = NV.Gs, j = NV.Viewer, k = NV.Fm, a = NV.Gg, e = NV.Fz, n = function () { if (!h.AP) { i.EE(i.GX, function () { m.Hm() }, { EF: "起動に失敗しました", DW: "お使いのブラウザでは閲覧できません。前のページに戻り、対応OSおよび推奨ブラウザをご確認ください。" }); return } var H = m.Dl("p0"), A = m.Dl("p1"), z = m.Dl("p2"), D = m.Dl("p3"), I = m.Dl("p4"), x = m.Dl("p5"), q = m.Dl("p8"), w = m.Fi("X-MK-SID"), E = m.Dl("p10"), F = m.Dl("p17"), u = m.Dl("p18"), y = m.Dl("p19") == "1"; traceUuid = m.Dl("p20"); if (!E) { E = "0" } if (!H || !A || !z || (z != "1" && z != "2") || !D || !I || !q || q != w) { i.EE(i.GX, function () { m.Hm() }, { EF: "起動に失敗しました", DW: "前のページに戻り、再読み込み後、もう一度お試しください。" }); return } var G = b.Gm("viewport"); var B = b.Gm("gesture"); var r = c.Cz({ key: D + "_" + I + "_" + z }); l.Et(window, "unload", function () { r.Ha() }, false); var p = h.GY; var v = k.newInstance((e.BH(E) ? "ikkini_" : "") + (p ? "pc" : "html") + "_viewer_main"); v.DM(); var t = (function () { var O, N = true, L, M = 0, K = function (Q) { if (!L) { L = e.newInstance() } if (O) { O.Gk() } if (!L.Eu) { L.Eu = arguments.callee } L.GG = Q.GG, L.GF = Q.GF, L.GE = Q.GE; L.Hl = Q.Hl; L.Ga = Q.Ga; L.Hd = Q.Hd; L.Eo = Q.Eo; L.traceUuid = Q.traceUuid; L.waTitle = Q.waTitle; L.bookTitle = Q.bookTitle; L.DK = Q.DK; L.Cj = Q.Cj; if (Q.Ep) { L.Ep = Q.Ep } if (Q.DO) { L.DO = Q.DO } if (Q.FG) { L.FG = Q.FG } if (Q.DR) { L.DR = Q.DR } L.DO.GV({ key: L.GE + "_" + L.Hl + "_" + L.Hd }); if (Q.initialSceneNo) { L.DO.FZ(Q.initialSceneNo) } L.Ei = 0; L.CK = false; L.AN = false; O = j.newInstance(L); N = false; var S = function () { setTimeout(function () { L.FH.De(L.bookTitle, L.waTitle); L.FH.setSwitchButtons(L.DK, L.Cj); O.Fe(); O.DI(); N = true; if (L.BH()) { v.EX("switch", u + "-" + M) } ++M }, 50) }, P = function () { if (L.BH()) { var T = [{ tflg: L.DK, f: a.Cv }, { tflg: L.Cj, f: a.By }], U = function () { var V = T[0]; if (!V.tflg) { d.Dz(); V.f(L, function (W) { d.Dm(); T.splice(0, 1); if (T.length > 0) { U() } else { S() } }) } }; U() } else { S() } }, R = function () { O.Gk(); O = j.newInstance(L); N = false; S() }; L.toggleReadingDirection = R; if (h.GY) { S() } else { if (L.bookTitle) { P() } else { d.Dz(); a.Db(L, function (T) { d.Dm(); P() }); L.bookTitle = L.waTitle = " " } } d.BJ(Q.Hd == 1) }, J = function () { if (N) { O.DI() } }; return { Eu: K, DI: J } })(); t.Eu({ GG: H, GF: A, GE: D, Hl: I, Hd: z, Ga: x, Eo: E, FG: G, Ep: true, DR: B, DO: r, initialSceneNo: (e.BH(E) ? 1 : null), traceUuid: traceUuid }); l.Et(B, "touchend", function (J) { if (f.scrollTop != NV.EV) { t.DI() } }, false); g.FM(B); var s = (function () { var J = null; return function () { var L = m.innerHeight(); var K = 0; if (J) { clearInterval(J) } J = setInterval(function (N) { var M = m.innerHeight(); if (M != L) { t.DI() } L = M; if (++K >= 100) { clearInterval(J); J = null } }, 10) } })(); l.Et(window, "resize", function () { t.DI(); if (h.Fd) { s() } }, false); var C = true; NV.EV = C ? 0 : 1; if (h.Fd) { s() } else { if (h.Gz) { var o = setInterval(function (J) { if (f.scrollTop != NV.EV) { t.DI() } }, 500) } } if (y || (e.BH(E) && F && F != "0")) { window.google_trackConversion({ google_conversion_id: 976098976, google_custom_params: { dynx_itemid: D, dynx_pagetype: "offerdetail", dynx_totalvalue: "", }, google_remarketing_only: true }) } }; n() });